<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accesorios</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px; /* Reducido de 2px a 10px */
            overflow: hidden;
        }

        /* Modificar el contenedor principal */
.container {
    max-width: 1000px;
    margin: 0 auto;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 15px;
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    backdrop-filter: blur(10px);
    height: 100vh; /* Altura completa de la ventana */
    display: flex;
    flex-direction: column;
}

/* Mantener la cabecera fija */
.header {
    background: linear-gradient(135deg, #4a5568, #2d3748);
    color: white;
    text-align: center;
    padding: 15px 20px; /* Reducir padding vertical de 20px a 15px */
    position: sticky;
    top: 0;
    z-index: 1000;
    flex-shrink: 0; /* No se encoge */
}

/* Reducir espacio entre el título y la sección de estadísticas */
.header h1 {
    margin-bottom: 10px; /* Reducir de 20px a 10px */
    font-size: 2.5rem;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

/* Reducir espacio entre estadísticas y botones */
.stats-container {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 5px; /* Reducir de 20px a 5px */
    backdrop-filter: blur(5px);
}

/* Hacer el contenedor de la tabla scrolleable */
.table-container {
    flex: 1; /* Ocupa el resto del espacio disponible */
    overflow-y: auto; /* Scroll vertical */
    padding: 1px 20px 20px 20px; /* Reducir padding-top a 1px */
    background: white;
}

/* Mejorar el scroll en la tabla */
.table-container::-webkit-scrollbar {
    width: 8px;
}

.table-container::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

.table-container::-webkit-scrollbar-thumb {
    background: greenyellow;
    border-radius: 10px;
}

.table-container::-webkit-scrollbar-thumb:hover {
    background: rgb(60, 97, 4);
}

/* Asegurar que la tabla ocupe todo el ancho disponible */
.alphabet-table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px; /* Espacio al final */
}

        .header h1 {
            font-size: 2.2rem; /* Reducido de 2.5rem a 2.2rem */
            margin-bottom: 8px; /* Reducido de 10px a 8px */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            color: #63b3ed; /* Color azul claro */
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .table-container {
            padding: 20px; /* Reducido de 30px a 20px */
            overflow-x: auto;
        }

        .alphabet-table thead {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .alphabet-table th {
            padding: 15px 10px;
            text-align: center;
            font-weight: 600;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-right: 1px solid rgba(255, 255, 255, 0.3);
        }

        .alphabet-table th:last-child {
            border-right: none; /* Quitar línea de la última columna */
        }

        .alphabet-table tbody tr {
            opacity: 0;
            animation: fadeInUp 0.5s ease forwards;
            transition: all 0.3s ease;
            border-bottom: 1px solid #e2e8f0;
        }

        .alphabet-table tbody tr:hover {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .alphabet-table tbody tr:nth-child(1) { animation-delay: 0.1s; }
        .alphabet-table tbody tr:nth-child(2) { animation-delay: 0.2s; }
        .alphabet-table tbody tr:nth-child(3) { animation-delay: 0.3s; }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .alphabet-table td {
            padding: 12px 10px;
            text-align: center;
            vertical-align: middle;
            border-right: 1px solid rgba(102, 126, 234, 0.2); /* Color del gradiente */
        }

        .alphabet-table td:last-child {
            border-right: none; /* Quitar línea de la última columna */
        }

        .letter-cell {
            font-size: 1.1rem; /* Reducido de 1.6rem a 1.1rem */
            font-weight: bold;
            color: #2d3748;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .transcription-cell {
            font-size: 1.1rem; /* Reducido de 1.3rem a 1.1rem */
            color: #4a5568;
            font-style: italic;
            font-weight: 500;
        }

        .play-button {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 8px 16px; /* Tamaño original */
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(72, 187, 120, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            margin: 0 auto;
        }

        .play-button:hover {
            background: linear-gradient(135deg, #38a169, #2f855a);
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(72, 187, 120, 0.4);
        }

        /* Modificar el estilo del botón cuando está reproduciendo */
.play-button.playing {
    background: linear-gradient(135deg, #919105, #efe973); /* Color rojo */
    color: white;
    border: none;
    border-radius: 50px;
    padding: 4px 10px; /* Mismo tamaño que el original */
    cursor: pointer;
    font-size: 0.8rem;
    transition: all 0.3s ease;
    box-shadow: 0 3px 10px rgba(245, 101, 101, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    margin: 0 auto;
}
/* media querires para Pc para .play-button.playing mayor que padding: 4px 10px; */
@media (min-width: 1024px) {
    .play-button.playing {
        padding: 7px 18px;
    }
}
.play-button.playing:hover {
    background: greenyellow;
    transform: translateY(-1px);
    box-shadow: 0 4px 15px rgba(245, 101, 101, 0.4);
}

/* Eliminar las ondas de audio y mantener solo el texto */
.play-button.playing span {
    display: block;
    font-size: 0.9rem;
}

/* Mantener las ondas de audio pequeñas para que no cambien el tamaño del botón */
.audio-wave {
    display: inline-block;
    width: 3px;
    height: 12px;
    background: white;
    margin: 0 1px;
    border-radius: 1px;
    animation: wave 1s infinite ease-in-out;
}

.audio-wave:nth-child(1) { animation-delay: 0s; }
.audio-wave:nth-child(2) { animation-delay: 0.1s; }
.audio-wave:nth-child(3) { animation-delay: 0.2s; }
.audio-wave:nth-child(4) { animation-delay: 0.3s; }

@keyframes wave {
    0%, 40%, 100% { transform: scaleY(0.4); }
    20% { transform: scaleY(1); }
}

/* Mantener el contenido centrado cuando está reproduciendo */
.play-button.playing span {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1px;
}

        /* Nueva sección de progreso elegante */
        .progress-section {
            margin-top: -15px; /* Usar margen negativo si es necesario */
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: -1px;
        }

        .progress-stats {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .stat-divider {
            width: 1px;
            height: 40px;
            background: rgba(255, 255, 255, 0.3);
        }

        .progress-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 5px; /* Reducir espacio después de las estadísticas */
        }

        .progress-track {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169, #2f855a);
            border-radius: 10px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(72, 187, 120, 0.4);
            position: relative;
            overflow: hidden;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .progress-text {
            text-align: center;
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Responsive para la sección de progreso */
        @media (max-width: 768px) {
            .progress-section {
                padding: 15px;
                margin-top: 15px;
            }
            
            .progress-stats {
                gap: 15px;
            }
            
            .stat-value {
                font-size: 1.5rem;
            }
            
            .stat-label {
                font-size: 0.8rem;
            }
            
            .stat-divider {
                height: 30px;
            }
        }

        @media (max-width: 480px) {
            .progress-section {
                padding: 12px;
            }
            
            .progress-stats {
                gap: 10px;
            }
            
            .stat-value {
                font-size: 1.3rem;
            }
            
            .stat-label {
                font-size: 0.75rem;
            }
            
            .progress-text {
                font-size: 0.8rem;
            }
        }

        /* Botones del header más compactos */
        .header button {
            padding: 8px 16px !important; /* Reducido */
            font-size: 0.9rem !important; /* Reducido */
            margin-top: 10px !important; /* Reducido de 15px a 10px */
        }

        /* Control específico de márgenes en la cabecera */
.header * {
    margin-top: 0;
}

.header h1:first-child {
    margin-top: 0;
}

/* Reducir espacios en la sección de estadísticas */
.stats-container .stats-grid {
    margin-bottom: 10px; /* Reducir espacio antes de la barra de progreso */
}

.progress-container {
    margin-top: 5px; /* Reducir espacio después de las estadísticas */
}

/* Ajustar el contenedor de botones */
.header .button-container {
    margin-top: 1px; /* Reducir a 1px */
    margin-bottom: 1px; /* Agregar esta línea para reducir el espacio inferior */
}

/* Responsive mejorado para espacios más pequeños */
        @media (max-width: 768px) {
            body {
                padding: 5px;
            }
            
            .container {
                margin: 5px;
                border-radius: 10px;
            }

            .header {
                padding: 15px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .table-container {
                padding: 10px;
            }

            .alphabet-table th,
            .alphabet-table td {
                padding: 8px 6px;
                border-right: 1px solid rgba(255, 255, 255, 0.2); /* Líneas más sutiles en móvil */
            }
            
            .alphabet-table td {
                border-right: 1px solid #f0f0f0;
            }
            
            .alphabet-table th:last-child,
            .alphabet-table td:last-child {
                border-right: none;
            }

            .letter-cell {
                font-size: 1.0rem; /* Reducido de 1.8rem a 1.0rem */
            }

            .transcription-cell {
                font-size: 1rem;
            }

            .play-button {
                padding: 6px 12px;
                font-size: 0.8rem;
                min-width: 60px;
            }
            
            .stats {
                padding: 10px;
                font-size: 0.9rem;
            }

            /* Botones responsivos */
            #play-all-btn, #stop-btn {
                padding: 12px 18px !important;
                font-size: 0.85rem !important;
            }
            
            #play-all-btn span, #stop-btn span {
                display: inline !important;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.6rem;
            }
            
            .header p {
                font-size: 0.9rem;
            }
            
            .alphabet-table th {
                font-size: 0.8rem;
                padding: 10px 5px;
            }
            
            .letter-cell {
                font-size: 0.9rem; /* Reducido de 1.6rem a 0.9rem */
            }
            
            .transcription-cell {
                font-size: 0.9rem;
            }
            
            .play-button {
                min-width: 55px;
                padding: 5px 10px;
                font-size: 0.75rem;
            }
            
            /* Ocultar texto en botones en móviles muy pequeños */
            #play-all-btn span:not(.fas), #stop-btn span:not(.fas) {
                display: none; /* Ocultar texto en móviles muy pequeños */
            }
            
            #play-all-btn, #stop-btn {
                min-width: 50px !important;
                padding: 12px !important;
            }
        }

        @media (max-width: 360px) {
            #play-all-btn, #stop-btn {
                padding: 10px 12px !important;
                font-size: 1.1rem !important;
            }
        }

        /* Audio visualization */
        .audio-wave {
            display: inline-block;
            width: 4px;
            height: 20px;
            background: #48bb78;
            margin: 0 1px;
            border-radius: 2px;
            animation: wave 1s infinite ease-in-out;
        }

        .audio-wave:nth-child(2) { animation-delay: 0.1s; }
        .audio-wave:nth-child(3) { animation-delay: 0.2s; }
        .audio-wave:nth-child(4) { animation-delay: 0.3s; }

        @keyframes wave {
            0%, 40%, 100% { transform: scaleY(0.4); }
            20% { transform: scaleY(1); }
        }

        /* Efecto de sombra dorada para la fila activa - ajustada para estar dentro de la fila */
.alphabet-table tbody tr.playing-row {
    position: relative;
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.08), rgba(255, 223, 0, 0.04));
    border-left: 4px solid rgba(255, 215, 0, 0.8);
    border-right: 4px solid rgba(255, 215, 0, 0.8);
    border-top: 1px solid rgba(255, 215, 0, 0.3);
    border-bottom: 1px solid rgba(255, 215, 0, 0.3);
    box-shadow: 
        0 0 8px rgba(255, 215, 0, 0.2) inset,
        0 1px 2px rgba(255, 215, 0, 0.1);
    transition: all 0.3s ease;
    margin: 1px 0;
}

.alphabet-table tbody tr.playing-row:hover {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.12), rgba(255, 223, 0, 0.06));
    box-shadow: 
        0 0 12px rgba(255, 215, 0, 0.3) inset,
        0 2px 4px rgba(255, 215, 0, 0.15);
}

.language-selector {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    padding: 8px 12px;
    color: white;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    outline: none;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
}

.language-selector:hover {
    background: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.5);
}

.language-selector:focus {
    background: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.7);
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2);
}

.language-selector option {
    background: #4a5568;
    color: white;
    padding: 8px;
}

/* Responsive para el selector */
@media (max-width: 768px) {
    .language-selector {
        font-size: 0.8rem;
        padding: 6px 10px;
    }
}

@media (max-width: 480px) {
    .language-selector {
        font-size: 0.75rem;
        padding: 5px 8px;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
<h1><i class="fas fa-gem"></i> Accesorios</h1>          
            <!-- Los botones se agregarán aquí por JavaScript -->
            
            <!-- Nueva sección de progreso elegante -->
            <div class="progress-section">
                <div class="progress-stats">
                   <div class="stat-item">
<span class="stat-label">Total</span>
<span class="stat-value" id="total-letters">49</span>
</div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <span class="stat-label">Reproducidas</span>
                        <span class="stat-value" id="played-count">0</span>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <span class="stat-label">Idioma</span>
<select id="language-select" class="language-selector">
    <option value="en">Inglés</option>
    <option value="ar">Árabe</option>
    <option value="fr">Francés</option>
</select>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-track">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                    <div class="progress-text">
                        <span id="progress-percentage">0</span>% completado
                    </div>
                </div>
            </div>
        </div>

        <div class="table-container">
            <table class="alphabet-table">
    <thead>
        <tr>
          <th>Accesorio</th>
            <th><i class="fas fa-comment-dots"></i> Traducción</th>
            <th><i class="fas fa-volume-up"></i> Voz</th>
        </tr>
    </thead>
    <tbody id="alphabet-tbody">
        <!-- Las filas se generarán con JavaScript -->
    </tbody>
</table>
        </div>

        
    </div>

    <script>

// ...existing code...
const translations = {
    ar: [
        { spanish: 'Una gorra', translation: 'قبعة' },
        { spanish: 'Un gorro', translation: 'قبعة صوف' },
        { spanish: 'Un sombrero', translation: 'قبعة عريضة' },
        { spanish: 'Un sombrero de baño', translation: 'قبعة استحمام' },
        { spanish: 'Un pañuelo', translation: 'منديل' },
        { spanish: 'Una bandana', translation: 'باندانا' },
        { spanish: 'Unas gafas de sol', translation: 'نظارات شمسية' },
        { spanish: 'Unas gafas', translation: 'نظارات' },
        { spanish: 'Una bufanda', translation: 'وشاح' },
        { spanish: 'Una pajarita', translation: 'ربطة عنق فراشة' },
        { spanish: 'Una corbata', translation: 'ربطة عنق' },
        { spanish: 'Un bolso', translation: 'حقيبة يد' },
        { spanish: 'Una riñonera', translation: 'حقيبة خصر' },
        { spanish: 'Un cinturón', translation: 'حزام' },
        { spanish: 'Una mochila', translation: 'حقيبة ظهر' },
        { spanish: 'Unos guantes deportivos', translation: 'قفازات رياضية' },
        { spanish: 'Una diadema', translation: 'عصابة رأس' },
        { spanish: 'Un tocado', translation: 'غطاء رأس' },
        { spanish: 'Un rosario', translation: 'مسبحة' },
        { spanish: 'Unos aros', translation: 'أقراط دائرية' },
        { spanish: 'Unos pendientes cortos', translation: 'أقراط قصيرة' },
        { spanish: 'Unos pendientes largos', translation: 'أقراط طويلة' },
        { spanish: 'Un bastón', translation: 'عصا' },
        { spanish: 'Un abanico', translation: 'مروحة يدوية' },
        { spanish: 'Una tobillera', translation: 'خلخال' },
        { spanish: 'Un tarjetero', translation: 'حافظة بطاقات' },
        { spanish: 'Un monedero', translation: 'محفظة نقود' },
        { spanish: 'Una cartera', translation: 'محفظة' },
        { spanish: 'Unas alianzas de matrimonio', translation: 'خواتم زواج' },
        { spanish: 'Un anillo de oro', translation: 'خاتم ذهب' },
        { spanish: 'Un anillo de plata', translation: 'خاتم فضة' },
        { spanish: 'Un anillo decorativo', translation: 'خاتم زخرفي' },
        { spanish: 'Un reloj digital', translation: 'ساعة رقمية' },
        { spanish: 'Un reloj analógico', translation: 'ساعة تناظرية' },
        { spanish: 'Un reloj de pulsera', translation: 'ساعة يد' },
        { spanish: 'Una pulsera', translation: 'سوار' },
        { spanish: 'Una pulsera de perlas', translation: 'سوار لؤلؤ' },
        { spanish: 'Un brazalete', translation: 'إسورة' },
        { spanish: 'Un broche para cuello', translation: 'دبوس للعنق' },
        { spanish: 'Un collar largo', translation: 'قلادة طويلة' },
        { spanish: 'Un collar corto', translation: 'قلادة قصيرة' },
        { spanish: 'Una gargantilla', translation: 'طوق' },
        { spanish: 'Una pashmina', translation: 'باشمينا' },
        { spanish: 'Un velo', translation: 'حجاب' },
        { spanish: 'Una corona', translation: 'تاج' },
        { spanish: 'Una peineta', translation: 'مشط زخرفي' },
        { spanish: 'Un pasador para cabello', translation: 'مشبك شعر' },
        { spanish: 'Una boina', translation: 'قبعة باسكية' },
        { spanish: 'Una sombrilla', translation: 'مظلة شمسية' }
    ],
    fr: [
        { spanish: 'Una gorra', translation: 'Une casquette' },
        { spanish: 'Un gorro', translation: 'Un bonnet' },
        { spanish: 'Un sombrero', translation: 'Un chapeau' },
        { spanish: 'Un sombrero de baño', translation: 'Un bonnet de bain' },
        { spanish: 'Un pañuelo', translation: 'Un mouchoir' },
        { spanish: 'Una bandana', translation: 'Un bandana' },
        { spanish: 'Unas gafas de sol', translation: 'Des lunettes de soleil' },
        { spanish: 'Unas gafas', translation: 'Des lunettes' },
        { spanish: 'Una bufanda', translation: 'Une écharpe' },
        { spanish: 'Una pajarita', translation: 'Un nœud papillon' },
        { spanish: 'Una corbata', translation: 'Une cravate' },
        { spanish: 'Un bolso', translation: 'Un sac à main' },
        { spanish: 'Una riñonera', translation: 'Une banane' },
        { spanish: 'Un cinturón', translation: 'Une ceinture' },
        { spanish: 'Una mochila', translation: 'Un sac à dos' },
        { spanish: 'Unos guantes deportivos', translation: 'Des gants de sport' },
        { spanish: 'Una diadema', translation: 'Un bandeau' },
        { spanish: 'Un tocado', translation: 'Une coiffe' },
        { spanish: 'Un rosario', translation: 'Un chapelet' },
        { spanish: 'Unos aros', translation: 'Des créoles' },
        { spanish: 'Unos pendientes cortos', translation: 'Des boucles courtes' },
        { spanish: 'Unos pendientes largos', translation: 'Des boucles longues' },
        { spanish: 'Un bastón', translation: 'Une canne' },
        { spanish: 'Un abanico', translation: 'Un éventail' },
        { spanish: 'Una tobillera', translation: 'Une chaînette de cheville' },
        { spanish: 'Un tarjetero', translation: 'Un porte-cartes' },
        { spanish: 'Un monedero', translation: 'Un porte-monnaie' },
        { spanish: 'Una cartera', translation: 'Un portefeuille' },
        { spanish: 'Unas alianzas de matrimonio', translation: 'Des alliances' },
        { spanish: 'Un anillo de oro', translation: 'Une bague en or' },
        { spanish: 'Un anillo de plata', translation: 'Une bague en argent' },
        { spanish: 'Un anillo decorativo', translation: 'Une bague décorative' },
        { spanish: 'Un reloj digital', translation: 'Une montre digitale' },
        { spanish: 'Un reloj analógico', translation: 'Une montre analogique' },
        { spanish: 'Un reloj de pulsera', translation: 'Une montre-bracelet' },
        { spanish: 'Una pulsera', translation: 'Un bracelet' },
        { spanish: 'Una pulsera de perlas', translation: 'Un bracelet de perles' },
        { spanish: 'Un brazalete', translation: 'Un bracelet large' },
        { spanish: 'Un broche para cuello', translation: 'Une broche pour col' },
        { spanish: 'Un collar largo', translation: 'Un collier long' },
        { spanish: 'Un collar corto', translation: 'Un collier court' },
        { spanish: 'Una gargantilla', translation: 'Un ras-du-cou' },
        { spanish: 'Una pashmina', translation: 'Un pashmina' },
        { spanish: 'Un velo', translation: 'Un voile' },
        { spanish: 'Una corona', translation: 'Une couronne' },
        { spanish: 'Una peineta', translation: 'Un peigne décoratif' },
        { spanish: 'Un pasador para cabello', translation: 'Une barrette' },
        { spanish: 'Una boina', translation: 'Un béret' },
        { spanish: 'Una sombrilla', translation: 'Une ombrelle' }
    ],
    en: [
        { spanish: 'Una gorra', translation: 'A cap' },
        { spanish: 'Un gorro', translation: 'A beanie' },
        { spanish: 'Un sombrero', translation: 'A hat' },
        { spanish: 'Un sombrero de baño', translation: 'A swimming cap' },
        { spanish: 'Un pañuelo', translation: 'A handkerchief' },
        { spanish: 'Una bandana', translation: 'A bandana' },
        { spanish: 'Unas gafas de sol', translation: 'Sunglasses' },
        { spanish: 'Unas gafas', translation: 'Glasses' },
        { spanish: 'Una bufanda', translation: 'A scarf' },
        { spanish: 'Una pajarita', translation: 'A bow tie' },
        { spanish: 'Una corbata', translation: 'A tie' },
        { spanish: 'Un bolso', translation: 'A handbag' },
        { spanish: 'Una riñonera', translation: 'A fanny pack' },
        { spanish: 'Un cinturón', translation: 'A belt' },
        { spanish: 'Una mochila', translation: 'A backpack' },
        { spanish: 'Unos guantes deportivos', translation: 'Sports gloves' },
        { spanish: 'Una diadema', translation: 'A headband' },
        { spanish: 'Un tocado', translation: 'A headdress' },
        { spanish: 'Un rosario', translation: 'A rosary' },
        { spanish: 'Unos aros', translation: 'Hoop earrings' },
        { spanish: 'Unos pendientes cortos', translation: 'Short earrings' },
        { spanish: 'Unos pendientes largos', translation: 'Long earrings' },
        { spanish: 'Un bastón', translation: 'A cane' },
        { spanish: 'Un abanico', translation: 'A fan' },
        { spanish: 'Una tobillera', translation: 'An anklet' },
        { spanish: 'Un tarjetero', translation: 'A card holder' },
        { spanish: 'Un monedero', translation: 'A coin purse' },
        { spanish: 'Una cartera', translation: 'A wallet' },
        { spanish: 'Unas alianzas de matrimonio', translation: 'Wedding rings' },
        { spanish: 'Un anillo de oro', translation: 'A gold ring' },
        { spanish: 'Un anillo de plata', translation: 'A silver ring' },
        { spanish: 'Un anillo decorativo', translation: 'A decorative ring' },
        { spanish: 'Un reloj digital', translation: 'A digital watch' },
        { spanish: 'Un reloj analógico', translation: 'An analog watch' },
        { spanish: 'Un reloj de pulsera', translation: 'A wristwatch' },
        { spanish: 'Una pulsera', translation: 'A bracelet' },
        { spanish: 'Una pulsera de perlas', translation: 'A pearl bracelet' },
        { spanish: 'Un brazalete', translation: 'A bangle' },
        { spanish: 'Un broche para cuello', translation: 'A collar brooch' },
        { spanish: 'Un collar largo', translation: 'A long necklace' },
        { spanish: 'Un collar corto', translation: 'A short necklace' },
        { spanish: 'Una gargantilla', translation: 'A choker' },
        { spanish: 'Una pashmina', translation: 'A pashmina' },
        { spanish: 'Un velo', translation: 'A veil' },
        { spanish: 'Una corona', translation: 'A crown' },
        { spanish: 'Una peineta', translation: 'A decorative comb' },
        { spanish: 'Un pasador para cabello', translation: 'A hair clip' },
        { spanish: 'Una boina', translation: 'A beret' },
        { spanish: 'Una sombrilla', translation: 'A parasol' }
    ]
};

// Función para actualizar las traducciones
function updateTranslations(language) {
    const translationCells = document.querySelectorAll('.translation-cell');
    const selectedTranslations = translations[language];
    
    translationCells.forEach((cell, index) => {
        if (selectedTranslations && selectedTranslations[index]) {
            cell.textContent = selectedTranslations[index].translation;
        }
    });
}

// Datos de los gentilicios - ELIMINANDO transcription
const alphabetData = [
    { letter: 'Una gorra', audio: 'gorra.mp3' },
    { letter: 'Un gorro', audio: 'gorro.mp3' },
    { letter: 'Un sombrero', audio: 'sombrero.mp3' },
    { letter: 'Un sombrero de baño', audio: 'sombrero de baño.mp3' },
    { letter: 'Un pañuelo', audio: 'pañuelo.mp3' },
    { letter: 'Una bandana', audio: 'bandana.mp3' },
    { letter: 'Unas gafas de sol', audio: 'gafas de sol.mp3' },
    { letter: 'Unas gafas', audio: 'gafas.mp3' },
    { letter: 'Una bufanda', audio: 'bufanda.mp3' },
    { letter: 'Una pajarita', audio: 'pajarita.mp3' },
    { letter: 'Una corbata', audio: 'corbata.mp3' },
    { letter: 'Un bolso', audio: 'bolso.mp3' },
    { letter: 'Una riñonera', audio: 'riñonera.mp3' },
    { letter: 'Un cinturón', audio: 'cinturon.mp3' },
    { letter: 'Una mochila', audio: 'mochila.mp3' },
    { letter: 'Unos guantes deportivos', audio: 'guantes deportivos.mp3' },
    { letter: 'Una diadema', audio: 'diadema.mp3' },
    { letter: 'Un tocado', audio: 'tocado.mp3' },
    { letter: 'Un rosario', audio: 'rosario.mp3' },
    { letter: 'Unos aros', audio: 'aros.mp3' },
    { letter: 'Unos pendientes cortos', audio: 'pendientes cortos.mp3' },
    { letter: 'Unos pendientes largos', audio: 'pendientes largos.mp3' },
    { letter: 'Un bastón', audio: 'baston.mp3' },
    { letter: 'Un abanico', audio: 'abanico.mp3' },
    { letter: 'Una tobillera', audio: 'tobillera.mp3' },
    { letter: 'Un tarjetero', audio: 'tarjetero.mp3' },
    { letter: 'Un monedero', audio: 'monedero.mp3' },
    { letter: 'Una cartera', audio: 'cartera.mp3' },
    { letter: 'Unas alianzas de matrimonio', audio: 'alianzas.mp3' },
    { letter: 'Un anillo de oro', audio: 'anillo de oro.mp3' },
    { letter: 'Un anillo de plata', audio: 'anillo de plata.mp3' },
    { letter: 'Un anillo decorativo', audio: 'anillo decorativo.mp3' },
    { letter: 'Un reloj digital', audio: 'reloj digital.mp3' },
    { letter: 'Un reloj analógico', audio: 'reloj analogico.mp3' },
    { letter: 'Un reloj de pulsera', audio: 'reloj de pulsera.mp3' },
    { letter: 'Una pulsera', audio: 'pulsera.mp3' },
    { letter: 'Una pulsera de perlas', audio: 'pulsera de perlas.mp3' },
    { letter: 'Un brazalete', audio: 'brazalete.mp3' },
    { letter: 'Un broche para cuello', audio: 'broche para cuello.mp3' },
    { letter: 'Un collar largo', audio: 'collar largo.mp3' },
    { letter: 'Un collar corto', audio: 'collar corto.mp3' },
    { letter: 'Una gargantilla', audio: 'gargantilla.mp3' },
    { letter: 'Una pashmina', audio: 'pashmina.mp3' },
    { letter: 'Un velo', audio: 'velo.mp3' },
    { letter: 'Una corona', audio: 'corona.mp3' },
    { letter: 'Una peineta', audio: 'peineta.mp3' },
    { letter: 'Un pasador para cabello', audio: 'pasador para cabello.mp3' },
    { letter: 'Una boina', audio: 'boina.mp3' },
    { letter: 'Una sombrilla', audio: 'sombrilla.mp3' }
];
        const baseUrl = 'https://fawzinoo.github.io/audios/';
        let playedCount = 0;
        let currentPlaying = null;

        // Variables globales (agregar esta nueva variable)
        let playedLetters = new Set(); // Para rastrear letras ya reproducidas individualmente

        // Añade o reemplaza estas variables globales:
        let isPlayingSequence = false;
        let isPausedSequence = false;
        let sequenceIndex = 0;

        let lastPlayedIndex = -1; // Para rastrear la última posición reproducida

        // Función para guardar progreso en localStorage
// Modificar la función saveProgress para incluir el estado de reproducción
function saveProgress() {
    const progressData = {
        playedLetters: Array.from(playedLetters),
        playedCount: playedCount,
        lastPlayedIndex: lastPlayedIndex,
        sequenceIndex: sequenceIndex,
        isPlayingSequence: isPlayingSequence,
        isPausedSequence: isPausedSequence,
        timestamp: Date.now()
    };
localStorage.setItem('accesoriosProgress', JSON.stringify(progressData));
}

// Función para cargar progreso desde localStorage
function loadProgress() {
const savedData = localStorage.getItem('accesoriosProgress');
    if (savedData) {
        const progressData = JSON.parse(savedData);
        
        // Restaurar datos
        playedLetters = new Set(progressData.playedLetters || []);
        playedCount = progressData.playedCount || 0;
        lastPlayedIndex = progressData.lastPlayedIndex || -1;
        sequenceIndex = progressData.sequenceIndex || 0;
        isPlayingSequence = progressData.isPlayingSequence || false;
        isPausedSequence = progressData.isPausedSequence || false;
        
        // Actualizar UI
        document.getElementById('played-count').textContent = playedCount;
        updateProgress();
        
        // Restaurar sombra dorada en la última posición
        if (lastPlayedIndex >= 0) {
            const rows = document.querySelectorAll('#alphabet-tbody tr');
            const targetRow = rows[lastPlayedIndex];
            if (targetRow) {
                targetRow.classList.add('playing-row');
                // Hacer scroll a la posición guardada
                scrollToPlayingRow(lastPlayedIndex);
            }
        }
        
        // Restaurar estado de los botones si estaba en reproducción
        if (isPlayingSequence || isPausedSequence) {
            const playAllBtn = document.getElementById('play-all-btn');
            const playAllIcon = playAllBtn.querySelector('i');
            const playAllText = playAllBtn.querySelector('span');
            
            if (isPausedSequence) {
                // Restaurar estado pausado
                playAllIcon.className = 'fas fa-play-circle';
                playAllText.textContent = ' Reanudar';
                playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
                playAllBtn.style.color = '#2d3748';
                enablePlayButtons();
            } else {
                // Marcar como pausado para que el usuario pueda continuar
                isPausedSequence = true;
                isPlayingSequence = false;
                playAllIcon.className = 'fas fa-play-circle';
                playAllText.textContent = ' Reanudar';
                playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
                playAllBtn.style.color = '#2d3748';
                enablePlayButtons();
            }
            
            // Mostrar botón detener
            const stopBtn = document.getElementById('stop-btn');
            stopBtn.style.display = 'flex';
            playAllBtn.style.borderRadius = '25px 0 0 25px';
        }
    }
}

// Función para limpiar progreso
function clearProgress() {
localStorage.removeItem('accesoriosProgress');
    lastPlayedIndex = -1;
    // Remover todas las sombras doradas
    const rows = document.querySelectorAll('#alphabet-tbody tr');
    rows.forEach(row => row.classList.remove('playing-row'));
}

// Generar la tabla
function generateTable() {
    const tbody = document.getElementById('alphabet-tbody');
    
    alphabetData.forEach((item, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td class="letter-cell">${item.letter}</td>
            <td class="translation-cell">${item.letter}</td>
            <td>
                <button class="play-button" onclick="playAudio(${index})">
                    <i class="fas fa-play"></i>
                    <span>Play</span>
                </button>
            </td>
        `;
        tbody.appendChild(row);
    });

    document.getElementById('total-letters').textContent = alphabetData.length;
}

// Actualizar contador solo para reproducciones individuales
function updatePlayedCount() {
    playedCount++;
    document.getElementById('played-count').textContent = playedCount;
    updateProgress();
}

      

        // Función para hacer scroll a la fila que se está reproduciendo
function scrollToPlayingRow(index) {
    const rows = document.querySelectorAll('#alphabet-tbody tr');
    const targetRow = rows[index];
    
    if (targetRow) {
        targetRow.scrollIntoView({
            behavior: 'smooth',
            block: 'center',
            inline: 'nearest'
        });
    }
}

// Reemplazar la función playAudio con esta versión corregida
function playAudio(index) {
    // Bloquear si está reproduciendo secuencia
    if (isPlayingSequence) {
        return;
    }
    
    const button = document.querySelectorAll('.play-button')[index];
    const icon = button.querySelector('i');
    const span = button.querySelector('span');
    const row = button.closest('tr');
    
    // Si el botón está actualmente reproduciendo, pausar
    if (button.classList.contains('playing')) {
        if (currentPlaying && !currentPlaying.paused) {
            currentPlaying.pause();
            currentPlaying.currentTime = 0;
        }
        resetButton(button);
        row.classList.remove('playing-row');
        lastPlayedIndex = -1; // Resetear la posición
        saveProgress(); // Guardar que no hay reproducción activa
        return;
    }
    
    // Hacer scroll a la fila
    scrollToPlayingRow(index);
    
    // Detener audio anterior si existe
    if (currentPlaying && !currentPlaying.paused) {
        currentPlaying.pause();
        currentPlaying.currentTime = 0;
        resetPreviousButton();
    }

    // Crear y reproducir nuevo audio
    const audio = new Audio(baseUrl + alphabetData[index].audio);
    currentPlaying = audio;

    // Cambiar estado del botón manteniendo el tamaño original
    button.classList.add('playing');
    icon.className = 'fas fa-stop';
    span.innerHTML = `
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
    `;

    // Agregar efecto dorado a la fila
    row.classList.add('playing-row');
    lastPlayedIndex = index; // Guardar la posición actual
    saveProgress(); // Guardar progreso inmediatamente

    // Reproducir audio
    audio.play().catch(error => {
        console.error('Error al reproducir audio:', error);
        resetButton(button);
        row.classList.remove('playing-row');
        lastPlayedIndex = -1;
        saveProgress();
    });

    // Cuando termine el audio (solo contar si es reproducción individual)
    audio.onended = () => {
        resetButton(button);
        row.classList.remove('playing-row');
        lastPlayedIndex = -1; // Resetear cuando termine
        // Solo contar si no se ha reproducido antes
        if (!playedLetters.has(index)) {
            playedLetters.add(index);
            playedCount = playedLetters.size;
            document.getElementById('played-count').textContent = playedCount;
            updateProgress();
        }
        // Guardar progreso después de reproducción individual
        saveProgress();
    };

    // Si hay error
    audio.onerror = () => {
        console.error('Error al cargar audio:', alphabetData[index].audio);
        resetButton(button);
        row.classList.remove('playing-row');
        lastPlayedIndex = -1;
        saveProgress();
    };
}
        // Resetear botón anterior
        function resetPreviousButton() {
            const playingButtons = document.querySelectorAll('.play-button.playing');
            playingButtons.forEach(button => resetButton(button));
        }

        // Resetear estado del botón
        function resetButton(button) {
            const icon = button.querySelector('i');
            const span = button.querySelector('span');
            const row = button.closest('tr');
            
            button.classList.remove('playing');
            icon.className = 'fas fa-play';
            span.textContent = 'Play';
            
            // Remover efecto dorado de la fila
            if (row) {
                row.classList.remove('playing-row');
            }
        }

        // Agregar progreso
        function updateProgress() {
            const percentage = Math.round((playedCount / alphabetData.length) * 100);
            const progressBar = document.getElementById('progress-bar');
            const progressPercentage = document.getElementById('progress-percentage');
            
            if (progressBar) {
                progressBar.style.width = percentage + '%';
            }
            if (progressPercentage) {
                progressPercentage.textContent = percentage;
            }
        }

        // Función para reproducir todas las letras en secuencia
        function playAll() {
            if (isPlayingSequence && !isPausedSequence) return; // Ya está reproduciendo

            const playAllBtn = document.getElementById('play-all-btn');
            const playAllIcon = playAllBtn.querySelector('i');
            const playAllText = playAllBtn.querySelector('span');

            // Quitar el efecto de parpadeo si existe
            playAllBtn.classList.remove('play-again-blink');

            // Restaura el fondo verde
            playAllBtn.style.background = 'linear-gradient(135deg, #48bb78, #38a169)';
            playAllBtn.style.color = 'white';

            // Verificar si es una nueva reproducción (después de "Reproducir de nuevo")
            const isNewReproduction = playAllText.textContent.includes('Reproducir de nuevo');

            if (isPausedSequence) {
                // Reanudar
                isPausedSequence = false;
                isPlayingSequence = true;
                playAllIcon.className = 'fas fa-pause'; // Icono de pausa
                playAllText.textContent = ' Pausar ';
                disablePlayButtons(); // Deshabilitar botones individuales
                playNextInSequence();
                return;
            }

            // Si es una nueva reproducción, restablecer el progreso
            if (isNewReproduction) {
                // Restablecer variables de progreso
                playedLetters.clear();
                playedCount = 0;
                
                // Actualizar la UI del progreso
                document.getElementById('played-count').textContent = playedCount;
                const progressBar = document.getElementById('progress-bar');
                const progressPercentage = document.getElementById('progress-percentage');
                
                if (progressBar) {
                    progressBar.style.width = '0%';
                }
                if (progressPercentage) {
                    progressPercentage.textContent = '0';
                }
            }

            // Iniciar desde el principio
            isPlayingSequence = true;
            isPausedSequence = false;
            sequenceIndex = 0;
            playAllIcon.className = 'fas fa-pause'; // Icono de pausa
            playAllText.textContent = ' Pausar ';
            disablePlayButtons(); // Deshabilitar botones individuales
            playNextInSequence();
        }

        function pauseAll() {
            isPausedSequence = true;
            isPlayingSequence = false;
            if (currentPlaying && !currentPlaying.paused) {
                currentPlaying.pause();
            }
            
            // Resetear el botón que está actualmente reproduciéndose PERO mantener la sombra
            const playingButtons = document.querySelectorAll('.play-button.playing');
            playingButtons.forEach(button => {
                resetButton(button);
                // Mantener la sombra dorada en la fila actual
                const row = button.closest('tr');
                if (row) {
                    row.classList.add('playing-row');
                    // Actualizar lastPlayedIndex
                    const buttonIndex = Array.from(document.querySelectorAll('.play-button')).indexOf(button);
                    lastPlayedIndex = buttonIndex;
                }
            });
            
            // Guardar progreso
            saveProgress();
            
            // Cambia el icono a "play"
            const playAllBtn = document.getElementById('play-all-btn');
            const playAllIcon = playAllBtn.querySelector('i');
            const playAllText = playAllBtn.querySelector('span');
            playAllIcon.className = 'fas fa-play-circle';
            playAllText.textContent = ' Reanudar';
            // Cambia el fondo a amarillo
            playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
            playAllBtn.style.color = '#2d3748';
            
            // Habilitar botones individuales cuando se pausa
            enablePlayButtons();
        }

        // Modificar la función playNextInSequence para guardar progreso inmediatamente
function playNextInSequence() {
    if (!isPlayingSequence || isPausedSequence || sequenceIndex >= alphabetData.length) {
        isPlayingSequence = false;
        return;
    }

    const button = document.querySelectorAll('.play-button')[sequenceIndex];
    const icon = button.querySelector('i');
    const span = button.querySelector('span');
    const row = button.closest('tr');

    // Remover sombra dorada anterior
    if (lastPlayedIndex >= 0) {
        const prevRow = document.querySelectorAll('#alphabet-tbody tr')[lastPlayedIndex];
        if (prevRow) {
            prevRow.classList.remove('playing-row');
        }
    }

    // Hacer scroll a la fila que se está reproduciendo
    scrollToPlayingRow(sequenceIndex);

    if (currentPlaying && !currentPlaying.paused) {
        currentPlaying.pause();
        currentPlaying.currentTime = 0;
        resetPreviousButton();
    }

    const audio = new Audio(baseUrl + alphabetData[sequenceIndex].audio);
    currentPlaying = audio;

    button.classList.add('playing');
    icon.className = 'fas fa-pause';
    span.innerHTML = `
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
    `;

    // Agregar efecto dorado a la fila
    row.classList.add('playing-row');
    lastPlayedIndex = sequenceIndex;
    
    // Guardar progreso inmediatamente al iniciar la reproducción
    saveProgress();

    audio.play().catch(error => {
        resetButton(button);
        continueSequence();
    });

    audio.onended = () => {
        resetButton(button);
        continueSequence();
    };

    audio.onerror = () => {
        resetButton(button);
        continueSequence();
    };

    function continueSequence() {
        // Marcar como reproducida si no lo estaba
        if (!playedLetters.has(sequenceIndex)) {
            playedLetters.add(sequenceIndex);
            playedCount = playedLetters.size;
            document.getElementById('played-count').textContent = playedCount;
            updateProgress();
        }
        
        // Guardar progreso después de cada reproducción
        saveProgress();
        
        sequenceIndex++;
        if (isPlayingSequence && !isPausedSequence && sequenceIndex < alphabetData.length) {
            setTimeout(playNextInSequence, 1000);
        } else {
            isPlayingSequence = false;
            // Limpiar progreso cuando termine completamente
            clearProgress();
            
            // Cambia el icono a "play" al terminar
            const playAllBtn = document.getElementById('play-all-btn');
            const playAllIcon = playAllBtn.querySelector('i');
            const playAllText = playAllBtn.querySelector('span');
            playAllIcon.className = 'fas fa-play-circle';
            playAllText.textContent = ' Reproducir de nuevo';
            
            // Agregar efecto de parpadeo
            playAllBtn.classList.add('play-again-blink');
            
            // Ocultar botón detener al terminar
            const stopBtn = document.getElementById('stop-btn');
            stopBtn.style.display = 'none';
            playAllBtn.style.borderRadius = '25px';
            
            // Habilitar botones individuales al terminar
            enablePlayButtons();
            
            // Reproducir sonido de finalización
            playCompletionSound();
            
            // Hacer scroll hacia arriba al terminar
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
    }
}

        // Nueva función para reproducir sonido de finalización
        function playCompletionSound() {
            // Crear un contexto de audio
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Función para crear un tono
            function createTone(frequency, duration, delay = 0) {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = 'sine';
                
                // Configurar el volumen con fade in/out
                gainNode.gain.setValueAtTime(0, audioContext.currentTime + delay);
                gainNode.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + delay + 0.1);
                gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + delay + duration);
                
                oscillator.start(audioContext.currentTime + delay);
                oscillator.stop(audioContext.currentTime + delay + duration);
            }
            
            // Reproducir secuencia de tonos (Do - Mi - Sol - Do)
            createTone(523.25, 0.3, 0);    // Do
            createTone(659.25, 0.3, 0.2);  // Mi
            createTone(783.99, 0.4, 0.4);  // Sol
            createTone(1046.5, 0.6, 0.6);  // Do octava superior
        }

        // Función para detener secuencia
        function stopAll() {
            isPlayingSequence = false;
            sequenceIndex = 0;
            
            if (currentPlaying && !currentPlaying.paused) {
                currentPlaying.pause();
                currentPlaying.currentTime = 0;
                resetPreviousButton();
            }
        }

        // Agregar botón para reproducir todo
        function addPlayAllButton() {
            const header = document.querySelector('.header');
            const buttonContainer = document.createElement('div');
            buttonContainer.style.cssText = `
                margin-top: 1px; /* Reducir de 15px a 5px */
                margin-bottom: -10px; /* Agregar margen inferior mínimo */
                display: flex;
                justify-content: center;
                align-items: center;
            `;
            
            // Contenedor principal
            const buttonGroup = document.createElement('div');
            buttonGroup.style.cssText = `
                display: inline-flex;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                backdrop-filter: blur(10px);
            `;
            
            const playAllBtn = document.createElement('button');
            playAllBtn.innerHTML = '<i class="fas fa-play-circle"></i><span> Reproducir Todo</span>';
            playAllBtn.id = 'play-all-btn';
            playAllBtn.style.cssText = `
                background: linear-gradient(135deg, #48bb78, #38a169);
                color: white;
                border: none;
                border-radius: 25px; /* Inicialmente completamente redondeado */
                padding: 14px 24px;
                font-size: 0.95rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                outline: none;
            `;
            
            const stopBtn = document.createElement('button');
            stopBtn.innerHTML = '<i class="fas fa-stop-circle"></i><span> Detener</span>';
            stopBtn.id = 'stop-btn';
            stopBtn.style.cssText = `
                background: linear-gradient(135deg, #e53e3e, #c53030);
                color: white;
                border: none;
                border-radius: 0 25px 25px 0;
                padding: 14px 24px;
                font-size: 0.95rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                display: none; /* Inicialmente oculto */
                align-items: center;
                justify-content: center;
                gap: 8px;
                outline: none;
                margin-left: -1px;
            `;
            
            // Función para mostrar/ocultar botón detener
            function toggleStopButton(show) {
                if (show) {
                    stopBtn.style.display = 'flex';
                    playAllBtn.style.borderRadius = '25px 0 0 25px'; // Cambiar a medio redondeado
                } else {
                    stopBtn.style.display = 'none';
                    playAllBtn.style.borderRadius = '25px'; // Volver a completamente redondeado
                }
            }
            
            // Efectos hover
            playAllBtn.addEventListener('mouseenter', () => {
                if (isPausedSequence) {
                    playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
                    playAllBtn.style.color = '#2d3748';
                } else {
                    playAllBtn.style.background = 'linear-gradient(135deg, #38a169, #2f855a)';
                    playAllBtn.style.color = 'white';
                }
                playAllBtn.style.transform = 'translateY(-1px)';
            });
            playAllBtn.addEventListener('mouseleave', () => {
                if (isPausedSequence) {
                    playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
                    playAllBtn.style.color = '#2d3748';
                } else {
                    playAllBtn.style.background = 'linear-gradient(135deg, #48bb78, #38a169)';
                    playAllBtn.style.color = 'white';
                }
                playAllBtn.style.transform = 'translateY(0)';
            });
            
            stopBtn.addEventListener('mouseenter', () => {
                stopBtn.style.background = 'linear-gradient(135deg, #c53030, #9c2626)';
                stopBtn.style.transform = 'translateY(-1px)';
            });
            stopBtn.addEventListener('mouseleave', () => {
                stopBtn.style.background = 'linear-gradient(135deg, #e53e3e, #c53030)';
                stopBtn.style.transform = 'translateY(0)';
            });
            
            // Alternar entre play y pause
            playAllBtn.onclick = function() {
                if (isPlayingSequence && !isPausedSequence) {
                    pauseAll();
                } else {
                    playAll();
                    toggleStopButton(true); // Mostrar botón detener al empezar
                }
            };
            
            stopBtn.onclick = function() {
                isPlayingSequence = false;
                isPausedSequence = false;
                sequenceIndex = 0;
                if (currentPlaying && !currentPlaying.paused) {
                    currentPlaying.pause();
                    currentPlaying.currentTime = 0;
                    resetPreviousButton(); // Resetear el botón que está reproduciéndose
                }
                
                // Limpiar progreso guardado
                clearProgress();
                
                // Restablecer variables de progreso
                playedLetters.clear();
                playedCount = 0;
                
                // Actualizar la UI del progreso
                document.getElementById('played-count').textContent = playedCount;
                const progressBar = document.getElementById('progress-bar');
                const progressPercentage = document.getElementById('progress-percentage');
                
                if (progressBar) {
                    progressBar.style.width = '0%';
                }
                if (progressPercentage) {
                    progressPercentage.textContent = '0';
                }
                
                // Cambia el icono a "play"
                const playAllIcon = playAllBtn.querySelector('i');
                const playAllText = playAllBtn.querySelector('span');
                playAllIcon.className = 'fas fa-play-circle';
                playAllText.textContent = ' Reproducir Todo';
                
                // Quitar el efecto de parpadeo si existe
                playAllBtn.classList.remove('play-again-blink');
                
                // Ocultar botón detener
                toggleStopButton(false);
                
                // Habilitar botones individuales al detener
                enablePlayButtons();
            };

    buttonGroup.appendChild(playAllBtn);
    buttonGroup.appendChild(stopBtn);
    buttonContainer.appendChild(buttonGroup);
    header.appendChild(buttonContainer);
}
        // Inicializar cuando se carga la página
document.addEventListener('DOMContentLoaded', () => {
    generateTable();
    addPlayAllButton();
    loadProgress();
    
    // Agregar event listener para el selector de idioma
    const languageSelect = document.getElementById('language-select');
    languageSelect.addEventListener('change', (e) => {
        const selectedLanguage = e.target.value;
        updateTranslations(selectedLanguage);
    });
    
    // Establecer idioma inicial (inglés por defecto)
    updateTranslations('en');
});

        // Detener audio al salir de la página
        window.addEventListener('beforeunload', () => {
            if (currentPlaying && !currentPlaying.paused) {
                currentPlaying.pause();
            }
            // Asegurar que se guarde el progreso antes de salir
            saveProgress();
        });

        // También guardar progreso cuando se oculta la página (cambio de pestaña)
document.addEventListener('visibilitychange', () => {
    if (document.hidden) {
        saveProgress();
    }
});

// Función para deshabilitar botones durante reproducción total
function disablePlayButtons() {
    const playButtons = document.querySelectorAll('.play-button');
    playButtons.forEach(button => {
        button.style.cursor = 'not-allowed';
        button.style.pointerEvents = 'none';
        // Mantener el color original pero con un filtro muy sutil
        button.style.filter = 'brightness(0.95)';
        // Agregar una clase para identificar que están deshabilitados
        button.classList.add('disabled-sequence');
    });
}

// Función para habilitar botones después de reproducción total
function enablePlayButtons() {
    const playButtons = document.querySelectorAll('.play-button');
    playButtons.forEach(button => {
        button.style.cursor = 'pointer';
        button.style.pointerEvents = 'auto';
        button.style.filter = 'none';
        button.classList.remove('disabled-sequence');
    });
}
    </script>
</body>
</html>
