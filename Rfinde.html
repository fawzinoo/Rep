<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fin de semana</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px; /* Reducido de 2px a 10px */
            overflow: hidden;
        }

        /* Modificar el contenedor principal */
.container {
    max-width: 1000px;
    margin: 0 auto;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 15px;
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    backdrop-filter: blur(10px);
    height: 100vh; /* Altura completa de la ventana */
    display: flex;
    flex-direction: column;
}

/* Mantener la cabecera fija */
.header {
    background: linear-gradient(135deg, #4a5568, #2d3748);
    color: white;
    text-align: center;
    padding: 15px 20px; /* Reducir padding vertical de 20px a 15px */
    position: sticky;
    top: 0;
    z-index: 1000;
    flex-shrink: 0; /* No se encoge */
}

/* Reducir espacio entre el título y la sección de estadísticas */
.header h1 {
    margin-bottom: 10px; /* Reducir de 20px a 10px */
    font-size: 2.5rem;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

/* Reducir espacio entre estadísticas y botones */
.stats-container {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 5px; /* Reducir de 20px a 5px */
    backdrop-filter: blur(5px);
}

/* Hacer el contenedor de la tabla scrolleable */
.table-container {
    flex: 1; /* Ocupa el resto del espacio disponible */
    overflow-y: auto; /* Scroll vertical */
    padding: 1px 20px 20px 20px; /* Reducir padding-top a 1px */
    background: white;
}

/* Mejorar el scroll en la tabla */
.table-container::-webkit-scrollbar {
    width: 8px;
}

.table-container::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

.table-container::-webkit-scrollbar-thumb {
    background: greenyellow;
    border-radius: 10px;
}

.table-container::-webkit-scrollbar-thumb:hover {
    background: rgb(60, 97, 4);
}

/* Asegurar que la tabla ocupe todo el ancho disponible */
.alphabet-table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px; /* Espacio al final */
}

        .header h1 {
            font-size: 2.2rem; /* Reducido de 2.5rem a 2.2rem */
            margin-bottom: 8px; /* Reducido de 10px a 8px */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            color: #63b3ed; /* Color azul claro */
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .table-container {
            padding: 20px; /* Reducido de 30px a 20px */
            overflow-x: auto;
        }

        .alphabet-table thead {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .alphabet-table th {
            padding: 15px 10px;
            text-align: center;
            font-weight: 600;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-right: 1px solid rgba(255, 255, 255, 0.3);
        }

        .alphabet-table th:last-child {
            border-right: none; /* Quitar línea de la última columna */
        }

        .alphabet-table tbody tr {
            opacity: 0;
            animation: fadeInUp 0.5s ease forwards;
            transition: all 0.3s ease;
            border-bottom: 1px solid #e2e8f0;
        }

        .alphabet-table tbody tr:hover {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .alphabet-table tbody tr:nth-child(1) { animation-delay: 0.1s; }
        .alphabet-table tbody tr:nth-child(2) { animation-delay: 0.2s; }
        .alphabet-table tbody tr:nth-child(3) { animation-delay: 0.3s; }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .alphabet-table td {
            padding: 12px 10px;
            text-align: center;
            vertical-align: middle;
            border-right: 1px solid rgba(102, 126, 234, 0.2); /* Color del gradiente */
        }

        .alphabet-table td:last-child {
            border-right: none; /* Quitar línea de la última columna */
        }

        .letter-cell {
            font-size: 1.1rem; /* Reducido de 1.6rem a 1.1rem */
            font-weight: bold;
            color: #2d3748;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .transcription-cell {
            font-size: 1.1rem; /* Reducido de 1.3rem a 1.1rem */
            color: #4a5568;
            font-style: italic;
            font-weight: 500;
        }

        .play-button {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 8px 16px; /* Tamaño original */
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(72, 187, 120, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            margin: 0 auto;
        }

        .play-button:hover {
            background: linear-gradient(135deg, #38a169, #2f855a);
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(72, 187, 120, 0.4);
        }

        /* Modificar el estilo del botón cuando está reproduciendo */
.play-button.playing {
    background: linear-gradient(135deg, #919105, #efe973); /* Color rojo */
    color: white;
    border: none;
    border-radius: 50px;
    padding: 4px 10px; /* Mismo tamaño que el original */
    cursor: pointer;
    font-size: 0.8rem;
    transition: all 0.3s ease;
    box-shadow: 0 3px 10px rgba(245, 101, 101, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    margin: 0 auto;
}
/* media querires para Pc para .play-button.playing mayor que padding: 4px 10px; */
@media (min-width: 1024px) {
    .play-button.playing {
        padding: 7px 18px;
    }
}
.play-button.playing:hover {
    background: greenyellow;
    transform: translateY(-1px);
    box-shadow: 0 4px 15px rgba(245, 101, 101, 0.4);
}

/* Eliminar las ondas de audio y mantener solo el texto */
.play-button.playing span {
    display: block;
    font-size: 0.9rem;
}

/* Mantener las ondas de audio pequeñas para que no cambien el tamaño del botón */
.audio-wave {
    display: inline-block;
    width: 3px;
    height: 12px;
    background: white;
    margin: 0 1px;
    border-radius: 1px;
    animation: wave 1s infinite ease-in-out;
}

.audio-wave:nth-child(1) { animation-delay: 0s; }
.audio-wave:nth-child(2) { animation-delay: 0.1s; }
.audio-wave:nth-child(3) { animation-delay: 0.2s; }
.audio-wave:nth-child(4) { animation-delay: 0.3s; }

@keyframes wave {
    0%, 40%, 100% { transform: scaleY(0.4); }
    20% { transform: scaleY(1); }
}

/* Mantener el contenido centrado cuando está reproduciendo */
.play-button.playing span {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1px;
}

        /* Nueva sección de progreso elegante */
        .progress-section {
            margin-top: -15px; /* Usar margen negativo si es necesario */
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: -1px;
        }

        .progress-stats {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .stat-divider {
            width: 1px;
            height: 40px;
            background: rgba(255, 255, 255, 0.3);
        }

        .progress-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 5px; /* Reducir espacio después de las estadísticas */
        }

        .progress-track {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169, #2f855a);
            border-radius: 10px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(72, 187, 120, 0.4);
            position: relative;
            overflow: hidden;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .progress-text {
            text-align: center;
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Responsive para la sección de progreso */
        @media (max-width: 768px) {
            .progress-section {
                padding: 15px;
                margin-top: 15px;
            }
            
            .progress-stats {
                gap: 15px;
            }
            
            .stat-value {
                font-size: 1.5rem;
            }
            
            .stat-label {
                font-size: 0.8rem;
            }
            
            .stat-divider {
                height: 30px;
            }
        }

        @media (max-width: 480px) {
            .progress-section {
                padding: 12px;
            }
            
            .progress-stats {
                gap: 10px;
            }
            
            .stat-value {
                font-size: 1.3rem;
            }
            
            .stat-label {
                font-size: 0.75rem;
            }
            
            .progress-text {
                font-size: 0.8rem;
            }
        }

        /* Botones del header más compactos */
        .header button {
            padding: 8px 16px !important; /* Reducido */
            font-size: 0.9rem !important; /* Reducido */
            margin-top: 10px !important; /* Reducido de 15px a 10px */
        }

        /* Control específico de márgenes en la cabecera */
.header * {
    margin-top: 0;
}

.header h1:first-child {
    margin-top: 0;
}

/* Reducir espacios en la sección de estadísticas */
.stats-container .stats-grid {
    margin-bottom: 10px; /* Reducir espacio antes de la barra de progreso */
}

.progress-container {
    margin-top: 5px; /* Reducir espacio después de las estadísticas */
}

/* Ajustar el contenedor de botones */
.header .button-container {
    margin-top: 1px; /* Reducir a 1px */
    margin-bottom: 1px; /* Agregar esta línea para reducir el espacio inferior */
}

/* Responsive mejorado para espacios más pequeños */
        @media (max-width: 768px) {
            body {
                padding: 5px;
            }
            
            .container {
                margin: 5px;
                border-radius: 10px;
            }

            .header {
                padding: 15px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .table-container {
                padding: 10px;
            }

            .alphabet-table th,
            .alphabet-table td {
                padding: 8px 6px;
                border-right: 1px solid rgba(255, 255, 255, 0.2); /* Líneas más sutiles en móvil */
            }
            
            .alphabet-table td {
                border-right: 1px solid #f0f0f0;
            }
            
            .alphabet-table th:last-child,
            .alphabet-table td:last-child {
                border-right: none;
            }

            .letter-cell {
                font-size: 1.0rem; /* Reducido de 1.8rem a 1.0rem */
            }

            .transcription-cell {
                font-size: 1rem;
            }

            .play-button {
                padding: 6px 12px;
                font-size: 0.8rem;
                min-width: 60px;
            }
            
            .stats {
                padding: 10px;
                font-size: 0.9rem;
            }

            /* Botones responsivos */
            #play-all-btn, #stop-btn {
                padding: 12px 18px !important;
                font-size: 0.85rem !important;
            }
            
            #play-all-btn span, #stop-btn span {
                display: inline !important;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.6rem;
            }
            
            .header p {
                font-size: 0.9rem;
            }
            
            .alphabet-table th {
                font-size: 0.8rem;
                padding: 10px 5px;
            }
            
            .letter-cell {
                font-size: 0.9rem; /* Reducido de 1.6rem a 0.9rem */
            }
            
            .transcription-cell {
                font-size: 0.9rem;
            }
            
            .play-button {
                min-width: 55px;
                padding: 5px 10px;
                font-size: 0.75rem;
            }
            
            /* Ocultar texto en botones en móviles muy pequeños */
            #play-all-btn span:not(.fas), #stop-btn span:not(.fas) {
                display: none; /* Ocultar texto en móviles muy pequeños */
            }
            
            #play-all-btn, #stop-btn {
                min-width: 50px !important;
                padding: 12px !important;
            }
        }

        @media (max-width: 360px) {
            #play-all-btn, #stop-btn {
                padding: 10px 12px !important;
                font-size: 1.1rem !important;
            }
        }

        /* Audio visualization */
        .audio-wave {
            display: inline-block;
            width: 4px;
            height: 20px;
            background: #48bb78;
            margin: 0 1px;
            border-radius: 2px;
            animation: wave 1s infinite ease-in-out;
        }

        .audio-wave:nth-child(2) { animation-delay: 0.1s; }
        .audio-wave:nth-child(3) { animation-delay: 0.2s; }
        .audio-wave:nth-child(4) { animation-delay: 0.3s; }

        @keyframes wave {
            0%, 40%, 100% { transform: scaleY(0.4); }
            20% { transform: scaleY(1); }
        }

        /* Efecto de sombra dorada para la fila activa - ajustada para estar dentro de la fila */
.alphabet-table tbody tr.playing-row {
    position: relative;
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.08), rgba(255, 223, 0, 0.04));
    border-left: 4px solid rgba(255, 215, 0, 0.8);
    border-right: 4px solid rgba(255, 215, 0, 0.8);
    border-top: 1px solid rgba(255, 215, 0, 0.3);
    border-bottom: 1px solid rgba(255, 215, 0, 0.3);
    box-shadow: 
        0 0 8px rgba(255, 215, 0, 0.2) inset,
        0 1px 2px rgba(255, 215, 0, 0.1);
    transition: all 0.3s ease;
    margin: 1px 0;
}

.alphabet-table tbody tr.playing-row:hover {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.12), rgba(255, 223, 0, 0.06));
    box-shadow: 
        0 0 12px rgba(255, 215, 0, 0.3) inset,
        0 2px 4px rgba(255, 215, 0, 0.15);
}

.language-selector {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    padding: 8px 12px;
    color: white;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    outline: none;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
}

.language-selector:hover {
    background: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.5);
}

.language-selector:focus {
    background: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.7);
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2);
}

.language-selector option {
    background: #4a5568;
    color: white;
    padding: 8px;
}

/* Responsive para el selector */
@media (max-width: 768px) {
    .language-selector {
        font-size: 0.8rem;
        padding: 6px 10px;
    }
}

@media (max-width: 480px) {
    .language-selector {
        font-size: 0.75rem;
        padding: 5px 8px;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-sun"></i> Fin de semana</h1>
    
            
            <!-- Los botones se agregarán aquí por JavaScript -->
            
            <!-- Nueva sección de progreso elegante -->
            <div class="progress-section">
                <div class="progress-stats">
                   <div class="stat-item">
<span class="stat-label">Total</span>
<span class="stat-value" id="total-letters">84</span>
</div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <span class="stat-label">Reproducidas</span>
                        <span class="stat-value" id="played-count">0</span>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <span class="stat-label">Idioma</span>
<select id="language-select" class="language-selector">
    <option value="en">Inglés</option>
    <option value="ar">Árabe</option>
    <option value="fr">Francés</option>
</select>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-track">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                    <div class="progress-text">
                        <span id="progress-percentage">0</span>% completado
                    </div>
                </div>
            </div>
        </div>

        <div class="table-container">
            <table class="alphabet-table">
    <thead>
        <tr>
            <th>Lugar de trabajo</th>
            <th><i class="fas fa-comment-dots"></i> Traducción</th>
            <th><i class="fas fa-volume-up"></i> Voz</th>
        </tr>
    </thead>
    <tbody id="alphabet-tbody">
        <!-- Las filas se generarán con JavaScript -->
    </tbody>
</table>
        </div>

        
    </div>

    <script>

// Actualizar las traducciones para gentilicios
const translations = {
    ar: [
        { spanish: 'Escuchar música', translation: 'الاستماع إلى الموسيقى' },
        { spanish: 'Escuchar la radio', translation: 'الاستماع إلى الراديو' },
        { spanish: 'Escuchar un podcast', translation: 'الاستماع إلى البودكاست' },
        { spanish: 'Escuchar las noticias', translation: 'الاستماع إلى الأخبار' },
        { spanish: 'Escuchar un cuento', translation: 'الاستماع إلى قصة' },
        { spanish: 'Ir a conciertos', translation: 'الذهاب إلى الحفلات' },
        { spanish: 'Ir a un museo', translation: 'الذهاب إلى المتحف' },
        { spanish: 'Ir a la playa', translation: 'الذهاب إلى الشاطئ' },
        { spanish: 'Ir al cine', translation: 'الذهاب إلى السينما' },
        { spanish: 'Ir al teatro', translation: 'الذهاب إلى المسرح' },
        { spanish: 'Ir de compras', translation: 'الذهاب للتسوق' },
        { spanish: 'Ir a la montaña', translation: 'الذهاب إلى الجبل' },
        { spanish: 'Ir a la biblioteca', translation: 'الذهاب إلى المكتبة' },
        { spanish: 'Ir al parque', translation: 'الذهاب إلى الحديقة' },
        { spanish: 'Ir a la feria', translation: 'الذهاب إلى المعرض' },
        { spanish: 'Ir a una exposición de coches', translation: 'الذهاب إلى معرض سيارات' },
        { spanish: 'Ir a la piscina', translation: 'الذهاب إلى المسبح' },
        { spanish: 'Ir al campo', translation: 'الذهاب إلى الريف' },
        { spanish: 'Ir al bosque', translation: 'الذهاب إلى الغابة' },
        { spanish: 'Ir al gimnasio', translation: 'الذهاب إلى الجيم' },
        { spanish: 'Salir a cenar', translation: 'الخروج للعشاء' },
        { spanish: 'Salir a bailar', translation: 'الخروج للرقص' },
        { spanish: 'Salir de noche', translation: 'الخروج ليلاً' },
        { spanish: 'Salir con amigos', translation: 'الخروج مع الأصدقاء' },
        { spanish: 'Salir a caminar', translation: 'الخروج للمشي' },
        { spanish: 'Salir de paseo', translation: 'الخروج للنزهة' },
        { spanish: 'Salir de casa', translation: 'الخروج من المنزل' },
        { spanish: 'Salir del trabajo', translation: 'الخروج من العمل' },
        { spanish: 'Hacer un curso de teatro', translation: 'أخذ دورة مسرح' },
        { spanish: 'Hacer un intercambio con un nativo', translation: 'التبادل مع ناطق أصلي' },
        { spanish: 'Hacer ejercicios de gramática', translation: 'القيام بتمارين القواعد' },
        { spanish: 'Hacer fotos', translation: 'التقاط الصور' },
        { spanish: 'Hacer deporte', translation: 'ممارسة الرياضة' },
        { spanish: 'Hacer limpieza', translation: 'القيام بالتنظيف' },
        { spanish: 'Hacer la compra', translation: 'التسوق' },
        { spanish: 'Hacer una tarta', translation: 'صنع كعكة' },
        { spanish: 'Hacer la siesta', translation: 'أخذ قيلولة' },
        { spanish: 'Leer el periódico', translation: 'قراءة الجريدة' },
        { spanish: 'Leer una revista', translation: 'قراءة مجلة' },
        { spanish: 'Leer un libro', translation: 'قراءة كتاب' },
        { spanish: 'Leer un e-mail', translation: 'قراءة إيميل' },
        { spanish: 'Leer una novela', translation: 'قراءة رواية' },
        { spanish: 'Leer un menú', translation: 'قراءة قائمة الطعام' },
        { spanish: 'Escribir un mensaje', translation: 'كتابة رسالة' },
        { spanish: 'Escribir un diario', translation: 'كتابة يوميات' },
        { spanish: 'Escribir un correo electrónico', translation: 'كتابة إيميل' },
        { spanish: 'Escribir una carta', translation: 'كتابة خطاب' },
        { spanish: 'Escribir una nota', translation: 'كتابة مذكرة' },
        { spanish: 'Hablar español', translation: 'التحدث بالإسبانية' },
        { spanish: 'Hablar con la familia', translation: 'التحدث مع العائلة' },
        { spanish: 'Hablar por teléfono', translation: 'التحدث بالهاتف' },
        { spanish: 'Visitar páginas web', translation: 'زيارة مواقع الإنترنت' },
        { spanish: 'Visitar lugares históricos', translation: 'زيارة أماكن تاريخية' },
        { spanish: 'Visitar a mi abuela', translation: 'زيارة جدتي' },
        { spanish: 'Visitar los monumentos', translation: 'زيارة المعالم' },
        { spanish: 'Visitar el casco antiguo', translation: 'زيارة البلدة القديمة' },
        { spanish: 'Practicar la pronunciación', translation: 'ممارسة النطق' },
        { spanish: 'Practicar español', translation: 'ممارسة الإسبانية' },
        { spanish: 'Practicar yoga', translation: 'ممارسة اليوغا' },
        { spanish: 'Practicar el senderismo', translation: 'ممارسة المشي' },
        { spanish: 'Practicar la equitación', translation: 'ممارسة الفروسية' },
        { spanish: 'Practicar la natación', translation: 'ممارسة السباحة' },
        { spanish: 'Jugar a videojuegos', translation: 'لعب ألعاب الفيديو' },
        { spanish: 'Jugar al fútbol', translation: 'لعب كرة القدم' },
        { spanish: 'Jugar al tenis', translation: 'لعب التنس' },
        { spanish: 'Jugar a las cartas', translation: 'لعب الورق' },
        { spanish: 'Jugar a los dados', translation: 'لعب النرد' },
        { spanish: 'Jugar al ajedrez', translation: 'لعب الشطرنج' },
        { spanish: 'Jugar con rompecabezas', translation: 'لعب الألغاز' },
        { spanish: 'Aprender español', translation: 'تعلم الإسبانية' },
        { spanish: 'Aprender a bailar', translation: 'تعلم الرقص' },
        { spanish: 'Aprender a tocar la guitarra', translation: 'تعلم العزف على الغيتار' },
        { spanish: 'Aprender a conducir', translation: 'تعلم القيادة' },
        { spanish: 'Ver una película', translation: 'مشاهدة فيلم' },
        { spanish: 'Ver la televisión', translation: 'مشاهدة التلفاز' },
        { spanish: 'Ver un partido de fútbol', translation: 'مشاهدة مباراة كرة قدم' },
        { spanish: 'Ver las fotos', translation: 'مشاهدة الصور' },
        { spanish: 'Ver los paisajes', translation: 'مشاهدة المناظر الطبيعية' },
        { spanish: 'Ver las cataratas', translation: 'مشاهدة الشلالات' },
        { spanish: 'Cocinar un plato', translation: 'طبخ طبق' },
        { spanish: 'Cocinar galletas', translation: 'طبخ كعك' },
        { spanish: 'Cocinar una pizza', translation: 'طبخ بيتزا' },
        { spanish: 'Cocinar una tortilla', translation: 'طبخ تورتيلا' },
        { spanish: 'Cocinar con mi madre', translation: 'الطبخ مع أمي' }
    ],
    fr: [
        { spanish: 'Escuchar música', translation: 'Écouter de la musique' },
        { spanish: 'Escuchar la radio', translation: 'Écouter la radio' },
        { spanish: 'Escuchar un podcast', translation: 'Écouter un podcast' },
        { spanish: 'Escuchar las noticias', translation: 'Écouter les nouvelles' },
        { spanish: 'Escuchar un cuento', translation: 'Écouter un conte' },
        { spanish: 'Ir a conciertos', translation: 'Aller aux concerts' },
        { spanish: 'Ir a un museo', translation: 'Aller au musée' },
        { spanish: 'Ir a la playa', translation: 'Aller à la plage' },
        { spanish: 'Ir al cine', translation: 'Aller au cinéma' },
        { spanish: 'Ir al teatro', translation: 'Aller au théâtre' },
        { spanish: 'Ir de compras', translation: 'Faire du shopping' },
        { spanish: 'Ir a la montaña', translation: 'Aller à la montagne' },
        { spanish: 'Ir a la biblioteca', translation: 'Aller à la bibliothèque' },
        { spanish: 'Ir al parque', translation: 'Aller au parc' },
        { spanish: 'Ir a la feria', translation: 'Aller à la foire' },
        { spanish: 'Ir a una exposición de coches', translation: 'Aller à un salon automobile' },
        { spanish: 'Ir a la piscina', translation: 'Aller à la piscine' },
        { spanish: 'Ir al campo', translation: 'Aller à la campagne' },
        { spanish: 'Ir al bosque', translation: 'Aller en forêt' },
        { spanish: 'Ir al gimnasio', translation: 'Aller au gym' },
        { spanish: 'Salir a cenar', translation: 'Sortir dîner' },
        { spanish: 'Salir a bailar', translation: 'Sortir danser' },
        { spanish: 'Salir de noche', translation: 'Sortir le soir' },
        { spanish: 'Salir con amigos', translation: 'Sortir avec des amis' },
        { spanish: 'Salir a caminar', translation: 'Sortir marcher' },
        { spanish: 'Salir de paseo', translation: 'Sortir se promener' },
        { spanish: 'Salir de casa', translation: 'Sortir de la maison' },
        { spanish: 'Salir del trabajo', translation: 'Sortir du travail' },
        { spanish: 'Hacer un curso de teatro', translation: 'Faire un cours de théâtre' },
        { spanish: 'Hacer un intercambio con un nativo', translation: 'Faire un échange avec un natif' },
        { spanish: 'Hacer ejercicios de gramática', translation: 'Faire des exercices de grammaire' },
        { spanish: 'Hacer fotos', translation: 'Prendre des photos' },
        { spanish: 'Hacer deporte', translation: 'Faire du sport' },
        { spanish: 'Hacer limpieza', translation: 'Faire le ménage' },
        { spanish: 'Hacer la compra', translation: 'Faire les courses' },
        { spanish: 'Hacer una tarta', translation: 'Faire un gâteau' },
        { spanish: 'Hacer la siesta', translation: 'Faire la sieste' },
        { spanish: 'Leer el periódico', translation: 'Lire le journal' },
        { spanish: 'Leer una revista', translation: 'Lire un magazine' },
        { spanish: 'Leer un libro', translation: 'Lire un livre' },
        { spanish: 'Leer un e-mail', translation: 'Lire un e-mail' },
        { spanish: 'Leer una novela', translation: 'Lire un roman' },
        { spanish: 'Leer un menú', translation: 'Lire un menu' },
        { spanish: 'Escribir un mensaje', translation: 'Écrire un message' },
        { spanish: 'Escribir un diario', translation: 'Écrire un journal' },
        { spanish: 'Escribir un correo electrónico', translation: 'Écrire un e-mail' },
        { spanish: 'Escribir una carta', translation: 'Écrire une lettre' },
        { spanish: 'Escribir una nota', translation: 'Écrire une note' },
        { spanish: 'Hablar español', translation: 'Parler espagnol' },
        { spanish: 'Hablar con la familia', translation: 'Parler avec la famille' },
        { spanish: 'Hablar por teléfono', translation: 'Parler au téléphone' },
        { spanish: 'Visitar páginas web', translation: 'Visiter des sites web' },
        { spanish: 'Visitar lugares históricos', translation: 'Visiter des lieux historiques' },
        { spanish: 'Visitar a mi abuela', translation: 'Visiter ma grand-mère' },
        { spanish: 'Visitar los monumentos', translation: 'Visiter les monuments' },
        { spanish: 'Visitar el casco antiguo', translation: 'Visiter la vieille ville' },
        { spanish: 'Practicar la pronunciación', translation: 'Pratiquer la prononciation' },
        { spanish: 'Practicar español', translation: 'Pratiquer l\'espagnol' },
        { spanish: 'Practicar yoga', translation: 'Pratiquer le yoga' },
        { spanish: 'Practicar el senderismo', translation: 'Pratiquer la randonnée' },
        { spanish: 'Practicar la equitación', translation: 'Pratiquer l\'équitation' },
        { spanish: 'Practicar la natación', translation: 'Pratiquer la natation' },
        { spanish: 'Jugar a videojuegos', translation: 'Jouer aux jeux vidéo' },
        { spanish: 'Jugar al fútbol', translation: 'Jouer au football' },
        { spanish: 'Jugar al tenis', translation: 'Jouer au tennis' },
        { spanish: 'Jugar a las cartas', translation: 'Jouer aux cartes' },
        { spanish: 'Jugar a los dados', translation: 'Jouer aux dés' },
        { spanish: 'Jugar al ajedrez', translation: 'Jouer aux échecs' },
        { spanish: 'Jugar con rompecabezas', translation: 'Jouer avec des puzzles' },
        { spanish: 'Aprender español', translation: 'Apprendre l\'espagnol' },
        { spanish: 'Aprender a bailar', translation: 'Apprendre à danser' },
        { spanish: 'Aprender a tocar la guitarra', translation: 'Apprendre à jouer de la guitarre' },
        { spanish: 'Aprender a conducir', translation: 'Apprendre à conduire' },
        { spanish: 'Ver una película', translation: 'Voir un film' },
        { spanish: 'Ver la televisión', translation: 'Regarder la télévision' },
        { spanish: 'Ver un partido de fútbol', translation: 'Voir un match de football' },
        { spanish: 'Ver las fotos', translation: 'Voir les photos' },
        { spanish: 'Ver los paisajes', translation: 'Voir les paysages' },
        { spanish: 'Ver las cataratas', translation: 'Voir les chutes d\'eau' },
        { spanish: 'Cocinar un plato', translation: 'Cuisiner un plat' },
        { spanish: 'Cocinar galletas', translation: 'Cuisiner des biscuits' },
        { spanish: 'Cocinar una pizza', translation: 'Cuisiner une pizza' },
        { spanish: 'Cocinar una tortilla', translation: 'Cuisiner une tortilla' },
        { spanish: 'Cocinar con mi madre', translation: 'Cuisiner avec ma mère' }
    ],
    en: [
        { spanish: 'Escuchar música', translation: 'Listen to music' },
        { spanish: 'Escuchar la radio', translation: 'Listen to the radio' },
        { spanish: 'Escuchar un podcast', translation: 'Listen to a podcast' },
        { spanish: 'Escuchar las noticias', translation: 'Listen to the news' },
        { spanish: 'Escuchar un cuento', translation: 'Listen to a story' },
        { spanish: 'Ir a conciertos', translation: 'Go to concerts' },
        { spanish: 'Ir a un museo', translation: 'Go to a museum' },
        { spanish: 'Ir a la playa', translation: 'Go to the beach' },
        { spanish: 'Ir al cine', translation: 'Go to the cinema' },
        { spanish: 'Ir al teatro', translation: 'Go to the theater' },
        { spanish: 'Ir de compras', translation: 'Go shopping' },
        { spanish: 'Ir a la montaña', translation: 'Go to the mountain' },
        { spanish: 'Ir a la biblioteca', translation: 'Go to the library' },
        { spanish: 'Ir al parque', translation: 'Go to the park' },
        { spanish: 'Ir a la feria', translation: 'Go to the fair' },
        { spanish: 'Ir a una exposición de coches', translation: 'Go to a car show' },
        { spanish: 'Ir a la piscina', translation: 'Go to the pool' },
        { spanish: 'Ir al campo', translation: 'Go to the countryside' },
        { spanish: 'Ir al bosque', translation: 'Go to the forest' },
        { spanish: 'Ir al gimnasio', translation: 'Go to the gym' },
        { spanish: 'Salir a cenar', translation: 'Go out to dinner' },
        { spanish: 'Salir a bailar', translation: 'Go out dancing' },
        { spanish: 'Salir de noche', translation: 'Go out at night' },
        { spanish: 'Salir con amigos', translation: 'Go out with friends' },
        { spanish: 'Salir a caminar', translation: 'Go out for a walk' },
        { spanish: 'Salir de paseo', translation: 'Go out for a stroll' },
        { spanish: 'Salir de casa', translation: 'Leave home' },
        { spanish: 'Salir del trabajo', translation: 'Leave work' },
        { spanish: 'Hacer un curso de teatro', translation: 'Take a theater course' },
        { spanish: 'Hacer un intercambio con un nativo', translation: 'Do an exchange with a native' },
        { spanish: 'Hacer ejercicios de gramática', translation: 'Do grammar exercises' },
        { spanish: 'Hacer fotos', translation: 'Take photos' },
        { spanish: 'Hacer deporte', translation: 'Do sports' },
        { spanish: 'Hacer limpieza', translation: 'Do cleaning' },
        { spanish: 'Hacer la compra', translation: 'Do the shopping' },
        { spanish: 'Hacer una tarta', translation: 'Make a cake' },
        { spanish: 'Hacer la siesta', translation: 'Take a nap' },
        { spanish: 'Leer el periódico', translation: 'Read the newspaper' },
        { spanish: 'Leer una revista', translation: 'Read a magazine' },
        { spanish: 'Leer un libro', translation: 'Read a book' },
        { spanish: 'Leer un e-mail', translation: 'Read an e-mail' },
        { spanish: 'Leer una novela', translation: 'Read a novel' },
        { spanish: 'Leer un menú', translation: 'Read a menu' },
        { spanish: 'Escribir un mensaje', translation: 'Write a message' },
        { spanish: 'Escribir un diario', translation: 'Write a diary' },
        { spanish: 'Escribir un correo electrónico', translation: 'Write an email' },
        { spanish: 'Escribir una carta', translation: 'Write a letter' },
        { spanish: 'Escribir una nota', translation: 'Write a note' },
        { spanish: 'Hablar español', translation: 'Speak Spanish' },
        { spanish: 'Hablar con la familia', translation: 'Talk with family' },
        { spanish: 'Hablar por teléfono', translation: 'Talk on the phone' },
        { spanish: 'Visitar páginas web', translation: 'Visit websites' },
        { spanish: 'Visitar lugares históricos', translation: 'Visit historical places' },
        { spanish: 'Visitar a mi abuela', translation: 'Visit my grandmother' },
        { spanish: 'Visitar los monumentos', translation: 'Visit monuments' },
        { spanish: 'Visitar el casco antiguo', translation: 'Visit the old town' },
        { spanish: 'Practicar la pronunciación', translation: 'Practice pronunciation' },
        { spanish: 'Practicar español', translation: 'Practice Spanish' },
        { spanish: 'Practicar yoga', translation: 'Practice yoga' },
        { spanish: 'Practicar el senderismo', translation: 'Practice hiking' },
        { spanish: 'Practicar la equitación', translation: 'Practice horseback riding' },
        { spanish: 'Practicar la natación', translation: 'Practice swimming' },
        { spanish: 'Jugar a videojuegos', translation: 'Play video games' },
        { spanish: 'Jugar al fútbol', translation: 'Play football' },
        { spanish: 'Jugar al tenis', translation: 'Play tennis' },
        { spanish: 'Jugar a las cartas', translation: 'Play cards' },
        { spanish: 'Jugar a los dados', translation: 'Play dice' },
        { spanish: 'Jugar al ajedrez', translation: 'Play chess' },
        { spanish: 'Jugar con rompecabezas', translation: 'Play with puzzles' },
        { spanish: 'Aprender español', translation: 'Learn Spanish' },
        { spanish: 'Aprender a bailar', translation: 'Learn to dance' },
        { spanish: 'Aprender a tocar la guitarra', translation: 'Learn to play guitar' },
        { spanish: 'Aprender a conducir', translation: 'Learn to drive' },
        { spanish: 'Ver una película', translation: 'Watch a movie' },
        { spanish: 'Ver la televisión', translation: 'Watch television' },
        { spanish: 'Ver un partido de fútbol', translation: 'Watch a football match' },
        { spanish: 'Ver las fotos', translation: 'See the photos' },
        { spanish: 'Ver los paisajes', translation: 'See the landscapes' },
        { spanish: 'Ver las cataratas', translation: 'See the waterfalls' },
        { spanish: 'Cocinar un plato', translation: 'Cook a dish' },
        { spanish: 'Cocinar galletas', translation: 'Cook cookies' },
        { spanish: 'Cocinar una pizza', translation: 'Cook a pizza' },
        { spanish: 'Cocinar una tortilla', translation: 'Cook a tortilla' },
        { spanish: 'Cocinar con mi madre', translation: 'Cook with my mother' }
    ]
};

// Función para actualizar las traducciones
function updateTranslations(language) {
    const translationCells = document.querySelectorAll('.translation-cell');
    const selectedTranslations = translations[language];
    
    translationCells.forEach((cell, index) => {
        if (selectedTranslations && selectedTranslations[index]) {
            cell.textContent = selectedTranslations[index].translation;
        }
    });
}

// Datos de los gentilicios - ELIMINANDO transcription
const alphabetData = [
    { letter: 'Escuchar música', audio: 'escuchar musica .mp3' },
    { letter: 'Escuchar la radio', audio: 'escuchar la radio.mp3' },
    { letter: 'Escuchar un podcast', audio: 'escuchar un podcast.mp3' },
    { letter: 'Escuchar las noticias', audio: 'Escuchar las noticias.mp3' },
    { letter: 'Escuchar un cuento', audio: 'Escuchar un cuento.mp3' },
    { letter: 'Ir a conciertos', audio: 'ir a conciertos.mp3' },
    { letter: 'Ir a un museo', audio: 'ir a un museo.mp3' },
    { letter: 'Ir a la playa', audio: 'ir a la playa.mp3' },
    { letter: 'Ir al cine', audio: 'ir al cine.mp3' },
    { letter: 'Ir al teatro', audio: 'ir al teatro.mp3' },
    { letter: 'Ir de compras', audio: 'ir de compras.mp3' },
    { letter: 'Ir a la montaña', audio: 'ir a la montaña.mp3' },
    { letter: 'Ir a la biblioteca', audio: 'ir a la biblioteca.mp3' },
    { letter: 'Ir al parque', audio: 'ir al parque.mp3' },
    { letter: 'Ir a la feria', audio: 'ir a la feria.mp3' },
    { letter: 'Ir a una exposición de coches', audio: 'ir a una exposicion de coches.mp3' },
    { letter: 'Ir a la piscina', audio: 'ir a la piscina.mp3' },
    { letter: 'Ir al campo', audio: 'ir al campo.mp3' },
    { letter: 'Ir al bosque', audio: 'ir al bosque.mp3' },
    { letter: 'Ir al gimnasio', audio: 'ir al gimnasio.mp3' },
    { letter: 'Salir a cenar', audio: 'salir a cenar.mp3' },
    { letter: 'Salir a bailar', audio: 'salir a bailar.mp3' },
    { letter: 'Salir de noche', audio: 'salir de noche.mp3' },
    { letter: 'Salir con amigos', audio: 'salir con amigos.mp3' },
    { letter: 'Salir a caminar', audio: 'salir a caminar.mp3' },
    { letter: 'Salir de paseo', audio: 'salir de paseo.mp3' },
    { letter: 'Salir de casa', audio: 'salir de casa.mp3' },
    { letter: 'Salir del trabajo', audio: 'salir del trabajo.mp3' },
    { letter: 'Hacer un curso de teatro', audio: 'hacer un curso de teatro.mp3' },
    { letter: 'Hacer un intercambio con un nativo', audio: 'hacer un intercambio con un nativo.mp3' },
    { letter: 'Hacer ejercicios de gramática', audio: 'hacer ejercicios de gramatica.mp3' },
    { letter: 'Hacer fotos', audio: 'hacer fotos.mp3' },
    { letter: 'Hacer deporte', audio: 'hacer deporte.mp3' },
    { letter: 'Hacer limpieza', audio: 'Hacer limpieza.mp3' },
    { letter: 'Hacer la compra', audio: 'hacer la compra.mp3' },
    { letter: 'Hacer una tarta', audio: 'hacer una tarta.mp3' },
    { letter: 'Hacer la siesta', audio: 'hacer la siesta.mp3' },
    { letter: 'Leer el periódico', audio: 'leer el periodico.mp3' },
    { letter: 'Leer una revista', audio: 'leer una revista.mp3' },
    { letter: 'Leer un libro', audio: 'leer un libro.mp3' },
    { letter: 'Leer un e-mail', audio: 'leer un email.mp3' },
    { letter: 'Leer una novela', audio: 'leer una novela.mp3' },
    { letter: 'Leer un menú', audio: 'leer un menu.mp3' },
    { letter: 'Escribir un mensaje', audio: 'escribir un mensaje.mp3' },
    { letter: 'Escribir un diario', audio: 'escribir un diario.mp3' },
    { letter: 'Escribir un correo electrónico', audio: 'escribir un correo electri .mp3' },
    { letter: 'Escribir una carta', audio: 'escribir una carta.mp3' },
    { letter: 'Escribir una nota', audio: 'escribir una nota .mp3' },
    { letter: 'Hablar español', audio: 'hablar español.mp3' },
    { letter: 'Hablar con la familia', audio: 'hablar con la familia.mp3' },
    { letter: 'Hablar por teléfono', audio: 'hablar por telefono.mp3' },
    { letter: 'Visitar páginas web', audio: 'visitar paginas web.mp3' },
    { letter: 'Visitar lugares históricos', audio: 'visitar lugares historicos.mp3' },
    { letter: 'Visitar a mi abuela', audio: 'Visitar a mi abuela.mp3' },
    { letter: 'Visitar los monumentos', audio: 'Visitar los monumentos.mp3' },
    { letter: 'Visitar el casco antiguo', audio: 'visitar al casco .mp3' },
    { letter: 'Practicar la pronunciación', audio: 'practicar la pronun.mp3' },
    { letter: 'Practicar español', audio: 'practicar espanol.mp3' },
    { letter: 'Practicar yoga', audio: 'practicar yoga .mp3' },
    { letter: 'Practicar el senderismo', audio: 'practicar el senderismo.mp3' },
    { letter: 'Practicar la equitación', audio: 'practicar la equitacion.mp3' },
    { letter: 'Practicar la natación', audio: 'practicar la natacion.mp3' },
    { letter: 'Jugar a videojuegos', audio: 'jugar a videojuegos.mp3' },
    { letter: 'Jugar al fútbol', audio: 'jugar al futbol.mp3' },
    { letter: 'Jugar al tenis', audio: 'jugar al tenis.mp3' },
    { letter: 'Jugar a las cartas', audio: 'jugar a las cartas.mp3' },
    { letter: 'Jugar a los dados', audio: 'jugar a los dados.mp3' },
    { letter: 'Jugar al ajedrez', audio: 'jugar al ajedrez.mp3' },
    { letter: 'Jugar con rompecabezas', audio: 'jugar con rompe.mp3' },
    { letter: 'Aprender español', audio: 'aprender espanol.mp3' },
    { letter: 'Aprender a bailar', audio: 'aprender a bailar.mp3' },
    { letter: 'Aprender a tocar la guitarra', audio: 'aprender a tocar la guitarra.mp3' },
    { letter: 'Aprender a conducir', audio: 'Aprender a conducir.mp3' },
    { letter: 'Ver una película', audio: 'ver una pelicula.mp3' },
    { letter: 'Ver la televisión', audio: 'ver la television.mp3' },
    { letter: 'Ver un partido de fútbol', audio: 'ver un partido.mp3' },
    { letter: 'Ver las fotos', audio: 'ver las fotos.mp3' },
    { letter: 'Ver los paisajes', audio: 'ver los paisajes.mp3' },
    { letter: 'Ver las cataratas', audio: 'ver las cataratas .mp3' },
    { letter: 'Cocinar un plato', audio: 'cocinar un plato.mp3' },
    { letter: 'Cocinar galletas', audio: 'cocinar galletas.mp3' },
    { letter: 'Cocinar una pizza', audio: 'cocinar una pizza.mp3' },
    { letter: 'Cocinar una tortilla', audio: 'cocinar una tortilla.mp3' },
    { letter: 'Cocinar con mi madre', audio: 'cocinar con mi madre.mp3' }
];

        const baseUrl = 'https://fawzinoo.github.io/audios/';
        let playedCount = 0;
        let currentPlaying = null;

        // Variables globales (agregar esta nueva variable)
        let playedLetters = new Set(); // Para rastrear letras ya reproducidas individualmente

        // Añade o reemplaza estas variables globales:
        let isPlayingSequence = false;
        let isPausedSequence = false;
        let sequenceIndex = 0;

        let lastPlayedIndex = -1; // Para rastrear la última posición reproducida

        // Función para guardar progreso en localStorage
// Modificar la función saveProgress para incluir el estado de reproducción
function saveProgress() {
    const progressData = {
        playedLetters: Array.from(playedLetters),
        playedCount: playedCount,
        lastPlayedIndex: lastPlayedIndex,
        sequenceIndex: sequenceIndex,
        isPlayingSequence: isPlayingSequence,
        isPausedSequence: isPausedSequence,
        timestamp: Date.now()
    };
    localStorage.setItem('findeProgress', JSON.stringify(progressData));
}

// Función para cargar progreso desde localStorage
function loadProgress() {
    const savedData = localStorage.getItem('findeProgress');
    if (savedData) {
        const progressData = JSON.parse(savedData);
        
        // Restaurar datos
        playedLetters = new Set(progressData.playedLetters || []);
        playedCount = progressData.playedCount || 0;
        lastPlayedIndex = progressData.lastPlayedIndex || -1;
        sequenceIndex = progressData.sequenceIndex || 0;
        isPlayingSequence = progressData.isPlayingSequence || false;
        isPausedSequence = progressData.isPausedSequence || false;
        
        // Actualizar UI
        document.getElementById('played-count').textContent = playedCount;
        updateProgress();
        
        // Restaurar sombra dorada en la última posición
        if (lastPlayedIndex >= 0) {
            const rows = document.querySelectorAll('#alphabet-tbody tr');
            const targetRow = rows[lastPlayedIndex];
            if (targetRow) {
                targetRow.classList.add('playing-row');
                // Hacer scroll a la posición guardada
                scrollToPlayingRow(lastPlayedIndex);
            }
        }
        
        // Restaurar estado de los botones si estaba en reproducción
        if (isPlayingSequence || isPausedSequence) {
            const playAllBtn = document.getElementById('play-all-btn');
            const playAllIcon = playAllBtn.querySelector('i');
            const playAllText = playAllBtn.querySelector('span');
            
            if (isPausedSequence) {
                // Restaurar estado pausado
                playAllIcon.className = 'fas fa-play-circle';
                playAllText.textContent = ' Reanudar';
                playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
                playAllBtn.style.color = '#2d3748';
                enablePlayButtons();
            } else {
                // Marcar como pausado para que el usuario pueda continuar
                isPausedSequence = true;
                isPlayingSequence = false;
                playAllIcon.className = 'fas fa-play-circle';
                playAllText.textContent = ' Reanudar';
                playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
                playAllBtn.style.color = '#2d3748';
                enablePlayButtons();
            }
            
            // Mostrar botón detener
            const stopBtn = document.getElementById('stop-btn');
            stopBtn.style.display = 'flex';
            playAllBtn.style.borderRadius = '25px 0 0 25px';
        }
    }
}

// Función para limpiar progreso
function clearProgress() {
    localStorage.removeItem('findeProgress');
    lastPlayedIndex = -1;
    // Remover todas las sombras doradas
    const rows = document.querySelectorAll('#alphabet-tbody tr');
    rows.forEach(row => row.classList.remove('playing-row'));
}

// Generar la tabla
function generateTable() {
    const tbody = document.getElementById('alphabet-tbody');
    
    alphabetData.forEach((item, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td class="letter-cell">${item.letter}</td>
            <td class="translation-cell">${item.letter}</td>
            <td>
                <button class="play-button" onclick="playAudio(${index})">
                    <i class="fas fa-play"></i>
                    <span>Play</span>
                </button>
            </td>
        `;
        tbody.appendChild(row);
    });

    document.getElementById('total-letters').textContent = alphabetData.length;
}

// Actualizar contador solo para reproducciones individuales
function updatePlayedCount() {
    playedCount++;
    document.getElementById('played-count').textContent = playedCount;
    updateProgress();
}

      

        // Función para hacer scroll a la fila que se está reproduciendo
function scrollToPlayingRow(index) {
    const rows = document.querySelectorAll('#alphabet-tbody tr');
    const targetRow = rows[index];
    
    if (targetRow) {
        targetRow.scrollIntoView({
            behavior: 'smooth',
            block: 'center',
            inline: 'nearest'
        });
    }
}

// Reemplazar la función playAudio con esta versión corregida
function playAudio(index) {
    // Bloquear si está reproduciendo secuencia
    if (isPlayingSequence) {
        return;
    }
    
    const button = document.querySelectorAll('.play-button')[index];
    const icon = button.querySelector('i');
    const span = button.querySelector('span');
    const row = button.closest('tr');
    
    // Si el botón está actualmente reproduciendo, pausar
    if (button.classList.contains('playing')) {
        if (currentPlaying && !currentPlaying.paused) {
            currentPlaying.pause();
            currentPlaying.currentTime = 0;
        }
        resetButton(button);
        row.classList.remove('playing-row');
        lastPlayedIndex = -1; // Resetear la posición
        saveProgress(); // Guardar que no hay reproducción activa
        return;
    }
    
    // Hacer scroll a la fila
    scrollToPlayingRow(index);
    
    // Detener audio anterior si existe
    if (currentPlaying && !currentPlaying.paused) {
        currentPlaying.pause();
        currentPlaying.currentTime = 0;
        resetPreviousButton();
    }

    // Crear y reproducir nuevo audio
    const audio = new Audio(baseUrl + alphabetData[index].audio);
    currentPlaying = audio;

    // Cambiar estado del botón manteniendo el tamaño original
    button.classList.add('playing');
    icon.className = 'fas fa-stop';
    span.innerHTML = `
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
    `;

    // Agregar efecto dorado a la fila
    row.classList.add('playing-row');
    lastPlayedIndex = index; // Guardar la posición actual
    saveProgress(); // Guardar progreso inmediatamente

    // Reproducir audio
    audio.play().catch(error => {
        console.error('Error al reproducir audio:', error);
        resetButton(button);
        row.classList.remove('playing-row');
        lastPlayedIndex = -1;
        saveProgress();
    });

    // Cuando termine el audio (solo contar si es reproducción individual)
    audio.onended = () => {
        resetButton(button);
        row.classList.remove('playing-row');
        lastPlayedIndex = -1; // Resetear cuando termine
        // Solo contar si no se ha reproducido antes
        if (!playedLetters.has(index)) {
            playedLetters.add(index);
            playedCount = playedLetters.size;
            document.getElementById('played-count').textContent = playedCount;
            updateProgress();
        }
        // Guardar progreso después de reproducción individual
        saveProgress();
    };

    // Si hay error
    audio.onerror = () => {
        console.error('Error al cargar audio:', alphabetData[index].audio);
        resetButton(button);
        row.classList.remove('playing-row');
        lastPlayedIndex = -1;
        saveProgress();
    };
}
        // Resetear botón anterior
        function resetPreviousButton() {
            const playingButtons = document.querySelectorAll('.play-button.playing');
            playingButtons.forEach(button => resetButton(button));
        }

        // Resetear estado del botón
        function resetButton(button) {
            const icon = button.querySelector('i');
            const span = button.querySelector('span');
            const row = button.closest('tr');
            
            button.classList.remove('playing');
            icon.className = 'fas fa-play';
            span.textContent = 'Play';
            
            // Remover efecto dorado de la fila
            if (row) {
                row.classList.remove('playing-row');
            }
        }

        // Agregar progreso
        function updateProgress() {
            const percentage = Math.round((playedCount / alphabetData.length) * 100);
            const progressBar = document.getElementById('progress-bar');
            const progressPercentage = document.getElementById('progress-percentage');
            
            if (progressBar) {
                progressBar.style.width = percentage + '%';
            }
            if (progressPercentage) {
                progressPercentage.textContent = percentage;
            }
        }

        // Función para reproducir todas las letras en secuencia
        function playAll() {
            if (isPlayingSequence && !isPausedSequence) return; // Ya está reproduciendo

            const playAllBtn = document.getElementById('play-all-btn');
            const playAllIcon = playAllBtn.querySelector('i');
            const playAllText = playAllBtn.querySelector('span');

            // Quitar el efecto de parpadeo si existe
            playAllBtn.classList.remove('play-again-blink');

            // Restaura el fondo verde
            playAllBtn.style.background = 'linear-gradient(135deg, #48bb78, #38a169)';
            playAllBtn.style.color = 'white';

            // Verificar si es una nueva reproducción (después de "Reproducir de nuevo")
            const isNewReproduction = playAllText.textContent.includes('Reproducir de nuevo');

            if (isPausedSequence) {
                // Reanudar
                isPausedSequence = false;
                isPlayingSequence = true;
                playAllIcon.className = 'fas fa-pause'; // Icono de pausa
                playAllText.textContent = ' Pausar ';
                disablePlayButtons(); // Deshabilitar botones individuales
                playNextInSequence();
                return;
            }

            // Si es una nueva reproducción, restablecer el progreso
            if (isNewReproduction) {
                // Restablecer variables de progreso
                playedLetters.clear();
                playedCount = 0;
                
                // Actualizar la UI del progreso
                document.getElementById('played-count').textContent = playedCount;
                const progressBar = document.getElementById('progress-bar');
                const progressPercentage = document.getElementById('progress-percentage');
                
                if (progressBar) {
                    progressBar.style.width = '0%';
                }
                if (progressPercentage) {
                    progressPercentage.textContent = '0';
                }
            }

            // Iniciar desde el principio
            isPlayingSequence = true;
            isPausedSequence = false;
            sequenceIndex = 0;
            playAllIcon.className = 'fas fa-pause'; // Icono de pausa
            playAllText.textContent = ' Pausar ';
            disablePlayButtons(); // Deshabilitar botones individuales
            playNextInSequence();
        }

        function pauseAll() {
            isPausedSequence = true;
            isPlayingSequence = false;
            if (currentPlaying && !currentPlaying.paused) {
                currentPlaying.pause();
            }
            
            // Resetear el botón que está actualmente reproduciéndose PERO mantener la sombra
            const playingButtons = document.querySelectorAll('.play-button.playing');
            playingButtons.forEach(button => {
                resetButton(button);
                // Mantener la sombra dorada en la fila actual
                const row = button.closest('tr');
                if (row) {
                    row.classList.add('playing-row');
                    // Actualizar lastPlayedIndex
                    const buttonIndex = Array.from(document.querySelectorAll('.play-button')).indexOf(button);
                    lastPlayedIndex = buttonIndex;
                }
            });
            
            // Guardar progreso
            saveProgress();
            
            // Cambia el icono a "play"
            const playAllBtn = document.getElementById('play-all-btn');
            const playAllIcon = playAllBtn.querySelector('i');
            const playAllText = playAllBtn.querySelector('span');
            playAllIcon.className = 'fas fa-play-circle';
            playAllText.textContent = ' Reanudar';
            // Cambia el fondo a amarillo
            playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
            playAllBtn.style.color = '#2d3748';
            
            // Habilitar botones individuales cuando se pausa
            enablePlayButtons();
        }

        // Modificar la función playNextInSequence para guardar progreso inmediatamente
function playNextInSequence() {
    if (!isPlayingSequence || isPausedSequence || sequenceIndex >= alphabetData.length) {
        isPlayingSequence = false;
        return;
    }

    const button = document.querySelectorAll('.play-button')[sequenceIndex];
    const icon = button.querySelector('i');
    const span = button.querySelector('span');
    const row = button.closest('tr');

    // Remover sombra dorada anterior
    if (lastPlayedIndex >= 0) {
        const prevRow = document.querySelectorAll('#alphabet-tbody tr')[lastPlayedIndex];
        if (prevRow) {
            prevRow.classList.remove('playing-row');
        }
    }

    // Hacer scroll a la fila que se está reproduciendo
    scrollToPlayingRow(sequenceIndex);

    if (currentPlaying && !currentPlaying.paused) {
        currentPlaying.pause();
        currentPlaying.currentTime = 0;
        resetPreviousButton();
    }

    const audio = new Audio(baseUrl + alphabetData[sequenceIndex].audio);
    currentPlaying = audio;

    button.classList.add('playing');
    icon.className = 'fas fa-pause';
    span.innerHTML = `
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
    `;

    // Agregar efecto dorado a la fila
    row.classList.add('playing-row');
    lastPlayedIndex = sequenceIndex;
    
    // Guardar progreso inmediatamente al iniciar la reproducción
    saveProgress();

    audio.play().catch(error => {
        resetButton(button);
        continueSequence();
    });

    audio.onended = () => {
        resetButton(button);
        continueSequence();
    };

    audio.onerror = () => {
        resetButton(button);
        continueSequence();
    };

    function continueSequence() {
        // Marcar como reproducida si no lo estaba
        if (!playedLetters.has(sequenceIndex)) {
            playedLetters.add(sequenceIndex);
            playedCount = playedLetters.size;
            document.getElementById('played-count').textContent = playedCount;
            updateProgress();
        }
        
        // Guardar progreso después de cada reproducción
        saveProgress();
        
        sequenceIndex++;
        if (isPlayingSequence && !isPausedSequence && sequenceIndex < alphabetData.length) {
            setTimeout(playNextInSequence, 1000);
        } else {
            isPlayingSequence = false;
            // Limpiar progreso cuando termine completamente
            clearProgress();
            
            // Cambia el icono a "play" al terminar
            const playAllBtn = document.getElementById('play-all-btn');
            const playAllIcon = playAllBtn.querySelector('i');
            const playAllText = playAllBtn.querySelector('span');
            playAllIcon.className = 'fas fa-play-circle';
            playAllText.textContent = ' Reproducir de nuevo';
            
            // Agregar efecto de parpadeo
            playAllBtn.classList.add('play-again-blink');
            
            // Ocultar botón detener al terminar
            const stopBtn = document.getElementById('stop-btn');
            stopBtn.style.display = 'none';
            playAllBtn.style.borderRadius = '25px';
            
            // Habilitar botones individuales al terminar
            enablePlayButtons();
            
            // Reproducir sonido de finalización
            playCompletionSound();
            
            // Hacer scroll hacia arriba al terminar
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
    }
}

        // Nueva función para reproducir sonido de finalización
        function playCompletionSound() {
            // Crear un contexto de audio
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Función para crear un tono
            function createTone(frequency, duration, delay = 0) {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = 'sine';
                
                // Configurar el volumen con fade in/out
                gainNode.gain.setValueAtTime(0, audioContext.currentTime + delay);
                gainNode.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + delay + 0.1);
                gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + delay + duration);
                
                oscillator.start(audioContext.currentTime + delay);
                oscillator.stop(audioContext.currentTime + delay + duration);
            }
            
            // Reproducir secuencia de tonos (Do - Mi - Sol - Do)
            createTone(523.25, 0.3, 0);    // Do
            createTone(659.25, 0.3, 0.2);  // Mi
            createTone(783.99, 0.4, 0.4);  // Sol
            createTone(1046.5, 0.6, 0.6);  // Do octava superior
        }

        // Función para detener secuencia
        function stopAll() {
            isPlayingSequence = false;
            sequenceIndex = 0;
            
            if (currentPlaying && !currentPlaying.paused) {
                currentPlaying.pause();
                currentPlaying.currentTime = 0;
                resetPreviousButton();
            }
        }

        // Agregar botón para reproducir todo
        function addPlayAllButton() {
            const header = document.querySelector('.header');
            const buttonContainer = document.createElement('div');
            buttonContainer.style.cssText = `
                margin-top: 1px; /* Reducir de 15px a 5px */
                margin-bottom: -10px; /* Agregar margen inferior mínimo */
                display: flex;
                justify-content: center;
                align-items: center;
            `;
            
            // Contenedor principal
            const buttonGroup = document.createElement('div');
            buttonGroup.style.cssText = `
                display: inline-flex;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                backdrop-filter: blur(10px);
            `;
            
            const playAllBtn = document.createElement('button');
            playAllBtn.innerHTML = '<i class="fas fa-play-circle"></i><span> Reproducir Todo</span>';
            playAllBtn.id = 'play-all-btn';
            playAllBtn.style.cssText = `
                background: linear-gradient(135deg, #48bb78, #38a169);
                color: white;
                border: none;
                border-radius: 25px; /* Inicialmente completamente redondeado */
                padding: 14px 24px;
                font-size: 0.95rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                outline: none;
            `;
            
            const stopBtn = document.createElement('button');
            stopBtn.innerHTML = '<i class="fas fa-stop-circle"></i><span> Detener</span>';
            stopBtn.id = 'stop-btn';
            stopBtn.style.cssText = `
                background: linear-gradient(135deg, #e53e3e, #c53030);
                color: white;
                border: none;
                border-radius: 0 25px 25px 0;
                padding: 14px 24px;
                font-size: 0.95rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                display: none; /* Inicialmente oculto */
                align-items: center;
                justify-content: center;
                gap: 8px;
                outline: none;
                margin-left: -1px;
            `;
            
            // Función para mostrar/ocultar botón detener
            function toggleStopButton(show) {
                if (show) {
                    stopBtn.style.display = 'flex';
                    playAllBtn.style.borderRadius = '25px 0 0 25px'; // Cambiar a medio redondeado
                } else {
                    stopBtn.style.display = 'none';
                    playAllBtn.style.borderRadius = '25px'; // Volver a completamente redondeado
                }
            }
            
            // Efectos hover
            playAllBtn.addEventListener('mouseenter', () => {
                if (isPausedSequence) {
                    playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
                    playAllBtn.style.color = '#2d3748';
                } else {
                    playAllBtn.style.background = 'linear-gradient(135deg, #38a169, #2f855a)';
                    playAllBtn.style.color = 'white';
                }
                playAllBtn.style.transform = 'translateY(-1px)';
            });
            playAllBtn.addEventListener('mouseleave', () => {
                if (isPausedSequence) {
                    playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
                    playAllBtn.style.color = '#2d3748';
                } else {
                    playAllBtn.style.background = 'linear-gradient(135deg, #48bb78, #38a169)';
                    playAllBtn.style.color = 'white';
                }
                playAllBtn.style.transform = 'translateY(0)';
            });
            
            stopBtn.addEventListener('mouseenter', () => {
                stopBtn.style.background = 'linear-gradient(135deg, #c53030, #9c2626)';
                stopBtn.style.transform = 'translateY(-1px)';
            });
            stopBtn.addEventListener('mouseleave', () => {
                stopBtn.style.background = 'linear-gradient(135deg, #e53e3e, #c53030)';
                stopBtn.style.transform = 'translateY(0)';
            });
            
            // Alternar entre play y pause
            playAllBtn.onclick = function() {
                if (isPlayingSequence && !isPausedSequence) {
                    pauseAll();
                } else {
                    playAll();
                    toggleStopButton(true); // Mostrar botón detener al empezar
                }
            };
            
            stopBtn.onclick = function() {
                isPlayingSequence = false;
                isPausedSequence = false;
                sequenceIndex = 0;
                if (currentPlaying && !currentPlaying.paused) {
                    currentPlaying.pause();
                    currentPlaying.currentTime = 0;
                    resetPreviousButton(); // Resetear el botón que está reproduciéndose
                }
                
                // Limpiar progreso guardado
                clearProgress();
                
                // Restablecer variables de progreso
                playedLetters.clear();
                playedCount = 0;
                
                // Actualizar la UI del progreso
                document.getElementById('played-count').textContent = playedCount;
                const progressBar = document.getElementById('progress-bar');
                const progressPercentage = document.getElementById('progress-percentage');
                
                if (progressBar) {
                    progressBar.style.width = '0%';
                }
                if (progressPercentage) {
                    progressPercentage.textContent = '0';
                }
                
                // Cambia el icono a "play"
                const playAllIcon = playAllBtn.querySelector('i');
                const playAllText = playAllBtn.querySelector('span');
                playAllIcon.className = 'fas fa-play-circle';
                playAllText.textContent = ' Reproducir Todo';
                
                // Quitar el efecto de parpadeo si existe
                playAllBtn.classList.remove('play-again-blink');
                
                // Ocultar botón detener
                toggleStopButton(false);
                
                // Habilitar botones individuales al detener
                enablePlayButtons();
            };

    buttonGroup.appendChild(playAllBtn);
    buttonGroup.appendChild(stopBtn);
    buttonContainer.appendChild(buttonGroup);
    header.appendChild(buttonContainer);
}
        // Inicializar cuando se carga la página
document.addEventListener('DOMContentLoaded', () => {
    generateTable();
    addPlayAllButton();
    loadProgress();
    
    // Agregar event listener para el selector de idioma
    const languageSelect = document.getElementById('language-select');
    languageSelect.addEventListener('change', (e) => {
        const selectedLanguage = e.target.value;
        updateTranslations(selectedLanguage);
    });
    
    // Establecer idioma inicial (inglés por defecto)
    updateTranslations('en');
});

        // Detener audio al salir de la página
        window.addEventListener('beforeunload', () => {
            if (currentPlaying && !currentPlaying.paused) {
                currentPlaying.pause();
            }
            // Asegurar que se guarde el progreso antes de salir
            saveProgress();
        });

        // También guardar progreso cuando se oculta la página (cambio de pestaña)
document.addEventListener('visibilitychange', () => {
    if (document.hidden) {
        saveProgress();
    }
});

// Función para deshabilitar botones durante reproducción total
function disablePlayButtons() {
    const playButtons = document.querySelectorAll('.play-button');
    playButtons.forEach(button => {
        button.style.cursor = 'not-allowed';
        button.style.pointerEvents = 'none';
        // Mantener el color original pero con un filtro muy sutil
        button.style.filter = 'brightness(0.95)';
        // Agregar una clase para identificar que están deshabilitados
        button.classList.add('disabled-sequence');
    });
}

// Función para habilitar botones después de reproducción total
function enablePlayButtons() {
    const playButtons = document.querySelectorAll('.play-button');
    playButtons.forEach(button => {
        button.style.cursor = 'pointer';
        button.style.pointerEvents = 'auto';
        button.style.filter = 'none';
        button.classList.remove('disabled-sequence');
    });
}
    </script>
</body>
</html>
