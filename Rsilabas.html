<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consonante y vocal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px; /* Reducido de 2px a 10px */
            overflow: hidden;
        }

        /* Modificar el contenedor principal */
.container {
    max-width: 1000px;
    margin: 0 auto;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 15px;
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    backdrop-filter: blur(10px);
    height: 100vh; /* Altura completa de la ventana */
    display: flex;
    flex-direction: column;
}

/* Mantener la cabecera fija */
.header {
    background: linear-gradient(135deg, #4a5568, #2d3748);
    color: white;
    text-align: center;
    padding: 15px 20px; /* Reducir padding vertical de 20px a 15px */
    position: sticky;
    top: 0;
    z-index: 1000;
    flex-shrink: 0; /* No se encoge */
}

/* Reducir espacio entre el título y la sección de estadísticas */
.header h1 {
    margin-bottom: 10px; /* Reducir de 20px a 10px */
    font-size: 2.5rem;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

/* Reducir espacio entre estadísticas y botones */
.stats-container {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 5px; /* Reducir de 20px a 5px */
    backdrop-filter: blur(5px);
}

/* Hacer el contenedor de la tabla scrolleable */
.table-container {
    flex: 1; /* Ocupa el resto del espacio disponible */
    overflow-y: auto; /* Scroll vertical */
    padding: 1px 20px 20px 20px; /* Reducir padding-top a 1px */
    background: white;
}

/* Mejorar el scroll en la tabla */
.table-container::-webkit-scrollbar {
    width: 8px;
}

.table-container::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

.table-container::-webkit-scrollbar-thumb {
    background: greenyellow;
    border-radius: 10px;
}

.table-container::-webkit-scrollbar-thumb:hover {
    background: rgb(60, 97, 4);
}

/* Asegurar que la tabla ocupe todo el ancho disponible */
.alphabet-table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px; /* Espacio al final */
}

        .header h1 {
            font-size: 2.2rem; /* Reducido de 2.5rem a 2.2rem */
            margin-bottom: 8px; /* Reducido de 10px a 8px */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            color: #63b3ed; /* Color azul claro */
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .table-container {
            padding: 20px; /* Reducido de 30px a 20px */
            overflow-x: auto;
        }

        .alphabet-table thead {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .alphabet-table th {
            padding: 15px 10px;
            text-align: center;
            font-weight: 600;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-right: 1px solid rgba(255, 255, 255, 0.3);
        }

        .alphabet-table th:last-child {
            border-right: none; /* Quitar línea de la última columna */
        }

        .alphabet-table tbody tr {
            opacity: 0;
            animation: fadeInUp 0.5s ease forwards;
            transition: all 0.3s ease;
            border-bottom: 1px solid #e2e8f0;
        }

        .alphabet-table tbody tr:hover {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .alphabet-table tbody tr:nth-child(1) { animation-delay: 0.1s; }
        .alphabet-table tbody tr:nth-child(2) { animation-delay: 0.2s; }
        .alphabet-table tbody tr:nth-child(3) { animation-delay: 0.3s; }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .alphabet-table td {
            padding: 12px 10px;
            text-align: center;
            vertical-align: middle;
            border-right: 1px solid rgba(102, 126, 234, 0.2); /* Color del gradiente */
        }

        .alphabet-table td:last-child {
            border-right: none; /* Quitar línea de la última columna */
        }

        .letter-cell {
            font-size: 1.1rem; /* Reducido de 1.6rem a 1.1rem */
            font-weight: bold;
            color: #2d3748;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .transcription-cell {
            font-size: 1.1rem; /* Reducido de 1.3rem a 1.1rem */
            color: #4a5568;
            font-style: italic;
            font-weight: 500;
        }

        .play-button {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 8px 16px; /* Tamaño original */
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(72, 187, 120, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            margin: 0 auto;
        }

        .play-button:hover {
            background: linear-gradient(135deg, #38a169, #2f855a);
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(72, 187, 120, 0.4);
        }

        /* Modificar el estilo del botón cuando está reproduciendo */
.play-button.playing {
    background: linear-gradient(135deg, #919105, #efe973); /* Color rojo */
    color: white;
    border: none;
    border-radius: 50px;
    padding: 4px 10px; /* Mismo tamaño que el original */
    cursor: pointer;
    font-size: 0.8rem;
    transition: all 0.3s ease;
    box-shadow: 0 3px 10px rgba(245, 101, 101, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    margin: 0 auto;
}
/* media querires para Pc para .play-button.playing mayor que padding: 4px 10px; */
@media (min-width: 1024px) {
    .play-button.playing {
        padding: 7px 18px;
    }
}
.play-button.playing:hover {
    background: greenyellow;
    transform: translateY(-1px);
    box-shadow: 0 4px 15px rgba(245, 101, 101, 0.4);
}

/* Eliminar las ondas de audio y mantener solo el texto */
.play-button.playing span {
    display: block;
    font-size: 0.9rem;
}

/* Mantener las ondas de audio pequeñas para que no cambien el tamaño del botón */
.audio-wave {
    display: inline-block;
    width: 3px;
    height: 12px;
    background: white;
    margin: 0 1px;
    border-radius: 1px;
    animation: wave 1s infinite ease-in-out;
}

.audio-wave:nth-child(1) { animation-delay: 0s; }
.audio-wave:nth-child(2) { animation-delay: 0.1s; }
.audio-wave:nth-child(3) { animation-delay: 0.2s; }
.audio-wave:nth-child(4) { animation-delay: 0.3s; }

@keyframes wave {
    0%, 40%, 100% { transform: scaleY(0.4); }
    20% { transform: scaleY(1); }
}

/* Mantener el contenido centrado cuando está reproduciendo */
.play-button.playing span {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1px;
}

        /* Nueva sección de progreso elegante */
        .progress-section {
            margin-top: -15px; /* Usar margen negativo si es necesario */
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: -1px;
        }

        .progress-stats {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .stat-divider {
            width: 1px;
            height: 40px;
            background: rgba(255, 255, 255, 0.3);
        }

        .progress-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 5px; /* Reducir espacio después de las estadísticas */
        }

        .progress-track {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169, #2f855a);
            border-radius: 10px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(72, 187, 120, 0.4);
            position: relative;
            overflow: hidden;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .progress-text {
            text-align: center;
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Responsive para la sección de progreso */
        @media (max-width: 768px) {
            .progress-section {
                padding: 15px;
                margin-top: 15px;
            }
            
            .progress-stats {
                gap: 15px;
            }
            
            .stat-value {
                font-size: 1.5rem;
            }
            
            .stat-label {
                font-size: 0.8rem;
            }
            
            .stat-divider {
                height: 30px;
            }
        }

        @media (max-width: 480px) {
            .progress-section {
                padding: 12px;
            }
            
            .progress-stats {
                gap: 10px;
            }
            
            .stat-value {
                font-size: 1.3rem;
            }
            
            .stat-label {
                font-size: 0.75rem;
            }
            
            .progress-text {
                font-size: 0.8rem;
            }
        }

        /* Botones del header más compactos */
        .header button {
            padding: 8px 16px !important; /* Reducido */
            font-size: 0.9rem !important; /* Reducido */
            margin-top: 10px !important; /* Reducido de 15px a 10px */
        }

        /* Control específico de márgenes en la cabecera */
.header * {
    margin-top: 0;
}

.header h1:first-child {
    margin-top: 0;
}

/* Reducir espacios en la sección de estadísticas */
.stats-container .stats-grid {
    margin-bottom: 10px; /* Reducir espacio antes de la barra de progreso */
}

.progress-container {
    margin-top: 5px; /* Reducir espacio después de las estadísticas */
}

/* Ajustar el contenedor de botones */
.header .button-container {
    margin-top: 1px; /* Reducir a 1px */
    margin-bottom: 1px; /* Agregar esta línea para reducir el espacio inferior */
}

/* Responsive mejorado para espacios más pequeños */
        @media (max-width: 768px) {
            body {
                padding: 5px;
            }
            
            .container {
                margin: 5px;
                border-radius: 10px;
            }

            .header {
                padding: 15px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .table-container {
                padding: 10px;
            }

            .alphabet-table th,
            .alphabet-table td {
                padding: 8px 6px;
                border-right: 1px solid rgba(255, 255, 255, 0.2); /* Líneas más sutiles en móvil */
            }
            
            .alphabet-table td {
                border-right: 1px solid #f0f0f0;
            }
            
            .alphabet-table th:last-child,
            .alphabet-table td:last-child {
                border-right: none;
            }

            .letter-cell {
                font-size: 1.0rem; /* Reducido de 1.8rem a 1.0rem */
            }

            .transcription-cell {
                font-size: 1rem;
            }

            .play-button {
                padding: 6px 12px;
                font-size: 0.8rem;
                min-width: 60px;
            }
            
            .stats {
                padding: 10px;
                font-size: 0.9rem;
            }

            /* Botones responsivos */
            #play-all-btn, #stop-btn {
                padding: 12px 18px !important;
                font-size: 0.85rem !important;
            }
            
            #play-all-btn span, #stop-btn span {
                display: inline !important;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.6rem;
            }
            
            .header p {
                font-size: 0.9rem;
            }
            
            .alphabet-table th {
                font-size: 0.8rem;
                padding: 10px 5px;
            }
            
            .letter-cell {
                font-size: 0.9rem; /* Reducido de 1.6rem a 0.9rem */
            }
            
            .transcription-cell {
                font-size: 0.9rem;
            }
            
            .play-button {
                min-width: 55px;
                padding: 5px 10px;
                font-size: 0.75rem;
            }
            
            /* Ocultar texto en botones en móviles muy pequeños */
            #play-all-btn span:not(.fas), #stop-btn span:not(.fas) {
                display: none; /* Ocultar texto en móviles muy pequeños */
            }
            
            #play-all-btn, #stop-btn {
                min-width: 50px !important;
                padding: 12px !important;
            }
        }

        @media (max-width: 360px) {
            #play-all-btn, #stop-btn {
                padding: 10px 12px !important;
                font-size: 1.1rem !important;
            }
        }

        /* Audio visualization */
        .audio-wave {
            display: inline-block;
            width: 4px;
            height: 20px;
            background: #48bb78;
            margin: 0 1px;
            border-radius: 2px;
            animation: wave 1s infinite ease-in-out;
        }

        .audio-wave:nth-child(2) { animation-delay: 0.1s; }
        .audio-wave:nth-child(3) { animation-delay: 0.2s; }
        .audio-wave:nth-child(4) { animation-delay: 0.3s; }

        @keyframes wave {
            0%, 40%, 100% { transform: scaleY(0.4); }
            20% { transform: scaleY(1); }
        }

        /* Efecto de sombra dorada para la fila activa - ajustada para estar dentro de la fila */
.alphabet-table tbody tr.playing-row {
    position: relative;
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.08), rgba(255, 223, 0, 0.04));
    border-left: 4px solid rgba(255, 215, 0, 0.8);
    border-right: 4px solid rgba(255, 215, 0, 0.8);
    border-top: 1px solid rgba(255, 215, 0, 0.3);
    border-bottom: 1px solid rgba(255, 215, 0, 0.3);
    box-shadow: 
        0 0 8px rgba(255, 215, 0, 0.2) inset,
        0 1px 2px rgba(255, 215, 0, 0.1);
    transition: all 0.3s ease;
    margin: 1px 0;
}

.alphabet-table tbody tr.playing-row:hover {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.12), rgba(255, 223, 0, 0.06));
    box-shadow: 
        0 0 12px rgba(255, 215, 0, 0.3) inset,
        0 2px 4px rgba(255, 215, 0, 0.15);
}

.language-selector {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    padding: 8px 12px;
    color: white;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    outline: none;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
}

.language-selector:hover {
    background: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.5);
}

.language-selector:focus {
    background: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.7);
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2);
}

.language-selector option {
    background: #4a5568;
    color: white;
    padding: 8px;
}

/* Responsive para el selector */
@media (max-width: 768px) {
    .language-selector {
        font-size: 0.8rem;
        padding: 6px 10px;
    }
}

@media (max-width: 480px) {
    .language-selector {
        font-size: 0.75rem;
        padding: 5px 8px;
    }
}

.letter-cell .highlight {
    color: #e53e3e;
    font-weight: bold;
}

.letter-cell .rest {
    color: #2d3748;
}
.syllable-icon {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  color: #fff;
  font-size: 0.95rem;
  box-shadow: 0 4px 10px rgba(0,0,0,0.15);
  user-select: none;
}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">

<div class="ayer-header" style="display: flex; align-items: center; gap: 14px; justify-content: center; margin-bottom: 20px;">
  <span style="display: flex; align-items: center; gap: 8px; font-size: 1.8rem;">
    <span class="syllable-icon" title="ÑA" style="background: #6b46c1;">ÑA</span>
    <span class="syllable-icon" title="DA" style="background: #d69e2e;">DA</span>

  </span>
  <span style="font-weight: bold; font-size: 1.5rem; color: #e0eafc; margin-top: 0; margin-bottom: 0; text-align: left; display: inline-block; text-shadow: 0 0 18px #3558e3, 0 0 32px #000;">
    Consonante y vocal
  </span>
</div>

            
            <!-- Nueva sección de progreso elegante -->
            <div class="progress-section">
                <div class="progress-stats">
                   <div class="stat-item">
<span class="stat-label">Total</span>
<span class="stat-value" id="total-letters">103</span>
</div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <span class="stat-label">Reproducidas</span>
                        <span class="stat-value" id="played-count">0</span>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <span class="stat-label">Idioma</span>
<select id="language-select" class="language-selector">
    <option value="en">Inglés</option>
    <option value="ar">Árabe</option>
    <option value="fr">Francés</option>
</select>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-track">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                    <div class="progress-text">
                        <span id="progress-percentage">0</span>% completado
                    </div>
                </div>
            </div>
        </div>

        <div class="table-container">
            <table class="alphabet-table">
    <thead>
        <tr>
          <th>Etapa</th>
            <th><i class="fas fa-comment-dots"></i> Traducción</th>
            <th><i class="fas fa-volume-up"></i> Voz</th>
        </tr>
    </thead>
    <tbody id="alphabet-tbody">
        <!-- Las filas se generarán con JavaScript -->
    </tbody>
</table>
        </div>

        
    </div>

    <script>


const alphabetData = [
    { letter: "<span class='highlight'>Ba</span><span class='rest'>nco</span>", audio: "R-01.mp3" },
    { letter: "<span class='highlight'>Bo</span><span class='rest'>tas</span>", audio: "R-02.mp3" },
    { letter: "<span class='highlight'>Bu</span><span class='rest'>rro</span>", audio: "R-03.mp3" },
    { letter: "<span class='highlight'>Be</span><span class='rest'>bé</span>", audio: "R-04.mp3" },
    { letter: "<span class='highlight'>Bi</span><span class='rest'>cicleta</span>", audio: "R-05.mp3" },
    { letter: "<span class='highlight'>Ca</span><span class='rest'>sa</span>", audio: "R---06.mp3" },
    { letter: "<span class='highlight'>Co</span><span class='rest'>cina</span>", audio: "R-07.mp3" },
    { letter: "<span class='highlight'>Cu</span><span class='rest'>chara</span>", audio: "R-08.mp3" },
    { letter: "<span class='highlight'>Ce</span><span class='rest'>rilla</span>", audio: "R---09.mp3" },
    { letter: "<span class='highlight'>Ci</span><span class='rest'>nturón</span>", audio: "R-10.mp3" },
    { letter: "<span class='highlight'>Cha</span><span class='rest'>queta</span>", audio: "R-11.mp3" },
    { letter: "<span class='highlight'>Cho</span><span class='rest'>colate</span>", audio: "R-12.mp3" },
    { letter: "<span class='highlight'>Chu</span><span class='rest'>rro</span>", audio: "R-13.mp3" },
    { letter: "<span class='highlight'>Che</span><span class='rest'>que</span>", audio: "R-14.mp3" },
    { letter: "<span class='highlight'>Chi</span><span class='rest'>cle</span>", audio: "R-15.mp3" },
    { letter: "<span class='highlight'>Dá</span><span class='rest'>tiles</span>", audio: "R-16.mp3" },
    { letter: "<span class='highlight'>Do</span><span class='rest'>s</span>", audio: "R-17.mp3" },
    { letter: "<span class='highlight'>Du</span><span class='rest'>lces</span>", audio: "R-18.mp3" },
    { letter: "<span class='highlight'>De</span><span class='rest'>do</span>", audio: "R-19.mp3" },
    { letter: "<span class='highlight'>Di</span><span class='rest'>nero</span>", audio: "R-20.mp3" },
    { letter: "<span class='highlight'>Fa</span><span class='rest'>rola</span>", audio: "R-21.mp3" },
    { letter: "<span class='highlight'>Fo</span><span class='rest'>to</span>", audio: "R-22.mp3" },
    { letter: "<span class='highlight'>Fú</span><span class='rest'>tbol</span>", audio: "R-23.mp3" },
    { letter: "<span class='highlight'>Fe</span><span class='rest'>cha</span>", audio: "R-24.mp3" },
    { letter: "<span class='highlight'>Fi</span><span class='rest'>chas</span>", audio: "R-25.mp3" },
    { letter: "<span class='highlight'>Ga</span><span class='rest'>to</span>", audio: "R-26.mp3" },
    { letter: "<span class='highlight'>Go</span><span class='rest'>ta</span>", audio: "R-27.mp3" },
    { letter: "<span class='highlight'>Gu</span><span class='rest'>sano</span>", audio: "R---28.mp3" },
    { letter: "<span class='highlight'>Ge</span><span class='rest'>l</span>", audio: "R-29.mp3" },
    { letter: "<span class='highlight'>Gi</span><span class='rest'>mnasio</span>", audio: "R-30.mp3" },
    { letter: "<span class='highlight'>Gue</span><span class='rest'>rra</span>", audio: "R---31.mp3" },
    { letter: "<span class='highlight'>Gui</span><span class='rest'>tarra</span>", audio: "R---32.mp3" },
    { letter: "<span class='highlight'>Que</span><span class='rest'>so</span>", audio: "R-33.mp3" },
    { letter: "<span class='highlight'>Qui</span><span class='rest'>nce</span>", audio: "R-34.mp3" },
    { letter: "<span class='highlight'>Ha</span><span class='rest'>cha</span>", audio: "R-35.mp3" },
    { letter: "<span class='highlight'>Ho</span><span class='rest'>ja</span>", audio: "R-36.mp3" },
    { letter: "<span class='highlight'>Hu</span><span class='rest'>mo</span>", audio: "R-37.mp3" },
    { letter: "<span class='highlight'>He</span><span class='rest'>lado</span>", audio: "R-38.mp3" },
    { letter: "<span class='highlight'>Hi</span><span class='rest'>go</span>", audio: "R-39.mp3" },
    { letter: "<span class='highlight'>Ja</span><span class='rest'>rra</span>", audio: "R-40.mp3" },
    { letter: "<span class='highlight'>Jo</span><span class='rest'>yas</span>", audio: "R-41.mp3" },
    { letter: "<span class='highlight'>Ju</span><span class='rest'>guete</span>", audio: "R-42.mp3" },
    { letter: "<span class='highlight'>Je</span><span class='rest'>fe</span>", audio: "R-43.mp3" },
    { letter: "<span class='highlight'>Ji</span><span class='rest'>rafa</span>", audio: "R-44.mp3" },
    { letter: "<span class='highlight'>Ka</span><span class='rest'>yak</span>", audio: "R---45.mp3" },
    { letter: "<span class='highlight'>Ko</span><span class='rest'>ala</span>", audio: "R-46.mp3" },
    { letter: "<span class='highlight'>Ku</span><span class='rest'>fiya</span>", audio: "R-47.mp3" },
    { letter: "<span class='highlight'>Ke</span><span class='rest'>tchup</span>", audio: "R-48.mp3" },
    { letter: "<span class='highlight'>Ki</span><span class='rest'>wi</span>", audio: "R-49.mp3" },
    { letter: "<span class='highlight'>Lá</span><span class='rest'>piz</span>", audio: "R-50.mp3" },
    { letter: "<span class='highlight'>Lo</span><span class='rest'>ro</span>", audio: "R-51.mp3" },
    { letter: "<span class='highlight'>Lu</span><span class='rest'>z</span>", audio: "R-52.mp3" },
    { letter: "<span class='highlight'>Le</span><span class='rest'>chuga</span>", audio: "R---53.mp3" },
    { letter: "<span class='highlight'>Li</span><span class='rest'>bro</span>", audio: "R-54.mp3" },
    { letter: "<span class='highlight'>Ma</span><span class='rest'>nzana</span>", audio: "R-55.mp3" },
    { letter: "<span class='highlight'>Mo</span><span class='rest'>nedas</span>", audio: "R-56.mp3" },
    { letter: "<span class='highlight'>Mu</span><span class='rest'>ñeca</span>", audio: "R-57.mp3" },
    { letter: "<span class='highlight'>Me</span><span class='rest'>sa</span>", audio: "R-58.mp3" },
    { letter: "<span class='highlight'>Mi</span><span class='rest'>sil</span>", audio: "R-59.mp3" },
    { letter: "<span class='highlight'>Na</span><span class='rest'>ranja</span>", audio: "R-60.mp3" },
    { letter: "<span class='highlight'>No</span><span class='rest'>ta</span>", audio: "R-61.mp3" },
    { letter: "<span class='highlight'>Nu</span><span class='rest'>do</span>", audio: "R-62.mp3" },
    { letter: "<span class='highlight'>Ne</span><span class='rest'>vera</span>", audio: "R-63.mp3" },
    { letter: "<span class='highlight'>Ni</span><span class='rest'>do</span>", audio: "R-64.mp3" },
    { letter: "Espa<span class='highlight'>ña</span><span class='rest'></span>", audio: "R-65.mp3" },
    { letter: "Mo<span class='highlight'>ño</span>", audio: "R-66.mp3" },
    { letter: "Ca<span class='highlight'>ñu</span><span class='rest'>ela</span>", audio: "R-67.mp3" },
    { letter: "Ba<span class='highlight'>ñe</span><span class='rest'>ra</span>", audio: "R-68.mp3" },
    { letter: "Ba<span class='highlight'>ñi</span><span class='rest'>stas</span>", audio: "R-69.mp3" },
    { letter: "<span class='highlight'>Pa</span><span class='rest'>n</span>", audio: "R-70.mp3" },
    { letter: "<span class='highlight'>Po</span><span class='rest'>zo</span>", audio: "R-71.mp3" },
    { letter: "<span class='highlight'>Pu</span><span class='rest'>lsera</span>", audio: "R-72.mp3" },
    { letter: "<span class='highlight'>Pe</span><span class='rest'>z</span>", audio: "R-73.mp3" },
    { letter: "<span class='highlight'>Pi</span><span class='rest'>ña</span>", audio: "R-74.mp3" },
    { letter: "<span class='highlight'>Ra</span><span class='rest'>dio</span>", audio: "R-75.mp3" },
    { letter: "<span class='highlight'>Ro</span><span class='rest'>pa</span>", audio: "R-76.mp3" },
    { letter: "<span class='highlight'>Ru</span><span class='rest'>leta</span>", audio: "R-77.mp3" },
    { letter: "<span class='highlight'>Re</span><span class='rest'>loj</span>", audio: "R-78.mp3" },
    { letter: "<span class='highlight'>Ri</span><span class='rest'>noceronte</span>", audio: "R-79.mp3" },
    { letter: "<span class='highlight'>Pe</span><span class='rest'>ra</span>", audio: "R-80.mp3" },
    { letter: "<span class='highlight'>Pe</span><span class='rest'>rro</span>", audio: "R-81.mp3" },
    { letter: "<span class='highlight'>Sa</span><span class='rest'>lero</span>", audio: "R---82.mp3" },
    { letter: "<span class='highlight'>So</span><span class='rest'>fá</span>", audio: "R-83.mp3" },
    { letter: "<span class='highlight'>Su</span><span class='rest'>dadera</span>", audio: "R---84.mp3" },
    { letter: "<span class='highlight'>Se</span><span class='rest'>llo</span>", audio: "R---85.mp3" },
    { letter: "<span class='highlight'>Si</span><span class='rest'>lla</span>", audio: "R-86.mp3" },
    { letter: "<span class='highlight'>Ta</span><span class='rest'>za</span>", audio: "R-87.mp3" },
    { letter: "<span class='highlight'>To</span><span class='rest'>rre</span>", audio: "R-88.mp3" },
    { letter: "<span class='highlight'>Tú</span><span class='rest'>nel</span>", audio: "R-89.mp3" },
    { letter: "<span class='highlight'>Te</span><span class='rest'>léfono</span>", audio: "R---90.mp3" },
    { letter: "<span class='highlight'>Ti</span><span class='rest'>gre</span>", audio: "R-91.mp3" },
    { letter: "<span class='highlight'>Va</span><span class='rest'>so</span>", audio: "R-92.mp3" },
    { letter: "<span class='highlight'>Vo</span><span class='rest'>lante</span>", audio: "R-93.mp3" },
    { letter: "<span class='highlight'>Ve</span><span class='rest'>stido</span>", audio: "R-94.mp3" },
    { letter: "<span class='highlight'>Vi</span><span class='rest'>nilo</span>", audio: "R-95.mp3" },
    { letter: "<span class='highlight'>Ya</span><span class='rest'>te</span>", audio: "R-96.mp3" },
    { letter: "<span class='highlight'>Yo</span><span class='rest'>gur</span>", audio: "R-97.mp3" },
    { letter: "<span class='highlight'>Yu</span><span class='rest'>nque</span>", audio: "R-98.mp3" },
    { letter: "<span class='highlight'>Ye</span><span class='rest'>ma</span>", audio: "R-99.mp3" },
    { letter: "<span class='highlight'>Za</span><span class='rest'>patos</span>", audio: "R-100.mp3" },
    { letter: "<span class='highlight'>Zo</span><span class='rest'>rro</span>", audio: "R-101.mp3" },
    { letter: "<span class='highlight'>Zu</span><span class='rest'>mo</span>", audio: "R-102.mp3" },
    { letter: "<span class='highlight'>Zi</span><span class='rest'>nc</span>", audio: "R-103.mp3" }
];


const translations = {
    en: [
        { spanish: "banco", translation: "bank" },
        { spanish: "botas", translation: "boots" },
        { spanish: "burro", translation: "donkey" },
        { spanish: "bebé", translation: "baby" },
        { spanish: "bicicleta", translation: "bicycle" },
        { spanish: "casa", translation: "house" },
        { spanish: "cocina", translation: "kitchen" },
        { spanish: "cuchara", translation: "spoon" },
        { spanish: "cerilla", translation: "match" },
        { spanish: "cinturón", translation: "belt" },
        { spanish: "chaqueta", translation: "jacket" },
        { spanish: "chocolate", translation: "chocolate" },
        { spanish: "churro", translation: "churro" },
        { spanish: "cheque", translation: "check" },
        { spanish: "chicle", translation: "gum" },
        { spanish: "dátiles", translation: "dates" },
        { spanish: "dos", translation: "two" },
        { spanish: "dulces", translation: "sweets" },
        { spanish: "dedo", translation: "finger" },
        { spanish: "dinero", translation: "money" },
        { spanish: "farola", translation: "streetlight" },
        { spanish: "foto", translation: "photo" },
        { spanish: "fútbol", translation: "football" },
        { spanish: "fecha", translation: "date" },
        { spanish: "fichas", translation: "chips" },
        { spanish: "gato", translation: "cat" },
        { spanish: "gota", translation: "drop" },
        { spanish: "gusano", translation: "worm" },
        { spanish: "gel", translation: "gel" },
        { spanish: "gimnasio", translation: "gym" },
        { spanish: "guerra", translation: "war" },
        { spanish: "guitarra", translation: "guitar" },
        { spanish: "queso", translation: "cheese" },
        { spanish: "quince", translation: "fifteen" },
        { spanish: "hacha", translation: "axe" },
        { spanish: "hoja", translation: "leaf" },
        { spanish: "humo", translation: "smoke" },
        { spanish: "helado", translation: "ice cream" },
        { spanish: "higo", translation: "fig" },
        { spanish: "jarra", translation: "pitcher" },
        { spanish: "joyas", translation: "jewelry" },
        { spanish: "juguete", translation: "toy" },
        { spanish: "jefe", translation: "boss" },
        { spanish: "jirafa", translation: "giraffe" },
        { spanish: "kayak", translation: "kayak" },
        { spanish: "koala", translation: "koala" },
        { spanish: "kufiya", translation: "keffiyeh" },
        { spanish: "ketchup", translation: "ketchup" },
        { spanish: "kiwi", translation: "kiwi" },
        { spanish: "lápiz", translation: "pencil" },
        { spanish: "loro", translation: "parrot" },
        { spanish: "luz", translation: "light" },
        { spanish: "lechuga", translation: "lettuce" },
        { spanish: "libro", translation: "book" },
        { spanish: "manzana", translation: "apple" },
        { spanish: "monedas", translation: "coins" },
        { spanish: "muñeca", translation: "doll" },
        { spanish: "mesa", translation: "table" },
        { spanish: "misil", translation: "missile" },
        { spanish: "naranja", translation: "orange" },
        { spanish: "nota", translation: "note" },
        { spanish: "nudo", translation: "knot" },
        { spanish: "nevera", translation: "refrigerator" },
        { spanish: "nido", translation: "nest" },
        { spanish: "España", translation: "Spain" },
        { spanish: "moño", translation: "bun" },
        { spanish: "cañuela", translation: "small cane" },
        { spanish: "bañera", translation: "bathtub" },
        { spanish: "bañistas", translation: "bathers" },
        { spanish: "pan", translation: "bread" },
        { spanish: "pozo", translation: "well" },
        { spanish: "pulsera", translation: "bracelet" },
        { spanish: "pez", translation: "fish" },
        { spanish: "piña", translation: "pineapple" },
        { spanish: "radio", translation: "radio" },
        { spanish: "ropa", translation: "clothes" },
        { spanish: "ruleta", translation: "roulette" },
        { spanish: "reloj", translation: "watch" },
        { spanish: "rinoceronte", translation: "rhinoceros" },
        { spanish: "pera", translation: "pear" },
        { spanish: "perro", translation: "dog" },
        { spanish: "salero", translation: "salt shaker" },
        { spanish: "sofá", translation: "sofa" },
        { spanish: "sudadera", translation: "sweatshirt" },
        { spanish: "sello", translation: "stamp" },
        { spanish: "silla", translation: "chair" },
        { spanish: "taza", translation: "cup" },
        { spanish: "torre", translation: "tower" },
        { spanish: "túnel", translation: "tunnel" },
        { spanish: "teléfono", translation: "telephone" },
        { spanish: "tigre", translation: "tiger" },
        { spanish: "vaso", translation: "glass" },
        { spanish: "volante", translation: "steering wheel" },
        { spanish: "vestido", translation: "dress" },
        { spanish: "vinilo", translation: "vinyl" },
        { spanish: "yate", translation: "yacht" },
        { spanish: "yogur", translation: "yogurt" },
        { spanish: "yunque", translation: "anvil" },
        { spanish: "yema", translation: "yolk" },
        { spanish: "zapatos", translation: "shoes" },
        { spanish: "zorro", translation: "fox" },
        { spanish: "zumo", translation: "juice" },
        { spanish: "zinc", translation: "zinc" }
    ],
    fr: [
        { spanish: "banco", translation: "banque" },
        { spanish: "botas", translation: "bottes" },
        { spanish: "burro", translation: "âne" },
        { spanish: "bebé", translation: "bébé" },
        { spanish: "bicicleta", translation: "vélo" },
        { spanish: "casa", translation: "maison" },
        { spanish: "cocina", translation: "cuisine" },
        { spanish: "cuchara", translation: "cuillère" },
        { spanish: "cerilla", translation: "allumette" },
        { spanish: "cinturón", translation: "ceinture" },
        { spanish: "chaqueta", translation: "veste" },
        { spanish: "chocolate", translation: "chocolat" },
        { spanish: "churro", translation: "churro" },
        { spanish: "cheque", translation: "chèque" },
        { spanish: "chicle", translation: "chewing-gum" },
        { spanish: "dátiles", translation: "dattes" },
        { spanish: "dos", translation: "deux" },
        { spanish: "dulces", translation: "bonbons" },
        { spanish: "dedo", translation: "doigt" },
        { spanish: "dinero", translation: "argent" },
        { spanish: "farola", translation: "réverbère" },
        { spanish: "foto", translation: "photo" },
        { spanish: "fútbol", translation: "football" },
        { spanish: "fecha", translation: "date" },
        { spanish: "fichas", translation: "jetons" },
        { spanish: "gato", translation: "chat" },
        { spanish: "gota", translation: "goutte" },
        { spanish: "gusano", translation: "ver" },
        { spanish: "gel", translation: "gel" },
        { spanish: "gimnasio", translation: "gymnase" },
        { spanish: "guerra", translation: "guerre" },
        { spanish: "guitarra", translation: "guitare" },
        { spanish: "queso", translation: "fromage" },
        { spanish: "quince", translation: "quinze" },
        { spanish: "hacha", translation: "hache" },
        { spanish: "hoja", translation: "feuille" },
        { spanish: "humo", translation: "fumée" },
        { spanish: "helado", translation: "glace" },
        { spanish: "higo", translation: "figue" },
        { spanish: "jarra", translation: "pichet" },
        { spanish: "joyas", translation: "bijoux" },
        { spanish: "juguete", translation: "jouet" },
        { spanish: "jefe", translation: "patron" },
        { spanish: "jirafa", translation: "girafe" },
        { spanish: "kayak", translation: "kayak" },
        { spanish: "koala", translation: "koala" },
        { spanish: "kufiya", translation: "keffieh" },
        { spanish: "ketchup", translation: "ketchup" },
        { spanish: "kiwi", translation: "kiwi" },
        { spanish: "lápiz", translation: "crayon" },
        { spanish: "loro", translation: "perroquet" },
        { spanish: "luz", translation: "lumière" },
        { spanish: "lechuga", translation: "laitue" },
        { spanish: "libro", translation: "livre" },
        { spanish: "manzana", translation: "pomme" },
        { spanish: "monedas", translation: "pièces" },
        { spanish: "muñeca", translation: "poupée" },
        { spanish: "mesa", translation: "table" },
        { spanish: "misil", translation: "missile" },
        { spanish: "naranja", translation: "orange" },
        { spanish: "nota", translation: "note" },
        { spanish: "nudo", translation: "nœud" },
        { spanish: "nevera", translation: "réfrigérateur" },
        { spanish: "nido", translation: "nid" },
        { spanish: "España", translation: "Espagne" },
        { spanish: "moño", translation: "chignon" },
        { spanish: "cañuela", translation: "petite canne" },
        { spanish: "bañera", translation: "baignoire" },
        { spanish: "bañistas", translation: "baigneurs" },
        { spanish: "pan", translation: "pain" },
        { spanish: "pozo", translation: "puits" },
        { spanish: "pulsera", translation: "bracelet" },
        { spanish: "pez", translation: "poisson" },
        { spanish: "piña", translation: "ananas" },
        { spanish: "radio", translation: "radio" },
        { spanish: "ropa", translation: "vêtements" },
        { spanish: "ruleta", translation: "roulette" },
        { spanish: "reloj", translation: "montre" },
        { spanish: "rinoceronte", translation: "rhinocéros" },
        { spanish: "pera", translation: "poire" },
        { spanish: "perro", translation: "chien" },
        { spanish: "salero", translation: "salière" },
        { spanish: "sofá", translation: "canapé" },
        { spanish: "sudadera", translation: "sweat-shirt" },
        { spanish: "sello", translation: "timbre" },
        { spanish: "silla", translation: "chaise" },
        { spanish: "taza", translation: "tasse" },
        { spanish: "torre", translation: "tour" },
        { spanish: "túnel", translation: "tunnel" },
        { spanish: "teléfono", translation: "téléphone" },
        { spanish: "tigre", translation: "tigre" },
        { spanish: "vaso", translation: "verre" },
        { spanish: "volante", translation: "volant" },
        { spanish: "vestido", translation: "robe" },
        { spanish: "vinilo", translation: "vinyle" },
        { spanish: "yate", translation: "yacht" },
        { spanish: "yogur", translation: "yaourt" },
        { spanish: "yunque", translation: "enclume" },
        { spanish: "yema", translation: "jaune d'œuf" },
        { spanish: "zapatos", translation: "chaussures" },
        { spanish: "zorro", translation: "renard" },
        { spanish: "zumo", translation: "jus" },
        { spanish: "zinc", translation: "zinc" }
    ],
    ar: [
        { spanish: "banco", translation: "بنك" },
        { spanish: "botas", translation: "أحذية" },
        { spanish: "burro", translation: "حمار" },
        { spanish: "bebé", translation: "طفل" },
        { spanish: "bicicleta", translation: "دراجة" },
        { spanish: "casa", translation: "بيت" },
        { spanish: "cocina", translation: "مطبخ" },
        { spanish: "cuchara", translation: "ملعقة" },
        { spanish: "cerilla", translation: "عود ثقاب" },
        { spanish: "cinturón", translation: "حزام" },
        { spanish: "chaqueta", translation: "سترة" },
        { spanish: "chocolate", translation: "شوكولاتة" },
        { spanish: "churro", translation: "تشورو" },
        { spanish: "cheque", translation: "شيك" },
        { spanish: "chicle", translation: "علكة" },
        { spanish: "dátiles", translation: "تمور" },
        { spanish: "dos", translation: "اثنان" },
        { spanish: "dulces", translation: "حلويات" },
        { spanish: "dedo", translation: "إصبع" },
        { spanish: "dinero", translation: "مال" },
        { spanish: "farola", translation: "عمود إنارة" },
        { spanish: "foto", translation: "صورة" },
        { spanish: "fútbol", translation: "كرة القدم" },
        { spanish: "fecha", translation: "تاريخ" },
        { spanish: "fichas", translation: "رقائق" },
        { spanish: "gato", translation: "قط" },
        { spanish: "gota", translation: "قطرة" },
        { spanish: "gusano", translation: "دودة" },
        { spanish: "gel", translation: "جل" },
        { spanish: "gimnasio", translation: "صالة رياضية" },
        { spanish: "guerra", translation: "حرب" },
        { spanish: "guitarra", translation: "جيتار" },
        { spanish: "queso", translation: "جبن" },
        { spanish: "quince", translation: "خمسة عشر" },
        { spanish: "hacha", translation: "فأس" },
        { spanish: "hoja", translation: "ورقة" },
        { spanish: "humo", translation: "دخان" },
        { spanish: "helado", translation: "مثلجات" },
        { spanish: "higo", translation: "تين" },
        { spanish: "jarra", translation: "إبريق" },
        { spanish: "joyas", translation: "مجوهرات" },
        { spanish: "juguete", translation: "لعبة" },
        { spanish: "jefe", translation: "رئيس" },
        { spanish: "jirafa", translation: "زرافة" },
        { spanish: "kayak", translation: "كاياك" },
        { spanish: "koala", translation: "كوالا" },
        { spanish: "kufiya", translation: "كوفية" },
        { spanish: "ketchup", translation: "كاتشب" },
        { spanish: "kiwi", translation: "كيوي" },
        { spanish: "lápiz", translation: "قلم رصاص" },
        { spanish: "loro", translation: "ببغاء" },
        { spanish: "luz", translation: "ضوء" },
        { spanish: "lechuga", translation: "خس" },
        { spanish: "libro", translation: "كتاب" },
        { spanish: "manzana", translation: "تفاحة" },
        { spanish: "monedas", translation: "عملات" },
        { spanish: "muñeca", translation: "دمية" },
        { spanish: "mesa", translation: "طاولة" },
        { spanish: "misil", translation: "صاروخ" },
        { spanish: "naranja", translation: "برتقال" },
        { spanish: "nota", translation: "مذكرة" },
        { spanish: "nudo", translation: "عقدة" },
        { spanish: "nevera", translation: "ثلاجة" },
        { spanish: "nido", translation: "عش" },
        { spanish: "España", translation: "إسبانيا" },
        { spanish: "moño", translation: "كعكة شعر" },
        { spanish: "cañuela", translation: "قصبة صغيرة" },
        { spanish: "bañera", translation: "حوض استحمام" },
        { spanish: "bañistas", translation: "مستحمون" },
        { spanish: "pan", translation: "خبز" },
        { spanish: "pozo", translation: "بئر" },
        { spanish: "pulsera", translation: "سوار" },
        { spanish: "pez", translation: "سمكة" },
        { spanish: "piña", translation: "أناناس" },
        { spanish: "radio", translation: "راديو" },
        { spanish: "ropa", translation: "ملابس" },
        { spanish: "ruleta", translation: "روليت" },
        { spanish: "reloj", translation: "ساعة" },
        { spanish: "rinoceronte", translation: "وحيد القرن" },
        { spanish: "pera", translation: "إجاصة" },
        { spanish: "perro", translation: "كلب" },
        { spanish: "salero", translation: "ملاحة" },
        { spanish: "sofá", translation: "أريكة" },
        { spanish: "sudadera", translation: "كنزة" },
        { spanish: "sello", translation: "طابع" },
        { spanish: "silla", translation: "كرسي" },
        { spanish: "taza", translation: "كوب" },
        { spanish: "torre", translation: "برج" },
        { spanish: "túnel", translation: "نفق" },
        { spanish: "teléfono", translation: "هاتف" },
        { spanish: "tigre", translation: "نمر" },
        { spanish: "vaso", translation: "كأس" },
        { spanish: "volante", translation: "مقود" },
        { spanish: "vestido", translation: "فستان" },
        { spanish: "vinilo", translation: "فينيل" },
        { spanish: "yate", translation: "يخت" },
        { spanish: "yogur", translation: "زبادي" },
        { spanish: "yunque", translation: "سندان" },
        { spanish: "yema", translation: "صفار البيض" },
        { spanish: "zapatos", translation: "أحذية" },
        { spanish: "zorro", translation: "ثعلب" },
        { spanish: "zumo", translation: "عصير" },
        { spanish: "zinc", translation: "زنك" }
    ]
};


function updateTranslations(language) {
    const translationCells = document.querySelectorAll('.translation-cell');
    const selectedTranslations = translations[language];
    
    translationCells.forEach((cell, index) => {
        if (selectedTranslations && selectedTranslations[index]) {
            cell.textContent = selectedTranslations[index].translation;
        }
    });
}





        const baseUrl = 'https://fawzinoo.github.io/audios/';
        let playedCount = 0;
        let currentPlaying = null;

        // Variables globales (agregar esta nueva variable)
        let playedLetters = new Set(); // Para rastrear letras ya reproducidas individualmente

        // Añade o reemplaza estas variables globales:
        let isPlayingSequence = false;
        let isPausedSequence = false;
        let sequenceIndex = 0;

        let lastPlayedIndex = -1; // Para rastrear la última posición reproducida

        // Función para guardar progreso en localStorage
// Modificar la función saveProgress para incluir el estado de reproducción
function saveProgress() {
    const progressData = {
        playedLetters: Array.from(playedLetters),
        playedCount: playedCount,
        lastPlayedIndex: lastPlayedIndex,
        sequenceIndex: sequenceIndex,
        isPlayingSequence: isPlayingSequence,
        isPausedSequence: isPausedSequence,
        timestamp: Date.now()
    };
localStorage.setItem('silabasProgress', JSON.stringify(progressData));
}

// Función para cargar progreso desde localStorage
function loadProgress() {
const savedData = localStorage.getItem('silabasProgress');
    if (savedData) {
        const progressData = JSON.parse(savedData);
        
        // Restaurar datos
        playedLetters = new Set(progressData.playedLetters || []);
        playedCount = progressData.playedCount || 0;
        lastPlayedIndex = progressData.lastPlayedIndex || -1;
        sequenceIndex = progressData.sequenceIndex || 0;
        isPlayingSequence = progressData.isPlayingSequence || false;
        isPausedSequence = progressData.isPausedSequence || false;
        
        // Actualizar UI
        document.getElementById('played-count').textContent = playedCount;
        updateProgress();
        
        // Restaurar sombra dorada en la última posición
        if (lastPlayedIndex >= 0) {
            const rows = document.querySelectorAll('#alphabet-tbody tr');
            const targetRow = rows[lastPlayedIndex];
            if (targetRow) {
                targetRow.classList.add('playing-row');
                // Hacer scroll a la posición guardada
                scrollToPlayingRow(lastPlayedIndex);
            }
        }
        
        // Restaurar estado de los botones si estaba en reproducción
        if (isPlayingSequence || isPausedSequence) {
            const playAllBtn = document.getElementById('play-all-btn');
            const playAllIcon = playAllBtn.querySelector('i');
            const playAllText = playAllBtn.querySelector('span');
            
            if (isPausedSequence) {
                // Restaurar estado pausado
                playAllIcon.className = 'fas fa-play-circle';
                playAllText.textContent = ' Reanudar';
                playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
                playAllBtn.style.color = '#2d3748';
                enablePlayButtons();
            } else {
                // Marcar como pausado para que el usuario pueda continuar
                isPausedSequence = true;
                isPlayingSequence = false;
                playAllIcon.className = 'fas fa-play-circle';
                playAllText.textContent = ' Reanudar';
                playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
                playAllBtn.style.color = '#2d3748';
                enablePlayButtons();
            }
            
            // Mostrar botón detener
            const stopBtn = document.getElementById('stop-btn');
            stopBtn.style.display = 'flex';
            playAllBtn.style.borderRadius = '25px 0 0 25px';
        }
    }
}

// Función para limpiar progreso
function clearProgress() {
localStorage.removeItem('silabasProgress');
    lastPlayedIndex = -1;
    // Remover todas las sombras doradas
    const rows = document.querySelectorAll('#alphabet-tbody tr');
    rows.forEach(row => row.classList.remove('playing-row'));
}

// Generar la tabla
function generateTable() {
    const tbody = document.getElementById('alphabet-tbody');
    
    alphabetData.forEach((item, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td class="letter-cell">${item.letter}</td>
            <td class="translation-cell">${item.letter}</td>
            <td>
                <button class="play-button" onclick="playAudio(${index})">
                    <i class="fas fa-play"></i>
                    <span>Play</span>
                </button>
            </td>
        `;
        tbody.appendChild(row);
    });

    document.getElementById('total-letters').textContent = alphabetData.length;
}

// Actualizar contador solo para reproducciones individuales
function updatePlayedCount() {
    playedCount++;
    document.getElementById('played-count').textContent = playedCount;
    updateProgress();
}

      

        // Función para hacer scroll a la fila que se está reproduciendo
function scrollToPlayingRow(index) {
    const rows = document.querySelectorAll('#alphabet-tbody tr');
    const targetRow = rows[index];
    
    if (targetRow) {
        targetRow.scrollIntoView({
            behavior: 'smooth',
            block: 'center',
            inline: 'nearest'
        });
    }
}

// Reemplazar la función playAudio con esta versión corregida
function playAudio(index) {
    // Bloquear si está reproduciendo secuencia
    if (isPlayingSequence) {
        return;
    }
    
    const button = document.querySelectorAll('.play-button')[index];
    const icon = button.querySelector('i');
    const span = button.querySelector('span');
    const row = button.closest('tr');
    
    // Si el botón está actualmente reproduciendo, pausar
    if (button.classList.contains('playing')) {
        if (currentPlaying && !currentPlaying.paused) {
            currentPlaying.pause();
            currentPlaying.currentTime = 0;
        }
        resetButton(button);
        row.classList.remove('playing-row');
        lastPlayedIndex = -1; // Resetear la posición
        saveProgress(); // Guardar que no hay reproducción activa
        return;
    }
    
    // Hacer scroll a la fila
    scrollToPlayingRow(index);
    
    // Detener audio anterior si existe
    if (currentPlaying && !currentPlaying.paused) {
        currentPlaying.pause();
        currentPlaying.currentTime = 0;
        resetPreviousButton();
    }

    // Crear y reproducir nuevo audio
    const audio = new Audio(baseUrl + alphabetData[index].audio);
    currentPlaying = audio;

    // Cambiar estado del botón manteniendo el tamaño original
    button.classList.add('playing');
    icon.className = 'fas fa-stop';
    span.innerHTML = `
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
    `;

    // Agregar efecto dorado a la fila
    row.classList.add('playing-row');
    lastPlayedIndex = index; // Guardar la posición actual
    saveProgress(); // Guardar progreso inmediatamente

    // Reproducir audio
    audio.play().catch(error => {
        console.error('Error al reproducir audio:', error);
        resetButton(button);
        row.classList.remove('playing-row');
        lastPlayedIndex = -1;
        saveProgress();
    });

    // Cuando termine el audio (solo contar si es reproducción individual)
    audio.onended = () => {
        resetButton(button);
        row.classList.remove('playing-row');
        lastPlayedIndex = -1; // Resetear cuando termine
        // Solo contar si no se ha reproducido antes
        if (!playedLetters.has(index)) {
            playedLetters.add(index);
            playedCount = playedLetters.size;
            document.getElementById('played-count').textContent = playedCount;
            updateProgress();
        }
        // Guardar progreso después de reproducción individual
        saveProgress();
    };

    // Si hay error
    audio.onerror = () => {
        console.error('Error al cargar audio:', alphabetData[index].audio);
        resetButton(button);
        row.classList.remove('playing-row');
        lastPlayedIndex = -1;
        saveProgress();
    };
}
        // Resetear botón anterior
        function resetPreviousButton() {
            const playingButtons = document.querySelectorAll('.play-button.playing');
            playingButtons.forEach(button => resetButton(button));
        }

        // Resetear estado del botón
        function resetButton(button) {
            const icon = button.querySelector('i');
            const span = button.querySelector('span');
            const row = button.closest('tr');
            
            button.classList.remove('playing');
            icon.className = 'fas fa-play';
            span.textContent = 'Play';
            
            // Remover efecto dorado de la fila
            if (row) {
                row.classList.remove('playing-row');
            }
        }

        // Agregar progreso
        function updateProgress() {
            const percentage = Math.round((playedCount / alphabetData.length) * 100);
            const progressBar = document.getElementById('progress-bar');
            const progressPercentage = document.getElementById('progress-percentage');
            
            if (progressBar) {
                progressBar.style.width = percentage + '%';
            }
            if (progressPercentage) {
                progressPercentage.textContent = percentage;
            }
        }

        // Función para reproducir todas las letras en secuencia
        function playAll() {
            if (isPlayingSequence && !isPausedSequence) return; // Ya está reproduciendo

            const playAllBtn = document.getElementById('play-all-btn');
            const playAllIcon = playAllBtn.querySelector('i');
            const playAllText = playAllBtn.querySelector('span');

            // Quitar el efecto de parpadeo si existe
            playAllBtn.classList.remove('play-again-blink');

            // Restaura el fondo verde
            playAllBtn.style.background = 'linear-gradient(135deg, #48bb78, #38a169)';
            playAllBtn.style.color = 'white';

            // Verificar si es una nueva reproducción (después de "Reproducir de nuevo")
            const isNewReproduction = playAllText.textContent.includes('Reproducir de nuevo');

            if (isPausedSequence) {
                // Reanudar
                isPausedSequence = false;
                isPlayingSequence = true;
                playAllIcon.className = 'fas fa-pause'; // Icono de pausa
                playAllText.textContent = ' Pausar ';
                disablePlayButtons(); // Deshabilitar botones individuales
                playNextInSequence();
                return;
            }

            // Si es una nueva reproducción, restablecer el progreso
            if (isNewReproduction) {
                // Restablecer variables de progreso
                playedLetters.clear();
                playedCount = 0;
                
                // Actualizar la UI del progreso
                document.getElementById('played-count').textContent = playedCount;
                const progressBar = document.getElementById('progress-bar');
                const progressPercentage = document.getElementById('progress-percentage');
                
                if (progressBar) {
                    progressBar.style.width = '0%';
                }
                if (progressPercentage) {
                    progressPercentage.textContent = '0';
                }
            }

            // Iniciar desde el principio
            isPlayingSequence = true;
            isPausedSequence = false;
            sequenceIndex = 0;
            playAllIcon.className = 'fas fa-pause'; // Icono de pausa
            playAllText.textContent = ' Pausar ';
            disablePlayButtons(); // Deshabilitar botones individuales
            playNextInSequence();
        }

        function pauseAll() {
            isPausedSequence = true;
            isPlayingSequence = false;
            if (currentPlaying && !currentPlaying.paused) {
                currentPlaying.pause();
            }
            
            // Resetear el botón que está actualmente reproduciéndose PERO mantener la sombra
            const playingButtons = document.querySelectorAll('.play-button.playing');
            playingButtons.forEach(button => {
                resetButton(button);
                // Mantener la sombra dorada en la fila actual
                const row = button.closest('tr');
                if (row) {
                    row.classList.add('playing-row');
                    // Actualizar lastPlayedIndex
                    const buttonIndex = Array.from(document.querySelectorAll('.play-button')).indexOf(button);
                    lastPlayedIndex = buttonIndex;
                }
            });
            
            // Guardar progreso
            saveProgress();
            
            // Cambia el icono a "play"
            const playAllBtn = document.getElementById('play-all-btn');
            const playAllIcon = playAllBtn.querySelector('i');
            const playAllText = playAllBtn.querySelector('span');
            playAllIcon.className = 'fas fa-play-circle';
            playAllText.textContent = ' Reanudar';
            // Cambia el fondo a amarillo
            playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
            playAllBtn.style.color = '#2d3748';
            
            // Habilitar botones individuales cuando se pausa
            enablePlayButtons();
        }

        // Modificar la función playNextInSequence para guardar progreso inmediatamente
function playNextInSequence() {
    if (!isPlayingSequence || isPausedSequence || sequenceIndex >= alphabetData.length) {
        isPlayingSequence = false;
        return;
    }

    const button = document.querySelectorAll('.play-button')[sequenceIndex];
    const icon = button.querySelector('i');
    const span = button.querySelector('span');
    const row = button.closest('tr');

    // Remover sombra dorada anterior
    if (lastPlayedIndex >= 0) {
        const prevRow = document.querySelectorAll('#alphabet-tbody tr')[lastPlayedIndex];
        if (prevRow) {
            prevRow.classList.remove('playing-row');
        }
    }

    // Hacer scroll a la fila que se está reproduciendo
    scrollToPlayingRow(sequenceIndex);

    if (currentPlaying && !currentPlaying.paused) {
        currentPlaying.pause();
        currentPlaying.currentTime = 0;
        resetPreviousButton();
    }

    const audio = new Audio(baseUrl + alphabetData[sequenceIndex].audio);
    currentPlaying = audio;

    button.classList.add('playing');
    icon.className = 'fas fa-pause';
    span.innerHTML = `
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
        <span class="audio-wave"></span>
    `;

    // Agregar efecto dorado a la fila
    row.classList.add('playing-row');
    lastPlayedIndex = sequenceIndex;
    
    // Guardar progreso inmediatamente al iniciar la reproducción
    saveProgress();

    audio.play().catch(error => {
        resetButton(button);
        continueSequence();
    });

    audio.onended = () => {
        resetButton(button);
        continueSequence();
    };

    audio.onerror = () => {
        resetButton(button);
        continueSequence();
    };

    function continueSequence() {
        // Marcar como reproducida si no lo estaba
        if (!playedLetters.has(sequenceIndex)) {
            playedLetters.add(sequenceIndex);
            playedCount = playedLetters.size;
            document.getElementById('played-count').textContent = playedCount;
            updateProgress();
        }
        
        // Guardar progreso después de cada reproducción
        saveProgress();
        
        sequenceIndex++;
        if (isPlayingSequence && !isPausedSequence && sequenceIndex < alphabetData.length) {
            setTimeout(playNextInSequence, 1000);
        } else {
            isPlayingSequence = false;
            // Limpiar progreso cuando termine completamente
            clearProgress();
            
            // Cambia el icono a "play" al terminar
            const playAllBtn = document.getElementById('play-all-btn');
            const playAllIcon = playAllBtn.querySelector('i');
            const playAllText = playAllBtn.querySelector('span');
            playAllIcon.className = 'fas fa-play-circle';
            playAllText.textContent = ' Reproducir de nuevo';
            
            // Agregar efecto de parpadeo
            playAllBtn.classList.add('play-again-blink');
            
            // Ocultar botón detener al terminar
            const stopBtn = document.getElementById('stop-btn');
            stopBtn.style.display = 'none';
            playAllBtn.style.borderRadius = '25px';
            
            // Habilitar botones individuales al terminar
            enablePlayButtons();
            
            // Reproducir sonido de finalización
            playCompletionSound();
            
            // Hacer scroll hacia arriba al terminar
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
    }
}

        // Nueva función para reproducir sonido de finalización
        function playCompletionSound() {
            // Crear un contexto de audio
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Función para crear un tono
            function createTone(frequency, duration, delay = 0) {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = 'sine';
                
                // Configurar el volumen con fade in/out
                gainNode.gain.setValueAtTime(0, audioContext.currentTime + delay);
                gainNode.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + delay + 0.1);
                gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + delay + duration);
                
                oscillator.start(audioContext.currentTime + delay);
                oscillator.stop(audioContext.currentTime + delay + duration);
            }
            
            // Reproducir secuencia de tonos (Do - Mi - Sol - Do)
            createTone(523.25, 0.3, 0);    // Do
            createTone(659.25, 0.3, 0.2);  // Mi
            createTone(783.99, 0.4, 0.4);  // Sol
            createTone(1046.5, 0.6, 0.6);  // Do octava superior
        }

        // Función para detener secuencia
        function stopAll() {
            isPlayingSequence = false;
            sequenceIndex = 0;
            
            if (currentPlaying && !currentPlaying.paused) {
                currentPlaying.pause();
                currentPlaying.currentTime = 0;
                resetPreviousButton();
            }
        }

        // Agregar botón para reproducir todo
        function addPlayAllButton() {
            const header = document.querySelector('.header');
            const buttonContainer = document.createElement('div');
            buttonContainer.style.cssText = `
                margin-top: 1px; /* Reducir de 15px a 5px */
                margin-bottom: -10px; /* Agregar margen inferior mínimo */
                display: flex;
                justify-content: center;
                align-items: center;
            `;
            
            // Contenedor principal
            const buttonGroup = document.createElement('div');
            buttonGroup.style.cssText = `
                display: inline-flex;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                backdrop-filter: blur(10px);
            `;
            
            const playAllBtn = document.createElement('button');
            playAllBtn.innerHTML = '<i class="fas fa-play-circle"></i><span> Reproducir Todo</span>';
            playAllBtn.id = 'play-all-btn';
            playAllBtn.style.cssText = `
                background: linear-gradient(135deg, #48bb78, #38a169);
                color: white;
                border: none;
                border-radius: 25px; /* Inicialmente completamente redondeado */
                padding: 14px 24px;
                font-size: 0.95rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                outline: none;
            `;
            
            const stopBtn = document.createElement('button');
            stopBtn.innerHTML = '<i class="fas fa-stop-circle"></i><span> Detener</span>';
            stopBtn.id = 'stop-btn';
            stopBtn.style.cssText = `
                background: linear-gradient(135deg, #e53e3e, #c53030);
                color: white;
                border: none;
                border-radius: 0 25px 25px 0;
                padding: 14px 24px;
                font-size: 0.95rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                display: none; /* Inicialmente oculto */
                align-items: center;
                justify-content: center;
                gap: 8px;
                outline: none;
                margin-left: -1px;
            `;
            
            // Función para mostrar/ocultar botón detener
            function toggleStopButton(show) {
                if (show) {
                    stopBtn.style.display = 'flex';
                    playAllBtn.style.borderRadius = '25px 0 0 25px'; // Cambiar a medio redondeado
                } else {
                    stopBtn.style.display = 'none';
                    playAllBtn.style.borderRadius = '25px'; // Volver a completamente redondeado
                }
            }
            
            // Efectos hover
            playAllBtn.addEventListener('mouseenter', () => {
                if (isPausedSequence) {
                    playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
                    playAllBtn.style.color = '#2d3748';
                } else {
                    playAllBtn.style.background = 'linear-gradient(135deg, #38a169, #2f855a)';
                    playAllBtn.style.color = 'white';
                }
                playAllBtn.style.transform = 'translateY(-1px)';
            });
            playAllBtn.addEventListener('mouseleave', () => {
                if (isPausedSequence) {
                    playAllBtn.style.background = 'linear-gradient(135deg, #f6e05e, #ecc94b)';
                    playAllBtn.style.color = '#2d3748';
                } else {
                    playAllBtn.style.background = 'linear-gradient(135deg, #48bb78, #38a169)';
                    playAllBtn.style.color = 'white';
                }
                playAllBtn.style.transform = 'translateY(0)';
            });
            
            stopBtn.addEventListener('mouseenter', () => {
                stopBtn.style.background = 'linear-gradient(135deg, #c53030, #9c2626)';
                stopBtn.style.transform = 'translateY(-1px)';
            });
            stopBtn.addEventListener('mouseleave', () => {
                stopBtn.style.background = 'linear-gradient(135deg, #e53e3e, #c53030)';
                stopBtn.style.transform = 'translateY(0)';
            });
            
            // Alternar entre play y pause
            playAllBtn.onclick = function() {
                if (isPlayingSequence && !isPausedSequence) {
                    pauseAll();
                } else {
                    playAll();
                    toggleStopButton(true); // Mostrar botón detener al empezar
                }
            };
            
            stopBtn.onclick = function() {
                isPlayingSequence = false;
                isPausedSequence = false;
                sequenceIndex = 0;
                if (currentPlaying && !currentPlaying.paused) {
                    currentPlaying.pause();
                    currentPlaying.currentTime = 0;
                    resetPreviousButton(); // Resetear el botón que está reproduciéndose
                }
                
                // Limpiar progreso guardado
                clearProgress();
                
                // Restablecer variables de progreso
                playedLetters.clear();
                playedCount = 0;
                
                // Actualizar la UI del progreso
                document.getElementById('played-count').textContent = playedCount;
                const progressBar = document.getElementById('progress-bar');
                const progressPercentage = document.getElementById('progress-percentage');
                
                if (progressBar) {
                    progressBar.style.width = '0%';
                }
                if (progressPercentage) {
                    progressPercentage.textContent = '0';
                }
                
                // Cambia el icono a "play"
                const playAllIcon = playAllBtn.querySelector('i');
                const playAllText = playAllBtn.querySelector('span');
                playAllIcon.className = 'fas fa-play-circle';
                playAllText.textContent = ' Reproducir Todo';
                
                // Quitar el efecto de parpadeo si existe
                playAllBtn.classList.remove('play-again-blink');
                
                // Ocultar botón detener
                toggleStopButton(false);
                
                // Habilitar botones individuales al detener
                enablePlayButtons();
            };

    buttonGroup.appendChild(playAllBtn);
    buttonGroup.appendChild(stopBtn);
    buttonContainer.appendChild(buttonGroup);
    header.appendChild(buttonContainer);
}
        // Inicializar cuando se carga la página
document.addEventListener('DOMContentLoaded', () => {
    generateTable();
    addPlayAllButton();
    loadProgress();
    
    // Agregar event listener para el selector de idioma
    const languageSelect = document.getElementById('language-select');
    languageSelect.addEventListener('change', (e) => {
        const selectedLanguage = e.target.value;
        updateTranslations(selectedLanguage);
    });
    
    // Establecer idioma inicial (inglés por defecto)
    updateTranslations('en');
});

        // Detener audio al salir de la página
        window.addEventListener('beforeunload', () => {
            if (currentPlaying && !currentPlaying.paused) {
                currentPlaying.pause();
            }
            // Asegurar que se guarde el progreso antes de salir
            saveProgress();
        });

        // También guardar progreso cuando se oculta la página (cambio de pestaña)
document.addEventListener('visibilitychange', () => {
    if (document.hidden) {
        saveProgress();
    }
});

// Función para deshabilitar botones durante reproducción total
function disablePlayButtons() {
    const playButtons = document.querySelectorAll('.play-button');
    playButtons.forEach(button => {
        button.style.cursor = 'not-allowed';
        button.style.pointerEvents = 'none';
        // Mantener el color original pero con un filtro muy sutil
        button.style.filter = 'brightness(0.95)';
        // Agregar una clase para identificar que están deshabilitados
        button.classList.add('disabled-sequence');
    });
}

// Función para habilitar botones después de reproducción total
function enablePlayButtons() {
    const playButtons = document.querySelectorAll('.play-button');
    playButtons.forEach(button => {
        button.style.cursor = 'pointer';
        button.style.pointerEvents = 'auto';
        button.style.filter = 'none';
        button.classList.remove('disabled-sequence');
    });
}
    </script>
</body>
</html>
