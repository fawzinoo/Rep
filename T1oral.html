<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device=width, initial-scale=1.0">
    <title>Interfaz de Ejemplo</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        @keyframes moveUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes smoke {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-50px) scale(3);
            }
        }
        body > *:not(header):not(#instrucciones) {
    display: none;
}
        body {
            font-family: Arial, sans-serif;
            background-color: #f7f7f7;
            margin: 0;
            padding: 3px;
        }

        .item-container {
            margin-bottom: 40px;
            width: 100%;
            max-width: 800px;
        }

        .card {
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        .card-header {
            background-color:#6A5ACD;
            color: white;
            font-weight: bold;
            text-align: left;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
        }

        .card-body {
            padding: 5px ;
        }

        .lines-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            width: 100%;
        }

        .line {
            width: 100%;
            min-height: 40px;
            margin: 5px 0;
            border-bottom: 2px solid black;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            box-sizing: border-box;
            position: relative;
            flex-wrap: nowrap;
        }

        .words-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 35px;
            width: 100%;
        }
 

        .word-button {
            display: inline-block;
            margin: 5px;
            padding: 10px 8px;
            background: linear-gradient(135deg, #6A5ACD, #4B0082);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.4s ease;
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            box-sizing: border-box;
            white-space: nowrap;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .word-button:hover {
            background: linear-gradient(135deg, #4B0082, #6A5ACD);
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
        }

        .word-button:active {
            transform: scale(0.95);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .word-button.selected {
            margin: 0px;
            position: relative;
            animation: moveUp 0.5s ease-out forwards;
            background: black;
        }

   

        .placeholder {
            display: inline-block;
            margin: 5px;
            padding: 9px 3px;
            background-color: #ddd;
            border: 2px solid #ddd;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            color: #ddd;
            box-sizing: border-box;
            white-space: nowrap;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .smoke {
            position: absolute;
            top: 0;
            left: 50%;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            transform: translateX(-50%);
            animation: smoke 2s ease-out forwards;
            pointer-events: none;
        }

        .smoke.yellow {
            background: rgba(255, 255, 5, 5);
        }

        .smoke.red {
            background:indianred ;
        }

 
        .button-container0 {
    display: flex;
    background-color: transparent;
    padding: 7px 20px ;
    border-radius: 40px;
    justify-content: space-between;
    gap: 10px;
    margin-top: 1px;
}

.check-button {
    margin-top: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: auto;
    height: 50px;
    background: linear-gradient(135deg, #4CAF50, #8BC34A);
    color: white;
    border: none;
    border-radius: 10px;
    padding: 0 10px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.4s ease;
    letter-spacing: 1px;
    outline: none;
}

.check-button:hover {
    background: linear-gradient(135deg, #4CAF50, #8BC34A);
    transform: scale(1.1);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
}

.check-button:active {
    transform: scale(0.95);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.prev-button, .next-button {
    margin-top: 15px;
    padding: 10px 20px;
    border: none;
    border-radius: 50%; /* Botones circulares */
    color: rgb(8, 0, 0);
    font-size: 18px;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px; /* Tamaño fijo para mantener la forma circular */
    height: 50px; /* Tamaño fijo para mantener la forma circular */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Sombra suave */
}

.prev-button, .next-button {
    background-color: whitegrey; /* Color morado para Atrás y Siguiente */
}




.prev-button:hover, .next-button:hover {
    background-color: #68676b; /* Color morado más oscuro al pasar el mouse */
    transform: scale(1.1); /* Efecto de escala al pasar el mouse */
}


.prev-button:active, .next-button:active, .check-button:active {
    transform: scale(0.9); /* Efecto de escala al hacer clic */
}


        .buttons-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 10px;
            width: 100%;
        }

        .cupos-container {
            display: none;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
            gap: 10px;
        }

        .cupo-button {
            padding: 1px 1%;
            background-color: #FF9800;
            border: none;
            border-radius: 5px;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s;
            flex: 1 1 calc(20% - 10px); /* Responsive buttons */
            max-width: calc(20% - 1px);
            text-align: center;
            position: relative;
        }

        .cupo-button.locked {
            cursor: not-allowed;
            opacity: 0.6;
            background-color: lightgray;
        }

        .cupo-button.locked .lock-icon {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 7px;
            color: lightyellow;
            
        }

        .cupo-button:hover {
            background-color: #E68900;
        }

        .extra-buttons {
            display: flex;
            gap: 10px;
            margin-top: 0px;
            margin-left: 10px;
        }

        .extra-button {
            width: 30px;
            height: 30px;
            border-radius: 20%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s;
            box-shadow: 2px 2px 5px rgba(0, 0, 3, 3);
        }

        .translate-button {
            background-color: #40E0D0; /* Azul turquesa */
        }

        .info-button {
            background-color: #D3D3D3; /* Gris claro */
            color: #333;
        }

        .icono-traduccion {
            font-size: 10px;
            margin-left: 5px;
            vertical-align: middle;
            display: inline-block;
            color: #40E0D0;
        }
        .tape-container {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 20px 0;
        overflow-x: auto;
        padding: 10px 0;
        background-color: transparent;
        border-radius: 10px;
        width: 100%;
    }

    .number-box {
        display: inline-block;
        min-width: 25px;
        margin: 0 0px;
        padding: 2px 0;
        text-align: center;
        background-color: rgb(123, 128, 129);
        color: #333;
        border-radius: 20px;
        color: white;
        font-size: 12px;
        font-weight: bold;
        box-sizing: border-box;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        transition: transform 0.3s ease;
    }

    @media (max-width: 768px) {
        .number-box {
            min-width: 25px; /* Adjusted for smaller screens */
            padding: 4px 8px; /* Reduced padding for smaller screens */
            font-size: 12px; /* Adjusted font size for smaller screens */
        }
        }

        @media (max-width: 480px) {
        .number-box {
            min-width: 22px; /* Further adjustment for very small screens */
            padding: 3px 6px; /* Reduced padding for very small screens */
            font-size: 10px; /* Smaller font size for very small screens */
        }
        }

    .number-box:hover {
        transform: scale(1.1);
        background-color: #0056b3;
        border-color: #0056b3;
    }
  

        .back-button {
            padding: 5px;
            font-size: 20px;
            color: white;
            background-color: greenyellow;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s ease;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back-button:hover {
            background: green;
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        .back-button:active {
            transform: scale(0.98);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .refresh-button {
        background-color: white;
        border: none;
        cursor: pointer;
        font-size: 24px;
        color: #28a745; /* Color del icono */
        padding: 6px;
        border-radius: 50%; /* Para un efecto circular */
        transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 8px rgba(0, 0, 1, 0.5); /* Sombra suave */
        width: 40px; /* Tamaño fijo */
        height: 40px; /* Tamaño fijo */
        
    }

        .refresh-button:hover {
            transform: scale(1.2); /* Aumenta el tamaño al pasar el mouse */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2); /* Intensifica la sombra */
            background-color: rgba(40, 167, 69, 0.1); /* Fondo sutil al pasar el mouse */
        }

        .refresh-button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.4); /* Sombra al enfocar para accesibilidad */
        }
.next-item-button {
    padding: 15px;
    background-color: whitegrey; /* Cambiar el color a un tono más vibrante */
    border: none;
    border-radius: 50%; /* Botón circular */
    color: #0f0101;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.3s; /* Animación de color y tamaño */
    font-size: 17px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Sombra suave */
    position: absolute;
    left: 50%; /* Centrando horizontalmente */
    transform: translateX(-50%); /* Ajustar para centrado exacto */
    bottom: 20px; /* Ajusta la distancia desde la parte inferior */
    width: 50px; /* Tamaño fijo para mantener la forma circular */
    height: 50px; /* Tamaño fijo para mantener la forma circular */
}

.next-item-button:hover {
    background-color: #cdc7c6; /* Color al pasar el cursor por encima */
    transform: translateX(-50%) scale(1.1); /* Agrandar ligeramente al pasar el cursor */
}
.prev-item-button {
    padding: 15px;
    width: 50px; /* Tamaño fijo para mantener la forma circular */
    height: 50px; /* Tamaño fijo para mantener la forma circular */
    background-color:  whitegrey; /* Cambiar el color a un tono más vibrante */
    border: none;
    border-radius: 50%; /* Botón circular */
    color: #090000;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.3s; /* Animación de color y tamaño */
    font-size: 17px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Sombra suave */
    position: absolute;
    left: 50%; /* Centrando horizontalmente */
    transform: translateX(-50%); /* Ajustar para centrado exacto */
    bottom: 20px; /* Ajusta la distancia desde la parte inferior */
}

.prev-item-button:hover {
    background-color: #817c7b; /* Color al pasar el cursor por encima */
    transform: translateX(-50%) scale(1.1); /* Agrandar ligeramente al pasar el cursor */
}

.rotate-button {
    animation: rotate 2s linear infinite;
}

.pulse-button {
    animation: pulse 1.5s infinite;
}

@keyframes rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

   @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
             /* Estilos base */
             ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        li {
            margin-bottom: 10px;
            font-size: 16px;
            color: #555;
            opacity: 0; /* Inicialmente ocultos */
            transform: translateY(20px); /* Desplazamiento inicial */
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        li.show {
            opacity: 1; /* Mostrar */
            transform: translateY(0); /* Sin desplazamiento */
        }
        @keyframes wave {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        li.wave {
            animation: wave 0.5s ease;
        }

/* Forzar estilos para SweetAlert */
.swal2-container {
    z-index: 9999 !important; /* Asegúrate de que esté por encima de otros elementos */
    display: flex !important;
}
.swal2-popup {
    display: block !important; /* Asegúrate de que el popup sea visible */
}

.score-display {
margin: 0 10px;
background: #ff9800;
color: #fff;
font-size: 15px;
 font-weight: bold;
border-radius: 0;
padding: 4px 10px;
box-shadow: 0 2px 8px rgba(64,224,208,0.15);
letter-spacing: 1px;
clip-path: polygon(12% 0%, 88% 0%, 100% 50%, 88% 100%, 12% 100%, 0% 50%);
-webkit-clip-path: polygon(12% 0%, 88% 0%, 100% 50%, 88% 100%, 12% 100%, 0% 50%);
}
.clock-display {

    background:  #03beac; 
    color: #fff; 
    font-size: 15px; 
    font-weight: bold; 
    border-radius: 0; 
    padding: 4px 10px; 
    box-shadow: 0 2px 8px rgba(255,152,0,0.15); 
    letter-spacing: 1px;
    clip-path: polygon(12% 0%, 88% 0%, 100% 50%, 88% 100%, 12% 100%, 0% 50%);
    -webkit-clip-path: polygon(12% 0%, 88% 0%, 100% 50%, 88% 100%, 12% 100%, 0% 50%);
}

.swal2-spaced-actions .swal2-styled {
    margin: 0 5px !important; /* 5px a cada lado = 10px de separación */
}

/* Si necesitas más ajustes */
.swal2-spaced-actions {
    gap: 10px !important; /* Método alternativo (funciona en navegadores modernos) */
}

/* Espacio de 10px entre botones (si no usas buttonsSpacing) */
.swal2-spaced-actions .swal2-styled {
    margin: 0 5px !important; /* 5px + 5px = 10px */
}

/* Estilo para el botón de cierre (X) */
.swal2-close-custom {
    font-size: 40px;
    color: #ff0000;
    transition: 0.3s;
}

.swal2-close-custom:hover {
    color: #cc0000;
    transform: scale(1.1);
}

.modern-arrow {
        --color: #129f4d;
        --hover-color: #0066ff;
        cursor: pointer;
        width: fit-content;
        color: var(--color);
        transition: color 0.5s ease-out;
    }
    .modern-arrow:hover {
        color: var(--hover-color);
        animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    /* Añadir al final de la sección de estilos */
.item-container {
    transition: opacity 0.5s ease;
}

.completed-item {
    opacity: 0.5;
    pointer-events: none;
}
/* Añadir al final de la sección de estilos */
.swal2-confirm {
    background-color: #28a745 !important;
    margin-right: 10px;
}

.swal2-deny {
    background-color: #007bff !important;
}

.swal2-actions {
    gap: 15px;
    justify-content: center;
}

.btn-success {
    background-color: #28a745;
    border-color: #28a745;
}

.btn-primary {
    background-color: #007bff;
    border-color: #007bff;
}

.mr-2 {
    margin-right: 0.5rem;
}


.swal2-confirm, .swal2-deny {
    padding: 10px 20px;
    font-size: 1rem;
}

.swal2-close {
    font-size: 1.5rem;
    color: #6c757d;
}

/* Animación de celebración */
@keyframes celebrate {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.swal2-success {
    animation: celebrate 0.5s ease 3;
}

.custom-icon-size {
    font-size: 12px !important; /* Ajusta el tamaño del ícono */

}

/* Centrar el contenido del body solo en PC y tablet, excluyendo los dos primeros headers */
@media (min-width: 768px) {
    body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh; /* Asegura que ocupe toda la altura de la pantalla */
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    /* Mantener los dos primeros headers en su posición original */
    body > header:nth-of-type(1),
    body > header:nth-of-type(2) {
        position: static;
        width: 100%; /* Asegura que ocupen todo el ancho */
        margin: 0 auto 20px auto; /* Espaciado inferior */
    }

    /* Centrar el resto del contenido */
    body > *:not(header:nth-of-type(1)):not(header:nth-of-type(2)) {
        flex: 1;
        max-width: 1200px; /* Opcional: establece un ancho máximo */
    }
}
    </style>
</head>
<header  style="background:#c4c3c3; padding: 20px 0; text-align: center; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); border-radius: 10px; animation: fadeIn 1s ease-in-out;" >
    <h1  style="font-size: 30px; font-weight: bold; color: #333; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1); margin: 0;">
        Tarea 1
    </h1>
    <h2 style="font-size: 20px; font-weight: bold; color: #074991; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1); margin: 10px 0 0;">
        Presentación de un tema
    </h2>
</header>
<header style="background: linear-gradient(135deg, #0f2fb3, #a8a6a6); padding: 20px; margin-bottom: 20px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); ">
    <h6 style="color: #f2f0f4; text-align: center; margin: 0; font-size: 20px; font-weight: bold;animation: pulse 1s infinite;">
        Una comida de su país
    </h6>
</header>

<!-- Tarjeta moderna -->
<div class="card item-container" id="instrucciones"  style="border: none; border-radius: 15px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); margin-bottom: 20px;">
    <!-- Encabezado de la tarjeta -->
    <div class="card-header" style="background-color: #343a40; padding: 10px; color: white; font-size: 22px; font-weight: bold; border-bottom: 2px solid #6c757d;">
        <i class="fas fa-info-circle" style="margin-right: 10px;"></i> Instrucciones
    </div>
    <!-- Cuerpo de la tarjeta -->
    <div class="card-body" style="background-color: #f1ece3; padding: 20px;">
        <strong><p style="font-size: 18px; color: #333333; margin-bottom: 15px;">Hable de una comida de su país. Hable de:</p></strong>
        <!-- Lista de elementos con íconos modernos -->
        <ul>
            <li>
                <i class="fas fa-utensils" style="color: #40E0D0; margin-right: 10px;"></i>
                Cómo se llama el plato y qué ingredientes lleva.
            </li>
            <li>
                <i class="fas fa-heart" style="color: #FF6B6B; margin-right: 10px;"></i>
                Si le gusta esta comida y si sabe cocinarla.
            </li>
            <li>
                <i class="fas fa-calendar-day" style="color: #6A5ACD; margin-right: 10px;"></i>
                Cuándo se come este plato (en qué parte del día, para una fiesta...).
            </li>
            <li>
                <i class="fas fa-users" style="color: #FFA500; margin-right: 10px;"></i>
                Cuándo fue la última vez que la comió, con quién y dónde estaba.
            </li>
            <li>
                <i class="fas fa-clock" style="color: #32CD32; margin-right: 10px;"></i>
                Si va a comerla pronto.
            </li>
        </ul>
    </div>
</div>
<body>
    <audio id="miAudio" src="https://fawzinoo.github.io/audios/T1oral1.mp3" preload="auto" playsinline></audio>
    <script>
document.addEventListener("DOMContentLoaded", function() {
    var audio = document.getElementById("miAudio");
    let canPlayAudio = true; // Flag para controlar si se puede reproducir el audio

    // Función para reproducir audio con manejo de restricciones de autoplay
    function playAudio() {
        if (!canPlayAudio) return;

        // Intenta reproducir el audio
        const playPromise = audio.play();

        // Maneja la promesa de reproducción
        if (playPromise !== undefined) {
            playPromise.then(() => {
                // Autoplay fue exitoso.
                console.log("Audio is playing automatically");
            }).catch(error => {
                // Autoplay fue bloqueado. Muestra un mensaje al usuario.
                console.error("Autoplay was prevented:", error);
                Swal.fire({
                    title: '¿Preparado?',
                    text: 'Para escuchar el audio, por favor toca el botón.',
                    icon: 'info',
                    confirmButtonText: 'Reproducir',
                    customClass: {
                        icon: 'custom-icon-size'
                    }
                }).then((result) => {
                    if (result.isConfirmed) {
                        audio.currentTime = 0;
                        audio.play().catch(error => console.error("Error al reproducir después de la interacción:", error));
                    }
                });
            });
        }
    }
    
    // Verificar si estamos en un reinicio
    if (localStorage.getItem('reiniciarScroll') === 'true' || localStorage.getItem('reiniciar') === 'true') {
        // Limpiar todo el localStorage excepto el flag de reinicio
        let reiniciarScroll = localStorage.getItem('reiniciarScroll');
        localStorage.clear();
        if (reiniciarScroll === 'true') {
            localStorage.setItem('reiniciarScroll', 'true');
        }
        
        // Restablecer variables globales  
        globalScore = 0;
        Object.keys(itemScores).forEach(key => delete itemScores[key]);
        Object.keys(completedFrases).forEach(key => delete completedFrases[key]);
        
        // Actualizar displays
        updateAllScoreDisplays();
        
        // Ocultar el botón empezar inmediatamente
        const empezarBtn = document.getElementById('empezar-btn');
        if (empezarBtn) {
            empezarBtn.style.display = 'none';
        }
        
        // Mostrar contenido y hacer scroll inmediatamente
        mostrarContenido();
        setTimeout(() => {
            desplazarAItem1();
            // Limpiar el flag después del scroll
            localStorage.removeItem('reiniciarScroll');
            localStorage.removeItem('reiniciar');
        }, 100);

        return;
    }

    // Función mejorada para detectar Chrome (incluye Chromium pero excluye Edge)
    function isChrome() {
        const userAgent = navigator.userAgent;
        return /Chrome|Chromium/i.test(userAgent) && !/Edge|Edg|OPR|Brave/i.test(userAgent);
    }

    
    // Pausa y previene la reproducción del audio al hacer clic en "Empezar"
    document.getElementById("empezar-btn")?.addEventListener("click", () => {
        canPlayAudio = false; // Desactiva la reproducción futura
        audio.pause();
        audio.currentTime = 0;
    });

    // Inicia después de 4 segundos solo si no se ha hecho clic en "Empezar"
    setTimeout(playAudio, 4000);
});
    </script>
<button id="empezar-btn" style="display: block; margin: 20px auto; padding: 15px 15px; background: linear-gradient(135deg, #4CAF50, #2E7D32); color: white; border: none; border-radius: 25px; font-size: 18px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); transition: transform 0.3s, box-shadow 0.3s;">
    <i class="fas fa-play-circle" style="margin-right: 2px;"></i> Empezar
</button>
<div class="card item-container" id="item-1">
    <div class="card-header">1. Cómo se llama el plato y qué ingredientes lleva.</div>
    
    <div class="card-body">
        <div class="cupos-container" id="cupos-container-1"></div>

        <div class="modern-arrow" onclick="goBack()">
            <svg width="35" height="35" viewBox="0 0 24 24">
                <path d="M16 19L8 12L16 5" 
                      fill="none" 
                      stroke="currentColor" 
                      stroke-width="2.5"
                      stroke-linecap="square"
                      stroke-miterlimit="10"/>
                <circle cx="12" cy="12" r="11.5" 
                        stroke="currentColor" 
                        stroke-width="0.5"
                        fill="none"/>
            </svg>
        </div>
        

        <div style="background: linear-gradient(90deg, #6A5ACD 60%, #ceeeea 100%); border-radius: 30px; padding: 4px 10px; box-shadow: 0 2px 8px rgba(106,90,205,0.15); margin-bottom: 12px; width: 100%; max-width: 100%; box-sizing: border-box; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center;margin-top: 5px;">
            <div id="score-display-1" class="score-display" >
                Pts: 0
            </div>
            <div id="clock-display-1" class="clock-display">
                00:00:00
            </div>
        </div>

<!-- Contenedor de líneas -->
<div style="background-color:rgb(234, 231, 231); padding: 5px; margin-bottom: 5px;;">
    <div class="lines-container" id="lines-container-1">
        <div class="line" id="line-1-1"></div>
    </div>
</div>

<!-- Contenedor de palabras con espacio uniforme -->
<div style="background-color: whitesmoke; height: 250px; padding: 20px; display: flex; align-items: center; justify-content: center; position: relative; box-sizing: border-box;"> <!-- Incrementado height fijo -->
    <div class="words-container" id="words-container-1" style="flex-grow: 1;"></div>
    <button id="refresh-button-1" class="refresh-button" aria-label="Refresh" style="position: absolute; bottom: 10px; right: 10px;">
        <i class="fas fa-sync-alt"></i>
    </button>
</div>

<center>
<button id="check-button-1" class="check-button" >
    <i class="fas fa-check-circle" style="margin-right: 5px;"></i> Comprobar
</button>
</center><br>

</span>
        <!-- Contenedor de botones -->
       
            <div class="button-container0">
                <button id="prev-button-1" class="prev-button">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="tape-container">
                    <div class="number-box">1</div>
                    <div class="number-box">2</div>
                    <div class="number-box">3</div>
                    <div class="number-box">4</div>
                    <div class="number-box">5</div>
                    <div class="number-box">6</div>
                    <div class="number-box">7</div>
                    <div class="number-box">8</div>
                    <div class="number-box">9</div>
                    <div class="number-box">10</div>
                </div>
                <button id="next-button-1" class="next-button">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>

        
        <div style="margin-top: 50px;"> <button id="next-item-button" class="next-item-button" aria-label="Next Item" >
            <i class="fas fa-chevron-down"></i>
        </button></div>

    </div>

</div>

    <div class="card item-container" id="item-2">
        <div class="card-header">2. Si le gusta esta comida y si sabe cocinarla.</div>
        <div class="card-body">
            <div class="cupos-container" id="cupos-container-2"></div>
            
            <div class="modern-arrow" onclick="goBack()">
                <svg width="35" height="35" viewBox="0 0 24 24">
                    <path d="M16 19L8 12L16 5" 
                          fill="none" 
                          stroke="currentColor" 
                          stroke-width="2.5"
                          stroke-linecap="square"
                          stroke-miterlimit="10"/>
                    <circle cx="12" cy="12" r="11.5" 
                            stroke="currentColor" 
                            stroke-width="0.5"
                            fill="none"/>
                </svg>
            </div>
            
            <div style="background: linear-gradient(90deg, #6A5ACD 60%, #ceeeea 100%); border-radius: 30px; padding: 4px 10px; box-shadow: 0 2px 8px rgba(106,90,205,0.15); margin-bottom: 12px; width: 100%; max-width: 100%; box-sizing: border-box; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center;margin-top: 5px;">
                <div id="score-display-2" class="score-display" >
                    Pts: 0
                </div>
                <div id="clock-display-2" class="clock-display">
                    00:00:00
                </div>
            </div>
    
    <!-- Contenedor de líneas -->
    <div style="background-color:rgb(234, 231, 231); padding: 5px; margin-bottom: 5px;;">
        <div class="lines-container" id="lines-container-2">
            <div class="line" id="line-1-2"></div>
        </div>
    </div>
    
    <!-- Contenedor de palabras con espacio uniforme -->
    <div style="background-color: whitesmoke; height: 250px; padding: 20px; display: flex; align-items: center; justify-content: center; position: relative; box-sizing: border-box;"> <!-- Incrementado height fijo -->
        <div class="words-container" id="words-container-2" style="flex-grow: 1;"></div>
        <button id="refresh-button-2" class="refresh-button" aria-label="Refresh" style="position: absolute; bottom: 10px; right: 10px;">
            <i class="fas fa-sync-alt"></i>
        </button>
    </div>
    
    <center>
    <button id="check-button-2" class="check-button" >
        <i class="fas fa-check-circle" style="margin-right: 5px;"></i> Comprobar
    </button>
    </center><br>
    
    </span>
            <!-- Contenedor de botones -->
           
                <div class="button-container0">
                    <button id="prev-button-2" class="prev-button">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="tape-container">
                        <div class="number-box">1</div>
                        <div class="number-box">2</div>
                        <div class="number-box">3</div>
                        <div class="number-box">4</div>
                        <div class="number-box">5</div>
                        <div class="number-box">6</div>
                        <div class="number-box">7</div>
                        <div class="number-box">8</div>
                        <div class="number-box">9</div>
                        <div class="number-box">10</div>
                    </div>
                    <button id="next-button-2" class="next-button">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
    
            
            <div style="margin-top: 50px;"> <button id="next-item-button" class="next-item-button" aria-label="Next Item" >
                <i class="fas fa-chevron-down"></i>
            </button></div>
    
        </div>
    </div>
    
    <div class="card item-container" id="item-3">
        <div class="card-header">3. Cuándo se come este plato (en qué parte del día, para una fiesta...).</div>
        <div class="card-body">
            <div class="cupos-container" id="cupos-container-3"></div>
            
            <div class="modern-arrow" onclick="goBack()">
                <svg width="35" height="35" viewBox="0 0 24 24">
                    <path d="M16 19L8 12L16 5" 
                          fill="none" 
                          stroke="currentColor" 
                          stroke-width="2.5"
                          stroke-linecap="square"
                          stroke-miterlimit="10"/>
                    <circle cx="12" cy="12" r="11.5" 
                            stroke="currentColor" 
                            stroke-width="0.5"
                            fill="none"/>
                </svg>
            </div>
            
    
            <div style="background: linear-gradient(90deg, #6A5ACD 60%, #ceeeea 100%); border-radius: 30px; padding: 4px 10px; box-shadow: 0 2px 8px rgba(106,90,205,0.15); margin-bottom: 12px; width: 100%; max-width: 100%; box-sizing: border-box; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center;margin-top: 5px;">
                <div id="score-display-3" class="score-display" >
                    Pts: 0
                </div>
                <div id="clock-display-3" class="clock-display">
                    00:00:00
                </div>
            </div>
    
    <!-- Contenedor de líneas -->
    <div style="background-color:rgb(234, 231, 231); padding: 5px; margin-bottom: 5px;;">
        <div class="lines-container" id="lines-container-3">
            <div class="line" id="line-1-3"></div>
        </div>
    </div>
    
    <!-- Contenedor de palabras con espacio uniforme -->
    <div style="background-color: whitesmoke; height: 250px; padding: 20px; display: flex; align-items: center; justify-content: center; position: relative; box-sizing: border-box;"> <!-- Incrementado height fijo -->
        <div class="words-container" id="words-container-3" style="flex-grow: 1;"></div>
        <button id="refresh-button-3" class="refresh-button" aria-label="Refresh" style="position: absolute; bottom: 10px; right: 10px;">
            <i class="fas fa-sync-alt"></i>
        </button>
    </div>
    
    <center>
    <button id="check-button-3" class="check-button" >
        <i class="fas fa-check-circle" style="margin-right: 5px;"></i> Comprobar
    </button>
    </center><br>
    
    </span>
            <!-- Contenedor de botones -->
           
                <div class="button-container0">
                    <button id="prev-button-3" class="prev-button">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="tape-container">
                        <div class="number-box">1</div>
                        <div class="number-box">2</div>
                        <div class="number-box">3</div>
                        <div class="number-box">4</div>
                        <div class="number-box">5</div>
                        <div class="number-box">6</div>
                        <div class="number-box">7</div>
                        <div class="number-box">8</div>
                        <div class="number-box">9</div>
                        <div class="number-box">10</div>
                    </div>
                    <button id="next-button-3" class="next-button">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
    
            
            <div style="margin-top: 50px;"> <button id="next-item-button" class="next-item-button" aria-label="Next Item" >
                <i class="fas fa-chevron-down"></i>
            </button></div>
    
        </div>
        </div>
    
    
    <div class="card item-container" id="item-4">
        <div class="card-header">4. Cuándo fue la última vez que la comió, con quién y dónde estaba.</div>
        <div class="card-body">
            <div class="cupos-container" id="cupos-container-4"></div>
            <div class="modern-arrow" onclick="goBack()">
                <svg width="35" height="35" viewBox="0 0 24 24">
                    <path d="M16 19L8 12L16 5" 
                          fill="none" 
                          stroke="currentColor" 
                          stroke-width="2.5"
                          stroke-linecap="square"
                          stroke-miterlimit="10"/>
                    <circle cx="12" cy="12" r="11.5" 
                            stroke="currentColor" 
                            stroke-width="0.5"
                            fill="none"/>
                </svg>
            </div>
            
            <div style="background: linear-gradient(90deg, #6A5ACD 60%, #ceeeea 100%); border-radius: 30px; padding: 4px 10px; box-shadow: 0 2px 8px rgba(106,90,205,0.15); margin-bottom: 12px; width: 100%; max-width: 100%; box-sizing: border-box; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center;margin-top: 5px;">
                <div id="score-display-4" class="score-display" >
                    Pts: 0
                </div>
                <div id="clock-display-4" class="clock-display">
                    00:00:00
                </div>
            </div>
    
    <!-- Contenedor de líneas -->
    <div style="background-color:rgb(234, 231, 231); padding: 5px; margin-bottom: 5px;;">
        <div class="lines-container" id="lines-container-4">
            <div class="line" id="line-1-4"></div>
        </div>
    </div>
    
    <!-- Contenedor de palabras con espacio uniforme -->
    <div style="background-color: whitesmoke; height: 250px; padding: 20px; display: flex; align-items: center; justify-content: center; position: relative; box-sizing: border-box;"> <!-- Incrementado height fijo -->
        <div class="words-container" id="words-container-4" style="flex-grow: 1;"></div>
        <button id="refresh-button-4" class="refresh-button" aria-label="Refresh" style="position: absolute; bottom: 10px; right: 10px;">
            <i class="fas fa-sync-alt"></i>
        </button>
    </div>
    
    <center>
    <button id="check-button-4" class="check-button" >
        <i class="fas fa-check-circle" style="margin-right: 5px;"></i> Comprobar
    </button>
    </center><br>
    </span>
            <!-- Contenedor de botones -->
           
                <div class="button-container0">
                    <button id="prev-button-4" class="prev-button">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="tape-container">
                        <div class="number-box">1</div>
                        <div class="number-box">2</div>
                        <div class="number-box">3</div>
                        <div class="number-box">4</div>
                        <div class="number-box">5</div>
                        <div class="number-box">6</div>
                        <div class="number-box">7</div>
                        <div class="number-box">8</div>
                        <div class="number-box">9</div>
                        <div class="number-box">10</div>
                    </div>
                    <button id="next-button-4" class="next-button">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
    
            
            <div style="margin-top: 50px;"> <button id="next-item-button" class="next-item-button" aria-label="Next Item" >
                <i class="fas fa-chevron-down"></i>
            </button></div>
    
        </div>
    </div>
    
    
    <div class="card item-container" id="item-5">
        <div class="card-header">5. Si va a comerla pronto.</div>
        <div class="card-body">
            <div class="cupos-container" id="cupos-container-5"></div>
            <div class="modern-arrow" onclick="goBack()">
                <svg width="35" height="35" viewBox="0 0 24 24">
                    <path d="M16 19L8 12L16 5" 
                          fill="none" 
                          stroke="currentColor" 
                          stroke-width="2.5"
                          stroke-linecap="square"
                          stroke-miterlimit="10"/>
                    <circle cx="12" cy="12" r="11.5" 
                            stroke="currentColor" 
                            stroke-width="0.5"
                            fill="none"/>
                </svg>
            </div>
            
            <div style="background: linear-gradient(90deg, #6A5ACD 60%, #ceeeea 100%); border-radius: 30px; padding: 4px 10px; box-shadow: 0 2px 8px rgba(106,90,205,0.15); margin-bottom: 12px; width: 100%; max-width: 100%; box-sizing: border-box; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center;margin-top: 5px;">
                <div id="score-display-5" class="score-display" >
                    Pts: 0
                </div>
                <div id="clock-display-5" class="clock-display">
                    00:00:00
                </div>
            </div>
    
    <!-- Contenedor de líneas -->
    <div style="background-color:rgb(234, 231, 231); padding: 5px; margin-bottom: 5px;;">
        <div class="lines-container" id="lines-container-5">
            <div class="line" id="line-1-5"></div>
        </div>
    </div>
    
    <!-- Contenedor de palabras con espacio uniforme -->
    <div style="background-color: whitesmoke; height: 250px; padding: 20px; display: flex; align-items: center; justify-content: center; position: relative; box-sizing: border-box;"> <!-- Incrementado height fijo -->
        <div class="words-container" id="words-container-5" style="flex-grow: 1;"></div>
        <button id="refresh-button-5" class="refresh-button" aria-label="Refresh" style="position: absolute; bottom: 10px; right: 10px;">
            <i class="fas fa-sync-alt"></i>
        </button>
    </div>
    
    <center>
    <button id="check-button-5" class="check-button" >
        <i class="fas fa-check-circle" style="margin-right: 5px;"></i> Comprobar
    </button>
    </center><br>
    
    </span>
            <!-- Contenedor de botones -->
           
                <div class="button-container0">
                    <button id="prev-button-5" class="prev-button">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="tape-container">
                        <div class="number-box">1</div>
                        <div class="number-box">2</div>
                        <div class="number-box">3</div>
                        <div class="number-box">4</div>
                        <div class="number-box">5</div>
                        <div class="number-box">6</div>
                        <div class="number-box">7</div>
                        <div class="number-box">8</div>
                        <div class="number-box">9</div>
                        <div class="number-box">10</div>
                    </div>
                    <button id="next-button-5" class="next-button">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
        </div>
        <br><br>
        <button id="prev-item-button" class="prev-item-button" aria-label="Prev Item">
            <i class="fas fa-chevron-up"></i>
        </button>
        
    </div>
    
    <audio id="sound-click-up" src="https://fawzinoo.github.io/Rep/collect-points-190037.mp3" preload="auto"></audio>
    <audio id="sound-click-down" src="https://www.myinstants.com/media/sounds/button-click.mp3" preload="auto"></audio>
    <audio id="sound-success" src="https://fawzinoo.github.io/Rep/success-1-6297.mp3" preload="auto"></audio>
    <audio id="sound-failure" src="https://www.myinstants.com/media/sounds/app-error.mp3" preload="auto"></audio>
    <audio id="sound-next" src="https://fawzinoo.github.io/Rep/going-to-the-next-level-114480.mp3" preload="auto"></audio>
        

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
// Guardar datos en el localStorage
function saveToLocalStorage(key, data) {
    localStorage.setItem(key, JSON.stringify(data));
}

// Recuperar datos del localStorage
function getFromLocalStorage(key) {
    const data = localStorage.getItem(key);
    return data ? JSON.parse(data) : null;
}

// Guardar las frases completadas en el localStorage
function saveCompletedFrases() {
    saveToLocalStorage('completedFrases', completedFrases);
}

function loadCompletedFrases() {
    const saved = getFromLocalStorage('completedFrases');
    if (saved) {
        Object.assign(completedFrases, saved);
        
        // Sincronización visual mejorada
        setTimeout(() => {
            for (let itemIndex = 1; itemIndex <= 5; itemIndex++) {
                const cupoIndex = 0; // Asumimos solo el primer cupo
                const tapeNumbers = document.querySelectorAll(`#item-${itemIndex} .number-box`);
                let visibleCount = 0;
                
                tapeNumbers.forEach((box, originalIndex) => {
                    if (completedFrases[`${itemIndex}-${cupoIndex}-${originalIndex}`]) {
                        box.style.display = 'none'; // Oculta SOLO frases completadas
                    } else {
                        visibleCount++;
                        box.style.display = 'inline-block';
                        box.textContent = visibleCount; // Numeración correlativa (1-9 si 1 está completada)
                        box.dataset.originalIndex = originalIndex; // Mantiene referencia real
                    }
                });
            }
        }, 150); // Tiempo ajustado para garantizar que el DOM esté listo
    }
}



function updateAllTapes() {
    for (let itemIndex = 1; itemIndex <= 5; itemIndex++) {
        const cupoIndex = 0;
        const frases = itemsFrases[itemIndex - 1][cupoIndex];
        
        for (let fraseIndex = 0; fraseIndex < frases.length; fraseIndex++) {
            if (completedFrases[`${itemIndex}-${cupoIndex}-${fraseIndex}`]) {
                setTimeout(() => updateTape(itemIndex, fraseIndex, true), 100);
            }
        }
    }
}

// Guardar los puntos en el localStorage
function savePoints() {
    saveToLocalStorage('globalScore', globalScore);
    saveToLocalStorage('itemScores', itemScores);
}

// Recuperar los puntos del localStorage al cargar la página
function loadPoints() {
    const savedGlobalScore = getFromLocalStorage('globalScore');
    const savedItemScores = getFromLocalStorage('itemScores');

    if (savedGlobalScore !== null) {
        globalScore = savedGlobalScore;
    }
    if (savedItemScores !== null) {
        Object.assign(itemScores, savedItemScores);
    }

    // Actualizar la visualización de los puntos
    updateAllScoreDisplays();
}





function startClock(itemIndex) {
    const clockDisplay = document.getElementById(`clock-display-${itemIndex}`);
    let seconds = 0, minutes = 0, hours = 0;

    const intervalId = setInterval(() => {
        seconds++;
        if (seconds === 60) {
            seconds = 0;
            minutes++;
            if (minutes === 60) {
                minutes = 0;
                hours++;
            }
        }

        clockDisplay.textContent = 
            `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    }, 1000);

    // Guardar el ID del intervalo para poder detenerlo más tarde si es necesario
    clockDisplay.dataset.intervalId = intervalId;
}

function stopClock(itemIndex) {
    const clockDisplay = document.getElementById(`clock-display-${itemIndex}`);
    if (clockDisplay.dataset.intervalId) {
        clearInterval(clockDisplay.dataset.intervalId); // Detener el intervalo
        clockDisplay.dataset.intervalId = null; // Limpiar el ID del intervalo
    }
}

let globalScore = 0; // Puntaje global entre todos los ítems
const itemScores = {}; // Puntajes acumulados por ítem

// Función para calcular la puntuación basada en el tiempo transcurrido
function calculatePoints(timeElapsed) {
    let points;
    if (timeElapsed <= 10) {
        points = 10;
    } else if (timeElapsed <= 20) {
        points = 8;
    } else if (timeElapsed <= 30) {
        points = 6;
    } else if (timeElapsed <= 45) {
        points = 4;
    } else if (timeElapsed <= 60) {
        points = 2;
    } else {
        points = 1;
    }
    return points;
}

function stopClockAndCalculatePoints(itemIndex) {
    const clockDisplay = document.getElementById(`clock-display-${itemIndex}`);
    const scoreDisplay = document.getElementById(`score-display-${itemIndex}`);

    if (clockDisplay.dataset.intervalId) {
        clearInterval(clockDisplay.dataset.intervalId); // Detener el intervalo
        clockDisplay.dataset.intervalId = null; // Limpiar el ID del intervalo

        // Obtener el tiempo transcurrido en segundos
        const timeParts = clockDisplay.textContent.split(':');
        const hours = parseInt(timeParts[0], 10);
        const minutes = parseInt(timeParts[1], 10);
        const seconds = parseInt(timeParts[2], 10);
        const timeElapsed = hours * 3600 + minutes * 60 + seconds;

        // Calcular la puntuación
        const points = calculatePoints(timeElapsed);

        // Actualizar el puntaje del ítem
        if (!itemScores[itemIndex]) {
            itemScores[itemIndex] = 0; // Inicializar el puntaje del ítem si no existe
        }
        itemScores[itemIndex] += points; // Sumar los puntos al ítem actual

        // Actualizar el puntaje global
        globalScore += points;

        // Guardar los puntos en el localStorage
        savePoints();

        // Actualizar el marcador del ítem
        scoreDisplay.textContent = `Pts: ${itemScores[itemIndex]}`;

        // Actualizar la visualización de los puntos en todos los ítems
        updateAllScoreDisplays();

        // Mostrar el puntaje global (opcional)
        console.log(`Puntaje global: ${globalScore}`);
    }
}



function updateTimerDisplay(itemIndex) {
    if (timers[itemIndex] && timers[itemIndex].startTime) {
        const now = new Date();
        const timeElapsed = Math.floor((now - timers[itemIndex].startTime) / 1000);
        const minutes = Math.floor(timeElapsed / 60);
        const seconds = timeElapsed % 60;

        const clockDisplay = document.querySelector(`#clock-display-${itemIndex}`);
        if (clockDisplay) {
            clockDisplay.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }
        console.log(`Actualizando clock-display para el ítem ${itemIndex}: ${clockDisplay.textContent}`);
    }
}

function updateAllScoreDisplays() {
    for (let i = 1; i <= 5; i++) {
        const scoreDisplay = document.getElementById(`score-display-${i}`);
        if (scoreDisplay) {
            scoreDisplay.textContent = `Pts: ${globalScore}`;
        }
    }
}

function resetClockDisplay(itemIndex) {
    const clockDisplay = document.getElementById(`clock-display-${itemIndex}`);
    if (clockDisplay) {
        clockDisplay.textContent = "00:00:00"; // Reiniciar el tiempo
        if (clockDisplay.dataset.intervalId) {
            clearInterval(clockDisplay.dataset.intervalId); // Detener el intervalo si está activo
            clockDisplay.dataset.intervalId = null; // Limpiar el ID del intervalo
        }
    }
}

const completedFrases = {}; // Almacena las frases completadas por ítem y frase

 function goBack() {
    window.history.back();
}

const removedFrases = {};

document.addEventListener('DOMContentLoaded', function () {
    // Cargar frases completadas
    loadCompletedFrases();

    // Cargar puntos
    loadPoints();
    

    // Inicializar la visualización de los puntos
    updateAllScoreDisplays();

    // Verificar si hay datos guardados (si es la primera vez)
    const hasSavedData = localStorage.getItem('completedFrases') || localStorage.getItem('globalScore');
    
    setTimeout(() => {
        // Iterar sobre todos los ítems
        for (let itemIndex = 1; itemIndex <= 5; itemIndex++) { // Ajusta el rango según el número de ítems
            // Verificar si al menos una frase está completada en este ítem
            const frasesCompletadasEnItem = Object.keys(completedFrases).filter(key => key.startsWith(`${itemIndex}-`));
            if (frasesCompletadasEnItem.length > 0) {
                const nextButton = document.getElementById(`next-button-${itemIndex}`);
                if (nextButton) {
                    nextButton.click(); // Simula el clic en el botón Next
                    console.log(`Clic simulado en el botón "Next" del ítem ${itemIndex}`);
                } else {
                    console.warn(`El botón "Next" para el ítem ${itemIndex} no fue encontrado.`);
                }
            } else {
                console.log(`No se completó ninguna frase en el ítem ${itemIndex}. Posicionando cinta numérica en 1.`);
                // Posicionar la cinta numérica en 1
                positionTapeAtFirstNumber(itemIndex);
            }
        }
    }, 300); // Retraso para asegurar que el DOM esté listo

    document.getElementById('empezar-btn').addEventListener('click', function () {
    const empezarBtn = this;

    if (hasSavedData) {
        // Si hay datos guardados, mostrar el diálogo
        Swal.fire({
            title: '<span style="color: black; font-size: 24px; font-weight: bold;">Total: 500 Pts.</span>',
            html: `
<div class="score-title" style="margin-bottom: 15px; color: #8e44ad; font-size: 20px; font-weight: bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">Tu puntuación actual:</div>
        <div class="score-wrapper" style="transform-style: preserve-3d; transition: transform 0.8s ease-out, opacity 0.8s ease-out; animation: float 3s ease-in-out infinite;">
           
            <div class="score-value" style="display: inline-flex; align-items: center; justify-content: center; padding: 15px 30px; background: linear-gradient(135deg, #6A5ACD, #4B0082); color: white; border-radius: 12px; box-shadow: 0 10px 25px rgba(106, 90, 205, 0.4); position: relative; overflow: hidden;">
                <span style="position: relative; font-size: 28px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); animation: pulse 1.5s infinite alternate;">${globalScore} Pts.</span>
                <div class="glow" style="position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%); animation: rotate 8s linear infinite;"></div>
            </div>
        </div>

    <style>
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate3d(0,1,0,0deg); }
            50% { transform: translateY(-10px) rotate3d(0,1,0,5deg); }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.05); }
        }
        @keyframes rotate {
            0% { transform: rotate(0deg); opacity: 0.5; }
            50% { opacity: 0.8; }
            100% { transform: rotate(360deg); opacity: 0.5; }
        }
        .animated-score-container::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border-radius: 16px;
            background: linear-gradient(45deg, #FF8C00, #FF0080, #00BFFF, #00FF80);
            background-size: 400% 400%;
            z-index: -1;
            filter: blur(12px);
            animation: gradientBG 15s ease infinite;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
`,         
icon: 'info',
            showCancelButton: true,
            confirmButtonText: 'Continuar',
            cancelButtonText: 'Reiniciar',
            showCloseButton: true,
            closeButtonHtml: '&times;',
            customClass: {
                confirmButton: 'btn btn-success swal2-spaced-btn',
                cancelButton: 'btn btn-danger swal2-spaced-btn',
                actions: 'swal2-spaced-actions',
                closeButton: 'swal2-close-custom'
            },
            buttonsStyling: false,
            allowOutsideClick: false,
            allowEscapeKey: false,
            buttonsSpacing: '10px',
            didOpen: () => {
                Swal.getPopup().style.zIndex = 9999;
            }
        }).then((result) => {
            if (result.isConfirmed) {
                empezarBtn.style.display = 'none';
                mostrarContenido();

                // Obtener los ítems eliminados del localStorage
                const removedItems = JSON.parse(localStorage.getItem('removedItems')) || [];

                // Mostrar solo los ítems no eliminados
                for (let itemIndex = 1; itemIndex <= 5; itemIndex++) {
                    const currentItem = document.getElementById(`item-${itemIndex}`);
                    if (removedItems.includes(itemIndex)) {
                        currentItem.style.display = 'none';
                    } else {
                        currentItem.style.display = 'block';
                    }
                }

                desplazarAItem1();
                
                setTimeout(() => {
                    // Iterar sobre todos los ítems
                    for (let itemIndex = 1; itemIndex <= 5; itemIndex++) { // Ajusta el rango según el número de ítems
                        // Verificar si al menos una frase está completada en este ítem
                        const frasesCompletadasEnItem = Object.keys(completedFrases).filter(key => key.startsWith(`${itemIndex}-`));
                        if (frasesCompletadasEnItem.length > 0) {
                            const nextButton = document.getElementById(`next-button-${itemIndex}`);
                            if (nextButton) {
                                nextButton.click(); // Simula el clic en el botón Next
                                console.log(`Clic simulado en el botón "Next" del ítem ${itemIndex}`);
                            } else {
                                console.warn(`El botón "Next" para el ítem ${itemIndex} no fue encontrado.`);
                            }
                        } else {
                            console.log(`No se completó ninguna frase en el ítem ${itemIndex}. Posicionando cinta numérica en 1.`);
                            // Posicionar la cinta numérica en 1
                            positionTapeAtFirstNumber(itemIndex);
                        }
                    }
                }, 300); // Retraso para asegurar que el DOM esté listo
                setTimeout(() => {
                    loadCompletedFrases();
                    updateAllTapes();
                    
                    // Simular clic en el botón "Next" para todos los ítems visibles
                    for (let itemIndex = 1; itemIndex <= 5; itemIndex++) {
                        if (!removedItems.includes(itemIndex)) {
                            const nextButton = document.getElementById(`next-button-${itemIndex}`);
                            if (nextButton) {
                                setTimeout(() => {
                                    nextButton.click();
                                }, 300 * itemIndex); // Espaciado para evitar sobrecarga
                            }
                        }
                    }
                }, 500);
                

            } else if (result.dismiss === Swal.DismissReason.cancel) {
                // Detener el audio antes de reiniciar
                const audio = document.getElementById("miAudio");
                if (audio) {
                    audio.pause();
                    audio.currentTime = 0;
                }
                
                localStorage.setItem('reiniciarScroll', 'true');
                localStorage.setItem('reiniciar', 'true');
                location.reload();
                reiniciarFrasesCompletadas();
            } else if (result.dismiss === Swal.DismissReason.close) {
                empezarBtn.style.display = 'block';
            }
        });

    } else {
        // Si no hay datos guardados, pasar directamente al contenido
        empezarBtn.style.display = 'none';
        mostrarContenido();

        // Mostrar solo los ítems no eliminados
        const removedItems = JSON.parse(localStorage.getItem('removedItems')) || [];
        for (let itemIndex = 1; itemIndex <= 5; itemIndex++) {
            const currentItem = document.getElementById(`item-${itemIndex}`);
            if (removedItems.includes(itemIndex)) {
                currentItem.style.display = 'none';
            } else {
                currentItem.style.display = 'block';
            }
        }

        desplazarAItem1();
    }
});
    // Si la página se recarga después de "Reiniciar", mostrar contenido, limpiar y desplazar automáticamente
    if (localStorage.getItem('reiniciarScroll') === 'true') {
        localStorage.removeItem('reiniciarScroll');
        if (localStorage.getItem('reiniciar') === 'true') {
            localStorage.removeItem('reiniciar');
            reiniciarDatos();
        }
        mostrarContenido();
        setTimeout(() => {
            // Iterar sobre todos los ítems
            for (let itemIndex = 1; itemIndex <= 5; itemIndex++) { // Ajusta el rango según el número de ítems
                // Verificar si al menos una frase está completada en este ítem
                const frasesCompletadasEnItem = Object.keys(completedFrases).filter(key => key.startsWith(`${itemIndex}-`));
                if (frasesCompletadasEnItem.length > 0) {
                    const nextButton = document.getElementById(`next-button-${itemIndex}`);
                    if (nextButton) {
                        nextButton.click(); // Simula el clic en el botón Next
                        console.log(`Clic simulado en el botón "Next" del ítem ${itemIndex}`);
                    } else {
                        console.warn(`El botón "Next" para el ítem ${itemIndex} no fue encontrado.`);
                    }
                } else {
                    console.log(`No se completó ninguna frase en el ítem ${itemIndex}. Posicionando cinta numérica en 1.`);
                    // Posicionar la cinta numérica en 1
                    positionTapeAtFirstNumber(itemIndex);
                }
            }
        }, 300); // Retraso para asegurar que el DOM esté listo
        setTimeout(desplazarAItem1, 100);
    }
});

// Función para posicionar la cinta numérica en el primer número (1)
function positionTapeAtFirstNumber(itemIndex) {
    const tapeContainer = document.querySelector(`#item-${itemIndex} .tape-container`);
    if (!tapeContainer) return;

    const tapeNumbers = tapeContainer.querySelectorAll('.number-box');

    // Resaltar el primer número en la cinta
    tapeNumbers.forEach((box, index) => {
        if (index === 0) { // Solo el primer número (índice 0)
            box.style.backgroundColor = '#0056b3'; // Color de resaltado
            box.style.transform = 'scale(1.1)';   // Efecto de zoom
        } else {
            box.style.backgroundColor = '';       // Restaurar estilo
            box.style.transform = '';             // Restaurar estilo
        }
    });
}

// Función para mostrar el contenido oculto
function mostrarContenido() {
    // 1. Mostrar elementos ocultos (excepto botón empezar)
    document.querySelectorAll('body > *').forEach(element => {
        if (!['SCRIPT', 'STYLE', 'LINK'].includes(element.tagName) && 
            element.id !== 'empezar-btn' && 
            !element.classList.contains('hidden')) {
            element.style.display = 'block';
        }
    });

    // 2. Inicializar componentes después de mostrar el contenido
    setTimeout(() => {
        // A. Actualizar cintas numéricas
        for (let i = 1; i <= 5; i++) {
            // Verificar si el ítem existe en el DOM
            if (document.getElementById(`item-${i}`)) {
                updateTape(i, 0); // Actualizar cinta
                
                // B. Cargar primera frase no completada
                const cupoIndex = 0;
                let primeraFraseNoCompletada = 0;
                while (completedFrases[`${i}-${cupoIndex}-${primeraFraseNoCompletada}`] && 
                       primeraFraseNoCompletada < itemsFrases[i-1][cupoIndex].length) {
                    primeraFraseNoCompletada++;
                }
                
                // C. Configurar la frase activa
                if (primeraFraseNoCompletada < itemsFrases[i-1][cupoIndex].length) {
                    cargarPalabras(i, cupoIndex, primeraFraseNoCompletada);
                    setupButtons(i, cupoIndex);
                }
            }
        }
    }, 300); // Tiempo ajustado para asegurar que el DOM esté listo
}

function desplazarAItem1() {
    return new Promise((resolve) => {
        // 1. Obtener items eliminados con validación
        const removedItems = getValidRemovedItems();
        
        // 2. Encontrar el primer ítem visible
        const targetItem = findFirstVisibleItem(removedItems);
        
        if (!targetItem) {
            // Fallback seguro
            window.scrollTo(0, 0);
            return resolve();
        }

        // 3. Verificar si ya está visible
        if (isElementInViewport(targetItem)) {
            return resolve();
        }

        // 4. Scroll con verificación progresiva
        smoothScrollToElement(targetItem).then(resolve);
    });
}

// Funciones auxiliares
function getValidRemovedItems() {
    try {
        const stored = localStorage.getItem('removedItems');
        return stored ? JSON.parse(stored) : [];
    } catch {
        return [];
    }
}

function findFirstVisibleItem(removedItems) {
    for (let i = 1; i <= 5; i++) {
        if (!removedItems.includes(i)) {
            const element = document.getElementById(`item-${i}`);
            if (element && element.offsetParent !== null) {
                return element;
            }
        }
    }
    return null;
}

function isElementInViewport(el) {
    const rect = el.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
    );
}

function smoothScrollToElement(element) {
    return new Promise((resolve) => {
        const startPos = window.pageYOffset;
        const targetPos = element.getBoundingClientRect().top + startPos - 0; // Ajuste de margen
        const distance = targetPos - startPos;
        const duration = Math.min(500, Math.max(300, Math.abs(distance) / 2));
        let startTime = null;

        function animation(currentTime) {
            if (!startTime) startTime = currentTime;
            const timeElapsed = currentTime - startTime;
            const progress = Math.min(timeElapsed / duration, 1);
            const easeProgress = easeInOutQuad(progress);
            
            window.scrollTo(0, startPos + distance * easeProgress);
            
            if (timeElapsed < duration) {
                requestAnimationFrame(animation);
            } else {
                // Ajuste final para asegurar posición
                setTimeout(() => {
                    const finalPos = element.getBoundingClientRect().top + window.pageYOffset;
                    if (Math.abs(finalPos - targetPos) > 5) {
                        window.scrollTo(0, targetPos);
                    }
                    resolve();
                }, 50);
            }
        }

        requestAnimationFrame(animation);
    });
}

function easeInOutQuad(t) {
    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;
}
// Función para reiniciar los datos (esto es solo un ejemplo, adaptalo según tus necesidades)
function reiniciarDatos() {
    console.log("Reiniciando datos...");
    
    // 1. Reiniciar la variable global
    globalScore = 0;
    
    
    // 2. Actualizar inmediatamente los displays
    updateAllScoreDisplays();
    
    
    
    // 3. Limpiar el localStorage
    localStorage.clear();

    
    console.log("Datos reiniciados. Puntos globales:", globalScore);
}

function reiniciarFrasesCompletadas() {
    console.log("Reiniciando frases completadas...");
    for (const key in completedFrases) delete completedFrases[key];
    for (const key in removedFrases) delete removedFrases[key];
    
    localStorage.removeItem('completedFrases');
    localStorage.removeItem('removedFrases');
    
    // 1. Vaciar el objeto de frases completadas
    for (const key in completedFrases) {
        delete completedFrases[key];
    }
    
    // 2. Limpiar del localStorage
    localStorage.removeItem('completedFrases');
    
    // 3. Recargar todas las frases para habilitarlas nuevamente
    for (let i = 1; i <= 5; i++) {
        const wordButtons = document.querySelectorAll(`#item-${i} .word-button`);
        wordButtons.forEach(button => {
            button.style.pointerEvents = 'auto';
            button.style.opacity = '1';
        });
        
        // Si necesitas recargar las palabras para ese ítem
        const cupoIndex = 0;
        const fraseIndex = 0;
        cargarPalabras(i, cupoIndex, fraseIndex);
    }
    
    console.log("Frases completadas reiniciadas.");
}


        document.addEventListener('DOMContentLoaded', function () {
            const soundClickUp = document.getElementById('sound-click-up');
            const soundClickDown = document.getElementById('sound-click-down');
            const soundSuccess = document.getElementById('sound-success');
            const soundFailure = document.getElementById('sound-failure');
            const soundNext = document.getElementById('sound-next');
    
            let buttonsGenerated = false; // Flag para controlar la generación de botones
    
            // Función para resetear la bandera
            function resetButtonsGenerated() {
                buttonsGenerated = false;
            }
    
            const frasesItem1 = [
            [
        
  ["Se", "llama", "paella.", "Lleva arroz,", "mariscos,", "pollo", "y verduras."],
  ["Es", "una", "tortilla", "de", "patatas.", "Tiene", "huevos,", "patatas", "y cebolla."]



        ]
];



const frasesItem2 = [
[
  ["Sí,", "me", "gusta", "mucho", "la", "paella,", "pero", "no sé", "cocinarla."],

]
    ];


const frasesItem3 = [
[
  ["La", "paella", "se", "come al", "mediodía", "con", "la", "familia."],
 
]

];



const frasesItem4 = [
[
  ["Comí", "paella", "el", "domingo con", "mi", "familia", "en", "un", "restaurante."],

]

];



const frasesItem5 = [
[
  ["Sí,", "voy", "a", "comer", "paella este", "fin", "de", "semana", "con", "mi", "familia."],


]

    ];
    
            const itemsFrases = [
                frasesItem1,
                frasesItem2,
                frasesItem3,
                frasesItem4,
                frasesItem5
            ];
    
            const traducciones = {
    "mariscos,": { "frances": "fruits de mer", "arabe": "مأكولات بحرية" },
    "gazpacho.": { "frances": "gaspacho", "arabe": "جازباتشو" },
    "ajo": { "frances": "ail", "arabe": "ثوم" },
    "lentejas,": { "frances": "lentilles", "arabe": "عدس" },
    "zanahoria": { "frances": "carotte", "arabe": "جزر" },
    "albahaca.": { "frances": "basilic", "arabe": "ريحان" },
    "cilantro.": { "frances": "coriandre", "arabe": "كزبرة" },
    "alga": { "frances": "algue nori", "arabe": "عشب نوري البحري" },
    "pero nunca": { "frances": "jamais", "arabe": "أبداً" },
    "hacer masa": { "frances": "pâte", "arabe": "عجينة" },
    "almuerzo": { "frances": "déjeuner", "arabe": "غداء" },
    "cena": { "frances": "dîner", "arabe": "عشاء" },
    "ayer en": { "frances": "hier", "arabe": "أمس" },
    "Probé": { "frances": "j'ai essayé", "arabe": "جربتُ" },
    "pareja": { "frances": "partenaire", "arabe": "شريك" },
    "lentejas pronto": { "frances": "bientôt", "arabe": "قريباً" },
    "apetece": { "frances": "a envie", "arabe": "يرغب" },
    "desayunar": { "frances": "prendre le petit-déjeuner", "arabe": "تناول الإفطار" }
};



const frasesCompuestas = [
    // Item 1
    [
        "Se llama paella. Lleva arroz, mariscos, pollo y verduras.",
        "Es una tortilla de patatas. Tiene huevos, patatas y cebolla.",
        "El plato se llama gazpacho. Lleva tomate, pepino, ajo y aceite de oliva.",
        "Es una ensalada César: tiene lechuga, pollo, pan tostado y queso.",
        "Se llama sopa de lentejas. Lleva lentejas, zanahoria y cebolla.",
        "Es una pizza margarita: tiene tomate, mozzarella y albahaca.",
        "El plato es ceviche: lleva pescado, limón, cebolla y cilantro.",
        "Es una hamburguesa: tiene pan, carne, lechuga y queso.",
        "Se llama sushi: lleva arroz, pescado y alga nori.",
        "Es un bocadillo de jamón: tiene pan y jamón serrano."
    ],
    // Item 2
    [
        "Sí, me gusta mucho la paella, pero no sé cocinarla.",
        "Me encanta la tortilla de patatas, y sí, sé hacerla.",
        "No me gusta mucho el gazpacho, pero sí, puedo prepararlo.",
        "Sí, me gusta la ensalada César, y sé hacerla fácilmente.",
        "Me gusta la sopa de lentejas, pero nunca la he cocinado.",
        "Sí, la pizza margarita me gusta, y sé hacer masa casera.",
        "El ceviche me parece rico, pero no sé prepararlo bien.",
        "Me encantan las hamburguesas, y sí, sé hacerlas en casa.",
        "Me gusta el sushi, pero es difícil de hacer para mí.",
        "El bocadillo de jamón es mi favorito, y sí, sé prepararlo."
    ],
    // Item 3
    [
        "La paella se come al mediodía con la familia.",
        "La tortilla de patatas es buena para el almuerzo o la cena.",
        "El gazpacho es perfecto para el verano y se toma frío.",
        "La ensalada César se come en el almuerzo o como entrada.",
        "La sopa de lentejas es ideal para la cena en invierno.",
        "La pizza margarita se come en cenas familiares o con amigos.",
        "El ceviche es típico para el almuerzo en días calurosos.",
        "Las hamburguesas son populares para fiestas y reuniones.",
        "El sushi se come en cenas especiales o en restaurantes.",
        "El bocadillo de jamón es rápido para el desayuno o la merienda."
    ],
    // Item 4
    [
        "Comí paella el domingo con mi familia en un restaurante.",
        "La última vez que comí tortilla de patatas fue ayer en casa con mi hermano.",
        "Probé el gazpacho hace una semana en la casa de un amigo.",
        "La comí el viernes en un café con mi mejor amiga.",
        "Ayer cené sopa de lentejas en mi casa con mis padres.",
        "La comí el sábado con mis amigos en una pizzería.",
        "Hace dos meses lo comí en la playa con mi pareja.",
        "Ayer cené una hamburguesa en un parque con mis primos.",
        "Comí sushi el fin de semana pasado en un restaurante japonés con mis amigos.",
        "Lo desayuné hoy por la mañana en mi casa solo."
    ],
    // Item 5
    [
        "Sí, voy a comer paella este fin de semana con mi familia.",
        "No, no voy a comer tortilla de patatas pronto, pero me gustaría.",
        "Sí, mañana voy a tomar gazpacho porque hace mucho calor.",
        "Creo que voy a comer ensalada César esta noche en casa.",
        "No sé si voy a comer sopa de lentejas pronto, pero me gusta mucho.",
        "Sí, voy a cenar pizza margarita el viernes con mis amigos.",
        "No voy a comer ceviche esta semana, pero quizás el próximo mes.",
        "Voy a comer una hamburguesa mañana porque me apetece mucho.",
        "Sí, el sábado voy a cenar sushi con mi pareja en un restaurante.",
        "Voy a desayunar un bocadillo de jamón mañana por la mañana."
    ]
];

    
const traduccionesFrases = {
    1: [
        "<u style='color:black'>Francés:</u><br> Ça s'appelle paella. Elle contient du riz, des fruits de mer, du poulet et des légumes.<br><br><u style='color: black'>Árabe:</u><br> يسمى باييا. يحتوي على أرز، مأكولات بحرية، دجاج وخضروات.",
        "<u style='color:black'>Francés:</u><br> C'est une tortilla de pommes de terre. Elle contient des œufs, des pommes de terre et des oignons.<br><br><u style='color: black'>Árabe:</u><br> إنها تورتيلا البطاطس. تحتوي على بيض، بطاطس وبصل.",
        "<u style='color:black'>Francés:</u><br> Le plat s'appelle gazpacho. Il contient de la tomate, du concombre, de l'ail et de l'huile d'olive.<br><br><u style='color: black'>Árabe:</u><br> الطبق يسمى غازباتشو. يحتوي على طماطم، خيار، ثوم وزيت زيتون.",
        "<u style='color:black'>Francés:</u><br> C'est une salade César : elle contient de la laitue, du poulet, du pain grillé et du fromage.<br><br><u style='color: black'>Árabe:</u><br> إنها سلطة سيزار: تحتوي على خس، دجاج، خبز محمص وجبن.",
        "<u style='color:black'>Francés:</u><br> Ça s'appelle soupe de lentilles. Elle contient des lentilles, des carottes et des oignons.<br><br><u style='color: black'>Árabe:</u><br> يسمى شوربة العدس. تحتوي على عدس، جزر وبصل.",
        "<u style='color:black'>Francés:</u><br> C'est une pizza margarita : elle contient de la tomate, de la mozzarella et du basilic.<br><br><u style='color: black'>Árabe:</u><br> إنها بيتزا مارغريتا: تحتوي على طماطم، موزاريلا وريحان.",
        "<u style='color:black'>Francés:</u><br> Le plat est ceviche : il contient du poisson, du citron, des oignons et de la coriandre.<br><br><u style='color: black'>Árabe:</u><br> الطبق هو سيفيتشي: يحتوي على سمك، ليمون، بصل وكزبرة.",
        "<u style='color:black'>Francés:</u><br> C'est un hamburger : il contient du pain, de la viande, de la laitue et du fromage.<br><br><u style='color: black'>Árabe:</u><br> إنها همبرغر: يحتوي على خبز، لحم، خس وجبن.",
        "<u style='color:black'>Francés:</u><br> Ça s'appelle sushi : il contient du riz, du poisson et des algues nori.<br><br><u style='color: black'>Árabe:</u><br> يسمى سوشي: يحتوي على أرز، سمك وأعشاب نوري.",
        "<u style='color:black'>Francés:</u><br> C'est un sandwich au jambon : il contient du pain et du jambon serrano.<br><br><u style='color: black'>Árabe:</u><br> إنه ساندويتش لحم الخنزير: يحتوي على خبز ولحم خنزير سيرانو."
    ],
    2: [
        "<u style='color:black'>Francés:</u><br> Oui, j'aime beaucoup la paella, mais je ne sais pas la cuisiner.<br><br><u style='color: black'>Árabe:</u><br> نعم، أحب الباييا كثيرًا، لكنني لا أعرف كيف أطبخها.",
        "<u style='color:black'>Francés:</u><br> J'adore la tortilla de pommes de terre, et oui, je sais la faire.<br><br><u style='color: black'>Árabe:</u><br> أحب تورتيلا البطاطس كثيرًا، ونعم، أعرف كيف أعدها.",
        "<u style='color:black'>Francés:</u><br> Je n'aime pas beaucoup le gazpacho, mais oui, je peux le préparer.<br><br><u style='color: black'>Árabe:</u><br> لا أحب الغازباتشو كثيرًا، لكن نعم، يمكنني تحضيره.",
        "<u style='color:black'>Francés:</u><br> Oui, j'aime la salade César, et je sais la faire facilement.<br><br><u style='color: black'>Árabe:</u><br> نعم، أحب سلطة سيزار، وأعرف كيف أعدها بسهولة.",
        "<u style='color:black'>Francés:</u><br> J'aime la soupe de lentilles, mais je ne l'ai jamais cuisinée.<br><br><u style='color: black'>Árabe:</u><br> أحب شوربة العدس، لكنني لم أطبخها أبدًا.",
        "<u style='color:black'>Francés:</u><br> Oui, j'aime la pizza margarita, et je sais faire de la pâte maison.<br><br><u style='color: black'>Árabe:</u><br> نعم، أحب بيتزا مارغريتا، وأعرف كيف أعمل العجين في المنزل.",
        "<u style='color:black'>Francés:</u><br> Le ceviche me semble délicieux, mais je ne sais pas bien le préparer.<br><br><u style='color: black'>Árabe:</u><br> السيفيتشي يبدو لي لذيذًا، لكنني لا أعرف كيف أعدّه جيدًا.",
        "<u style='color:black'>Francés:</u><br> J'adore les hamburgers, et oui, je sais les faire à la maison.<br><br><u style='color: black'>Árabe:</u><br> أحب الهمبرغر كثيرًا، ونعم، أعرف كيف أعدها في المنزل.",
        "<u style='color:black'>Francés:</u><br> J'aime le sushi, mais c'est difficile à faire pour moi.<br><br><u style='color: black'>Árabe:</u><br> أحب السوشي، لكنه صعب التحضير بالنسبة لي.",
        "<u style='color:black'>Francés:</u><br> Le sandwich au jambon est mon préféré, et oui, je sais le préparer.<br><br><u style='color: black'>Árabe:</u><br> ساندويتش لحم الخنزير هو المفضل لدي، ونعم، أعرف كيف أعدّه."
    ],
    3: [
        "<u style='color:black'>Francés:</u><br> La paella se mange à midi en famille.<br><br><u style='color: black'>Árabe:</u><br> الباييا تؤكل في منتصف النهار مع العائلة.",
        "<u style='color:black'>Francés:</u><br> La tortilla de pommes de terre est bonne pour le déjeuner ou le dîner.<br><br><u style='color: black'>Árabe:</u><br> تورتيلا البطاطس جيدة للغداء أو العشاء.",
        "<u style='color:black'>Francés:</u><br> Le gazpacho est parfait pour l'été et se consomme froid.<br><br><u style='color: black'>Árabe:</u><br> الغازباتشو مثالي للصيف ويؤكل باردًا.",
        "<u style='color:black'>Francés:</u><br> La salade César se mange au déjeuner ou en entrée.<br><br><u style='color: black'>Árabe:</u><br> سلطة سيزار تؤكل في الغداء أو كطبق أول.",
        "<u style='color:black'>Francés:</u><br> La soupe de lentilles est idéale pour le dîner en hiver.<br><br><u style='color: black'>Árabe:</u><br> شوربة العدس مثالية للعشاء في الشتاء.",
        "<u style='color:black'>Francés:</u><br> La pizza margarita se mange lors de dîners en famille ou entre amis.<br><br><u style='color: black'>Árabe:</u><br> بيتزا مارغريتا تؤكل في العشاء العائلي أو مع الأصدقاء.",
        "<u style='color:black'>Francés:</u><br> Le ceviche est typique pour le déjeuner les jours chauds.<br><br><u style='color: black'>Árabe:</u><br> السيفيتشي طبق نموذجي للغداء في الأيام الحارة.",
        "<u style='color:black'>Francés:</u><br> Les hamburgers sont populaires pour les fêtes et les réunions.<br><br><u style='color: black'>Árabe:</u><br> الهمبرغر شائع في الحفلات والاجتماعات.",
        "<u style='color:black'>Francés:</u><br> Le sushi se mange lors de dîners spéciaux ou au restaurant.<br><br><u style='color: black'>Árabe:</u><br> السوشي يؤكل في العشاء الخاص أو في المطعم.",
        "<u style='color:black'>Francés:</u><br> Le sandwich au jambon est rapide pour le petit-déjeuner ou le goûter.<br><br><u style='color: black'>Árabe:</u><br> ساندويتش لحم الخنزير سريع للإفطار أو الوجبة الخفيفة."
    ],


    5: [
        "<u style='color:black'>Francés:</u><br> Oui, je vais manger de la paella ce week-end avec ma famille.<br><br><u style='color: black'>Árabe:</u><br> نعم، سوف آكل الباييا نهاية هذا الأسبوع مع عائلتي.",
        "<u style='color:black'>Francés:</u><br> Non, je ne vais pas manger de tortilla de pommes de terre bientôt, mais j'aimerais.<br><br><u style='color: black'>Árabe:</u><br> لا، لن آكل تورتيلا البطاطس قريبًا، لكنني أود ذلك.",
        "<u style='color:black'>Francés:</u><br> Oui, demain je vais prendre du gazpacho parce qu'il fait très chaud.<br><br><u style='color: black'>Árabe:</u><br> نعم، غدًا سوف أشرب الغازباتشو لأن الجو حار جدًا.",
        "<u style='color:black'>Francés:</u><br> Je pense que je vais manger une salade César ce soir à la maison.<br><br><u style='color: black'>Árabe:</u><br> أعتقد أنني سوف آكل سلطة سيزار الليلة في المنزل.",
        "<u style='color:black'>Francés:</u><br> Je ne sais pas si je vais manger de la soupe de lentilles bientôt, mais je l'aime beaucoup.<br><br><u style='color: black'>Árabe:</u><br> لا أعرف إذا كنت سوف آكل شوربة العدس قريبًا، لكنني أحبها كثيرًا.",
        "<u style='color:black'>Francés:</u><br> Oui, je vais dîner une pizza margarita vendredi avec mes amis.<br><br><u style='color: black'>Árabe:</u><br> نعم، سوف أتناول بيتزا مارغريتا يوم الجمعة مع أصدقائي.",
        "<u style='color:black'>Francés:</u><br> Je ne vais pas manger de ceviche cette semaine, mais peut-être le mois prochain.<br><br><u style='color: black'>Árabe:</u><br> لن آكل السيفيتشي هذا الأسبوع، لكن ربما الشهر المقبل.",
        "<u style='color:black'>Francés:</u><br> Je vais manger un hamburger demain parce que j'en ai très envie.<br><br><u style='color: black'>Árabe:</u><br> سوف آكل همبرغر غدًا لأنني أرغب فيه كثيرًا.",
        "<u style='color:black'>Francés:</u><br> Oui, samedi je vais dîner du sushi avec mon partenaire dans un restaurant.<br><br><u style='color: black'>Árabe:</u><br> نعم، يوم السبت سوف أتناول السوشي مع شريكي في مطعم.",
        "<u style='color:black'>Francés:</u><br> Je vais prendre un sandwich au jambon demain matin.<br><br><u style='color: black'>Árabe:</u><br> سوف أتناول ساندويتش لحم الخنزير غدًا صباحًا."
    ]

            };

            const reglasItems = [
    [
        "Se llama paella. Lleva arroz, mariscos, pollo y verduras.",
        [
            "» /Se llama/ es una forma de presentar el nombre de algo.",
            "» /Lleva/ se usa para indicar los ingredientes de un plato.",
            "» /Arroz, mariscos, pollo y verduras/ son sustantivos que indican ingredientes."
        ]
    ],
    [
        "Es una tortilla de patatas. Tiene huevos, patatas y cebolla.",
        [
            "» /Es una/ es una forma de describir algo.",
            "» /Tortilla de patatas/ es un plato típico español.",
            "» /Tiene/ se usa para listar los ingredientes."
        ]
    ],
    [
        "El plato se llama gazpacho. Lleva tomate, pepino, ajo y aceite de oliva.",
        [
            "» /El plato se llama/ es una forma de presentar un plato.",
            "» /Lleva/ se usa para enumerar los ingredientes.",
            "» /Tomate, pepino, ajo y aceite de oliva/ son ingredientes."
        ]
    ],
    [
        "Es una ensalada César: tiene lechuga, pollo, pan tostado y queso.",
        [
            "» /Es una/ es una forma de describir algo.",
            "» /Ensalada César/ es un tipo de ensalada.",
            "» /Tiene/ se usa para listar los ingredientes."
        ]
    ],
    [
        "Se llama sopa de lentejas. Lleva lentejas, zanahoria y cebolla.",
        [
            "» /Se llama/ es una forma de presentar el nombre de algo.",
            "» /Sopa de lentejas/ es un tipo de sopa.",
            "» /Lleva/ se usa para indicar los ingredientes."
        ]
    ],
    [
        "Es una pizza margarita: tiene tomate, mozzarella y albahaca.",
        [
            "» /Es una/ es una forma de describir algo.",
            "» /Pizza margarita/ es un tipo de pizza.",
            "» /Tiene/ se usa para listar los ingredientes."
        ]
    ],
    [
        "El plato es ceviche: lleva pescado, limón, cebolla y cilantro.",
        [
            "» /El plato es/ es una forma de presentar un plato.",
            "» /Ceviche/ es un plato típico de algunos países latinoamericanos.",
            "» /Lleva/ se usa para enumerar los ingredientes."
        ]
    ],
    [
        "Es una hamburguesa: tiene pan, carne, lechuga y queso.",
        [
            "» /Es una/ es una forma de describir algo.",
            "» /Hamburguesa/ es un tipo de comida rápida.",
            "» /Tiene/ se usa para listar los ingredientes."
        ]
    ],
    [
        "Se llama sushi: lleva arroz, pescado y alga nori.",
        [
            "» /Se llama/ es una forma de presentar el nombre de algo.",
            "» /Sushi/ es un plato típico japonés.",
            "» /Lleva/ se usa para indicar los ingredientes."
        ]
    ],
    [
        "Es un bocadillo de jamón: tiene pan y jamón serrano.",
        [
            "» /Es un/ es una forma de describir algo.",
            "» /Bocadillo de jamón/ es un tipo de sándwich.",
            "» /Tiene/ se usa para listar los ingredientes."
        ]
    ],

    [
        "Sí, me gusta mucho la paella, pero no sé cocinarla.",
        [
            "» /Sí/ es una afirmación.",
            "» /Me gusta/ expresa preferencia o gusto.",
            "» /Mucho/ es un adverbio que intensifica el gusto.",
            "» /Pero/ es una conjunción que introduce una contradicción.",
            "» /No sé/ expresa falta de habilidad o conocimiento."
        ]
    ],
    [
        "Me encanta la tortilla de patatas, y sí, sé hacerla.",
        [
            "» /Me encanta/ expresa un gusto muy fuerte.",
            "» /Y/ es una conjunción que añade información.",
            "» /Sí/ es una afirmación.",
            "» /Sé hacerla/ indica habilidad o conocimiento."
        ]
    ],
    [
        "No me gusta mucho el gazpacho, pero sí, puedo prepararlo.",
        [
            "» /No me gusta/ expresa falta de gusto.",
            "» /Mucho/ es un adverbio que intensifica el sentimiento.",
            "» /Pero/ es una conjunción que introduce una contradicción.",
            "» /Sí/ es una afirmación.",
            "» /Puedo prepararlo/ indica habilidad o capacidad."
        ]
    ],
    [
        "Sí, me gusta la ensalada César, y sé hacerla fácilmente.",
        [
            "» /Sí/ es una afirmación.",
            "» /Me gusta/ expresa preferencia o gusto.",
            "» /Y/ es una conjunción que añade información.",
            "» /Sé hacerla/ indica habilidad o conocimiento.",
            "» /Fácilmente/ es un adverbio que describe cómo se hace algo."
        ]
    ],
    [
        "Me gusta la sopa de lentejas, pero nunca la he cocinado.",
        [
            "» /Me gusta/ expresa preferencia o gusto.",
            "» /Pero/ es una conjunción que introduce una contradicción.",
            "» /Nunca/ es un adverbio que indica falta de experiencia.",
            "» /La he cocinado/ es una forma del pretérito perfecto compuesto."
        ]
    ],
    [
        "Sí, la pizza margarita me gusta, y sé hacer masa casera.",
        [
            "» /Sí/ es una afirmación.",
            "» /Me gusta/ expresa preferencia o gusto.",
            "» /Y/ es una conjunción que añade información.",
            "» /Sé hacer/ indica habilidad o conocimiento.",
            "» /Masa casera/ es un sustantivo que describe un tipo de masa."
        ]
    ],
    [
        "El ceviche me parece rico, pero no sé prepararlo bien.",
        [
            "» /Me parece/ expresa una opinión.",
            "» /Rico/ es un adjetivo que describe algo sabroso.",
            "» /Pero/ es una conjunción que introduce una contradicción.",
            "» /No sé/ expresa falta de habilidad o conocimiento.",
            "» /Bien/ es un adverbio que describe cómo se hace algo."
        ]
    ],
    [
        "Me encantan las hamburguesas, y sí, sé hacerlas en casa.",
        [
            "» /Me encantan/ expresa un gusto muy fuerte.",
            "» /Y/ es una conjunción que añade información.",
            "» /Sí/ es una afirmación.",
            "» /Sé hacerlas/ indica habilidad o conocimiento.",
            "» /En casa/ es una expresión que indica el lugar donde se hace algo."
        ]
    ],
    [
        "Me gusta el sushi, pero es difícil de hacer para mí.",
        [
            "» /Me gusta/ expresa preferencia o gusto.",
            "» /Pero/ es una conjunción que introduce una contradicción.",
            "» /Es difícil/ expresa que algo requiere esfuerzo o habilidad.",
            "» /Para mí/ indica una perspectiva personal."
        ]
    ],
    [
        "El bocadillo de jamón es mi favorito, y sí, sé prepararlo.",
        [
            "» /Es mi favorito/ expresa una preferencia destacada.",
            "» /Y/ es una conjunción que añade información.",
            "» /Sí/ es una afirmación.",
            "» /Sé prepararlo/ indica habilidad o conocimiento."
        ]
    ],

   [
        "La paella se come al mediodía con la familia.",
        [
            "» /La paella/ es un sustantivo que se refiere a un plato típico.",
            "» /Se come/ es una forma pasiva que indica una acción habitual.",
            "» /Al mediodía/ es una expresión de tiempo que indica cuándo se come.",
            "» /Con la familia/ indica con quién se comparte la comida."
        ]
    ],
    [
        "La tortilla de patatas es buena para el almuerzo o la cena.",
        [
            "» /La tortilla de patatas/ es un sustantivo que se refiere a un plato típico.",
            "» /Es buena/ es una descripción positiva del plato.",
            "» /Para el almuerzo o la cena/ indica los momentos del día en que se consume."
        ]
    ],
    [
        "El gazpacho es perfecto para el verano y se toma frío.",
        [
            "» /El gazpacho/ es un sustantivo que se refiere a un plato típico.",
            "» /Es perfecto/ es una descripción positiva del plato.",
            "» /Para el verano/ indica la estación del año en que se consume.",
            "» /Se toma frío/ describe cómo se consume el plato."
        ]
    ],
    [
        "La ensalada César se come en el almuerzo o como entrada.",
        [
            "» /La ensalada César/ es un sustantivo que se refiere a un tipo de ensalada.",
            "» /Se come/ es una forma pasiva que indica una acción habitual.",
            "» /En el almuerzo/ indica el momento del día en que se consume.",
            "» /Como entrada/ describe el papel del plato en una comida."
        ]
    ],
    [
        "La sopa de lentejas es ideal para la cena en invierno.",
        [
            "» /La sopa de lentejas/ es un sustantivo que se refiere a un plato típico.",
            "» /Es ideal/ es una descripción positiva del plato.",
            "» /Para la cena/ indica el momento del día en que se consume.",
            "» /En invierno/ indica la estación del año en que se consume."
        ]
    ],
    [
        "La pizza margarita se come en cenas familiares o con amigos.",
        [
            "» /La pizza margarita/ es un sustantivo que se refiere a un tipo de pizza.",
            "» /Se come/ es una forma pasiva que indica una acción habitual.",
            "» /En cenas familiares/ indica el contexto social en que se consume.",
            "» /O con amigos/ añade otra opción de contexto social."
        ]
    ],
    [
        "El ceviche es típico para el almuerzo en días calurosos.",
        [
            "» /El ceviche/ es un sustantivo que se refiere a un plato típico.",
            "» /Es típico/ indica que es común o tradicional.",
            "» /Para el almuerzo/ indica el momento del día en que se consume.",
            "» /En días calurosos/ describe las condiciones en que se consume."
        ]
    ],
    [
        "Las hamburguesas son populares para fiestas y reuniones.",
        [
            "» /Las hamburguesas/ es un sustantivo que se refiere a un tipo de comida.",
            "» /Son populares/ indica que son comunes o bien aceptadas.",
            "» /Para fiestas y reuniones/ describe el contexto social en que se consumen."
        ]
    ],
    [
        "El sushi se come en cenas especiales o en restaurantes.",
        [
            "» /El sushi/ es un sustantivo que se refiere a un plato típico.",
            "» /Se come/ es una forma pasiva que indica una acción habitual.",
            "» /En cenas especiales/ indica el contexto en que se consume.",
            "» /O en restaurantes/ añade otra opción de lugar."
        ]
    ],
    [
        "El bocadillo de jamón es rápido para el desayuno o la merienda.",
        [
            "» /El bocadillo de jamón/ es un sustantivo que se refiere a un tipo de sándwich.",
            "» /Es rápido/ indica que es fácil de preparar o consumir.",
            "» /Para el desayuno o la merienda/ indica los momentos del día en que se consume."
        ]
    ],
    [
        "La paella se come al mediodía con la familia.",
        [
            "» /La paella/ es un sustantivo que se refiere a un plato típico.",
            "» /Se come/ es una forma pasiva que indica una acción habitual.",
            "» /Al mediodía/ es una expresión de tiempo que indica cuándo se come.",
            "» /Con la familia/ indica con quién se comparte la comida."
        ]
    ],
    [
        "La tortilla de patatas es buena para el almuerzo o la cena.",
        [
            "» /La tortilla de patatas/ es un sustantivo que se refiere a un plato típico.",
            "» /Es buena/ es una descripción positiva del plato.",
            "» /Para el almuerzo o la cena/ indica los momentos del día en que se consume."
        ]
    ],
    [
        "El gazpacho es perfecto para el verano y se toma frío.",
        [
            "» /El gazpacho/ es un sustantivo que se refiere a un plato típico.",
            "» /Es perfecto/ es una descripción positiva del plato.",
            "» /Para el verano/ indica la estación del año en que se consume.",
            "» /Se toma frío/ describe cómo se consume el plato."
        ]
    ],
    [
        "La ensalada César se come en el almuerzo o como entrada.",
        [
            "» /La ensalada César/ es un sustantivo que se refiere a un tipo de ensalada.",
            "» /Se come/ es una forma pasiva que indica una acción habitual.",
            "» /En el almuerzo/ indica el momento del día en que se consume.",
            "» /Como entrada/ describe el papel del plato en una comida."
        ]
    ],
    [
        "La sopa de lentejas es ideal para la cena en invierno.",
        [
            "» /La sopa de lentejas/ es un sustantivo que se refiere a un plato típico.",
            "» /Es ideal/ es una descripción positiva del plato.",
            "» /Para la cena/ indica el momento del día en que se consume.",
            "» /En invierno/ indica la estación del año en que se consume."
        ]
    ],
    [
        "La pizza margarita se come en cenas familiares o con amigos.",
        [
            "» /La pizza margarita/ es un sustantivo que se refiere a un tipo de pizza.",
            "» /Se come/ es una forma pasiva que indica una acción habitual.",
            "» /En cenas familiares/ indica el contexto social en que se consume.",
            "» /O con amigos/ añade otra opción de contexto social."
        ]
    ],
    [
        "El ceviche es típico para el almuerzo en días calurosos.",
        [
            "» /El ceviche/ es un sustantivo que se refiere a un plato típico.",
            "» /Es típico/ indica que es común o tradicional.",
            "» /Para el almuerzo/ indica el momento del día en que se consume.",
            "» /En días calurosos/ describe las condiciones en que se consume."
        ]
    ],
    [
        "Las hamburguesas son populares para fiestas y reuniones.",
        [
            "» /Las hamburguesas/ es un sustantivo que se refiere a un tipo de comida.",
            "» /Son populares/ indica que son comunes o bien aceptadas.",
            "» /Para fiestas y reuniones/ describe el contexto social en que se consumen."
        ]
    ],
    [
        "El sushi se come en cenas especiales o en restaurantes.",
        [
            "» /El sushi/ es un sustantivo que se refiere a un plato típico.",
            "» /Se come/ es una forma pasiva que indica una acción habitual.",
            "» /En cenas especiales/ indica el contexto en que se consume.",
            "» /O en restaurantes/ añade otra opción de lugar."
        ]
    ],
    [
        "El bocadillo de jamón es rápido para el desayuno o la merienda.",
        [
            "» /El bocadillo de jamón/ es un sustantivo que se refiere a un tipo de sándwich.",
            "» /Es rápido/ indica que es fácil de preparar o consumir.",
            "» /Para el desayuno o la merienda/ indica los momentos del día en que se consume."
        ]
    ],
    [
        "Comí paella el domingo con mi familia en un restaurante.",
        [
            "» /Comí/ es el pretérito indefinido del verbo 'comer', que indica una acción pasada.",
            "» /Paella/ es un sustantivo que se refiere a un plato típico.",
            "» /El domingo/ es una expresión de tiempo que indica cuándo ocurrió la acción.",
            "» /Con mi familia/ indica con quién se compartió la comida.",
            "» /En un restaurante/ indica el lugar donde ocurrió la acción."
        ]
    ],
    [
        "La última vez que comí tortilla de patatas fue ayer en casa con mi hermano.",
        [
            "» /La última vez/ es una expresión que indica la ocasión más reciente.",
            "» /Comí/ es el pretérito indefinido del verbo 'comer'.",
            "» /Tortilla de patatas/ es un sustantivo que se refiere a un plato típico.",
            "» /Fue ayer/ indica cuándo ocurrió la acción.",
            "» /En casa/ indica el lugar donde ocurrió la acción.",
            "» /Con mi hermano/ indica con quién se compartió la comida."
        ]
    ],
    [
        "Probé el gazpacho hace una semana en la casa de un amigo.",
        [
            "» /Probé/ es el pretérito indefinido del verbo 'probar', que indica una acción pasada.",
            "» /El gazpacho/ es un sustantivo que se refiere a un plato típico.",
            "» /Hace una semana/ es una expresión de tiempo que indica cuándo ocurrió la acción.",
            "» /En la casa de un amigo/ indica el lugar donde ocurrió la acción."
        ]
    ],
    [
        "La comí el viernes en un café con mi mejor amiga.",
        [
            "» /La comí/ es el pretérito indefinido del verbo 'comer'.",
            "» /El viernes/ es una expresión de tiempo que indica cuándo ocurrió la acción.",
            "» /En un café/ indica el lugar donde ocurrió la acción.",
            "» /Con mi mejor amiga/ indica con quién se compartió la comida."
        ]
    ],
    [
        "Ayer cené sopa de lentejas en mi casa con mis padres.",
        [
            "» /Ayer/ es una expresión de tiempo que indica cuándo ocurrió la acción.",
            "» /Cené/ es el pretérito indefinido del verbo 'cenar'.",
            "» /Sopa de lentejas/ es un sustantivo que se refiere a un plato típico.",
            "» /En mi casa/ indica el lugar donde ocurrió la acción.",
            "» /Con mis padres/ indica con quién se compartió la comida."
        ]
    ],
    [
        "La comí el sábado con mis amigos en una pizzería.",
        [
            "» /La comí/ es el pretérito indefinido del verbo 'comer'.",
            "» /El sábado/ es una expresión de tiempo que indica cuándo ocurrió la acción.",
            "» /Con mis amigos/ indica con quién se compartió la comida.",
            "» /En una pizzería/ indica el lugar donde ocurrió la acción."
        ]
    ],
    [
        "Hace dos meses lo comí en la playa con mi pareja.",
        [
            "» /Hace dos meses/ es una expresión de tiempo que indica cuándo ocurrió la acción.",
            "» /Lo comí/ es el pretérito indefinido del verbo 'comer'.",
            "» /En la playa/ indica el lugar donde ocurrió la acción.",
            "» /Con mi pareja/ indica con quién se compartió la comida."
        ]
    ],
    [
        "Ayer cené una hamburguesa en un parque con mis primos.",
        [
            "» /Ayer/ es una expresión de tiempo que indica cuándo ocurrió la acción.",
            "» /Cené/ es el pretérito indefinido del verbo 'cenar'.",
            "» /Una hamburguesa/ es un sustantivo que se refiere a un tipo de comida.",
            "» /En un parque/ indica el lugar donde ocurrió la acción.",
            "» /Con mis primos/ indica con quién se compartió la comida."
        ]
    ],
    [
        "Comí sushi el fin de semana pasado en un restaurante japonés con mis amigos.",
        [
            "» /Comí/ es el pretérito indefinido del verbo 'comer'.",
            "» /Sushi/ es un sustantivo que se refiere a un plato típico.",
            "» /El fin de semana pasado/ es una expresión de tiempo que indica cuándo ocurrió la acción.",
            "» /En un restaurante japonés/ indica el lugar donde ocurrió la acción.",
            "» /Con mis amigos/ indica con quién se compartió la comida."
        ]
    ],
    [
        "Lo desayuné hoy por la mañana en mi casa solo.",
        [
            "» /Lo desayuné/ es el pretérito indefinido del verbo 'desayunar'.",
            "» /Hoy por la mañana/ es una expresión de tiempo que indica cuándo ocurrió la acción.",
            "» /En mi casa/ indica el lugar donde ocurrió la acción.",
            "» /Solo/ indica que la acción se realizó sin compañía."
        ]
    ],
    [
        "Sí, voy a comer paella este fin de semana con mi familia.",
        [
            "» /Sí/ es una afirmación.",
            "» /Voy a comer/ es una estructura de futuro cercano (ir a + infinitivo).",
            "» /Paella/ es un sustantivo que se refiere a un plato típico.",
            "» /Este fin de semana/ es una expresión de tiempo que indica cuándo ocurrirá la acción.",
            "» /Con mi familia/ indica con quién se compartirá la comida."
        ]
    ],
    [
        "No, no voy a comer tortilla de patatas pronto, pero me gustaría.",
        [
            "» /No/ es una negación.",
            "» /No voy a comer/ es una estructura de futuro cercano en forma negativa.",
            "» /Tortilla de patatas/ es un sustantivo que se refiere a un plato típico.",
            "» /Pronto/ es un adverbio que indica que la acción no ocurrirá en un futuro inmediato.",
            "» /Pero me gustaría/ expresa un deseo o preferencia."
        ]
    ],
    [
        "Sí, mañana voy a tomar gazpacho porque hace mucho calor.",
        [
            "» /Sí/ es una afirmación.",
            "» /Voy a tomar/ es una estructura de futuro cercano (ir a + infinitivo).",
            "» /Gazpacho/ es un sustantivo que se refiere a un plato típico.",
            "» /Mañana/ es una expresión de tiempo que indica cuándo ocurrirá la acción.",
            "» /Porque hace mucho calor/ es una razón que justifica la acción."
        ]
    ],
    [
        "Creo que voy a comer ensalada César esta noche en casa.",
        [
            "» /Creo que/ expresa una opinión o suposición.",
            "» /Voy a comer/ es una estructura de futuro cercano (ir a + infinitivo).",
            "» /Ensalada César/ es un sustantivo que se refiere a un tipo de ensalada.",
            "» /Esta noche/ es una expresión de tiempo que indica cuándo ocurrirá la acción.",
            "» /En casa/ indica el lugar donde ocurrirá la acción."
        ]
    ],
    [
        "No sé si voy a comer sopa de lentejas pronto, pero me gusta mucho.",
        [
            "» /No sé/ expresa incertidumbre.",
            "» /Si voy a comer/ es una estructura condicional de futuro cercano.",
            "» /Sopa de lentejas/ es un sustantivo que se refiere a un plato típico.",
            "» /Pronto/ es un adverbio que indica que la acción podría ocurrir en un futuro cercano.",
            "» /Pero me gusta mucho/ expresa una preferencia."
        ]
    ],
    [
        "Sí, voy a cenar pizza margarita el viernes con mis amigos.",
        [
            "» /Sí/ es una afirmación.",
            "» /Voy a cenar/ es una estructura de futuro cercano (ir a + infinitivo).",
            "» /Pizza margarita/ es un sustantivo que se refiere a un tipo de pizza.",
            "» /El viernes/ es una expresión de tiempo que indica cuándo ocurrirá la acción.",
            "» /Con mis amigos/ indica con quién se compartirá la comida."
        ]
    ],
    [
        "No voy a comer ceviche esta semana, pero quizás el próximo mes.",
        [
            "» /No voy a comer/ es una estructura de futuro cercano en forma negativa.",
            "» /Ceviche/ es un sustantivo que se refiere a un plato típico.",
            "» /Esta semana/ es una expresión de tiempo que indica cuándo no ocurrirá la acción.",
            "» /Pero quizás el próximo mes/ expresa una posibilidad futura."
        ]
    ],
    [
        "Voy a comer una hamburguesa mañana porque me apetece mucho.",
        [
            "» /Voy a comer/ es una estructura de futuro cercano (ir a + infinitivo).",
            "» /Una hamburguesa/ es un sustantivo que se refiere a un tipo de comida.",
            "» /Mañana/ es una expresión de tiempo que indica cuándo ocurrirá la acción.",
            "» /Porque me apetece mucho/ expresa una razón o deseo."
        ]
    ],
    [
        "Sí, el sábado voy a cenar sushi con mi pareja en un restaurante.",
        [
            "» /Sí/ es una afirmación.",
            "» /Voy a cenar/ es una estructura de futuro cercano (ir a + infinitivo).",
            "» /Sushi/ es un sustantivo que se refiere a un plato típico.",
            "» /El sábado/ es una expresión de tiempo que indica cuándo ocurrirá la acción.",
            "» /Con mi pareja/ indica con quién se compartirá la comida.",
            "» /En un restaurante/ indica el lugar donde ocurrirá la acción."
        ]
    ],
    [
        "Voy a desayunar un bocadillo de jamón mañana por la mañana.",
        [
            "» /Voy a desayunar/ es una estructura de futuro cercano (ir a + infinitivo).",
            "» /Un bocadillo de jamón/ es un sustantivo que se refiere a un tipo de sándwich.",
            "» /Mañana por la mañana/ es una expresión de tiempo que indica cuándo ocurrirá la acción."
        ]
    ]
];

document.querySelectorAll('.next-item-button').forEach((button, index) => {
    button.addEventListener('click', () => {
        const nextItem = document.getElementById(`item-${index + 2}`);
        if (nextItem) {
            nextItem.scrollIntoView({ behavior: 'smooth' });
        } else {
            console.log('No more items to scroll to.');
        }
    });
});
document.querySelectorAll('.prev-item-button').forEach((button, index) => {
    button.addEventListener('click', () => {
        const prevItem = document.getElementById(`item-${index + 1}`);
        if (prevItem) {
            prevItem.scrollIntoView({ behavior: 'smooth' });
        } else {
            console.log('No more items to scroll to.');
        }
    });
});


        // Función para mostrar los elementos con animación de onda
        function animateListItems() {
            const listItems = document.querySelectorAll('ul li'); // Selecciona todos los <li>
            let delay = 0; // Retraso inicial

            listItems.forEach((item, index) => {
                setTimeout(() => {
                    item.classList.add('show'); // Muestra el elemento
                    setTimeout(() => {
                        item.classList.add('wave'); // Aplica la animación de onda
                    }, 300); // Retraso para la animación de onda
                }, delay); // Retraso para mostrar el elemento

                delay += 500; // Aumenta el retraso para el siguiente elemento
            });
        }

        // Espera 3 segundos antes de iniciar la animación
        setTimeout(animateListItems, 500);



function normalizeSentence(sentence) {
    return sentence.toLowerCase().split(' ').sort().join(' ');
}

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function createSmokeEffect(button) {
    const smokeColors = ['red', 'yellow'];
    smokeColors.forEach((color, index) => {
        setTimeout(() => {
            const smoke = document.createElement('div');
            smoke.className = `smoke ${color}`;
            button.appendChild(smoke);
            setTimeout(() => smoke.remove(), 2000);
        }, index * 500);
    });
}

function cargarPalabras(itemIndex, cupoIndex, fraseIndex) {
    const wordsContainer = document.getElementById(`words-container-${itemIndex}`);
    const linesContainer = document.getElementById(`lines-container-${itemIndex}`);
    const frase = itemsFrases[itemIndex - 1][cupoIndex][fraseIndex];
    wordsContainer.innerHTML = '';
    let palabrasDesordenadas = shuffle([...frase]);
    
    // Verificar si la frase está completada
    const isCompleted = completedFrases[`${itemIndex}-${cupoIndex}-${fraseIndex}`];
    const checkButton = document.getElementById(`check-button-${itemIndex}`);
    
    if (checkButton) {
        checkButton.disabled = isCompleted || false;
    }

    palabrasDesordenadas.forEach((palabra, index) => {
        const button = document.createElement('div');
        button.className = 'word-button';
        button.textContent = palabra;
        button.dataset.originalIndex = index;

        if (isCompleted) {
            button.style.pointerEvents = 'none';
            button.style.opacity = '0.5';
        }
        

        let pressTimer;
        let isLongPress = false;

        function startPressTimer() {
            pressTimer = setTimeout(() => {
                isLongPress = true;
                mostrarTraduccion(palabra, button);
            }, 800);
        }

        function cancelPressTimer() {
            clearTimeout(pressTimer);
            if (!isLongPress) {
                handleShortPress(button, itemIndex, cupoIndex, fraseIndex);
            }
            isLongPress = false;
        }

        button.addEventListener('mousedown', function (event) {
            event.preventDefault();
            startPressTimer();
        });

        button.addEventListener('touchstart', function (event) {
            event.preventDefault();
            startPressTimer();
        });

        button.addEventListener('mouseup', cancelPressTimer);
        button.addEventListener('touchend', cancelPressTimer);
        button.addEventListener('mouse', cancelPressTimer);
        button.addEventListener('touchcancel', cancelPressTimer);

        wordsContainer.appendChild(button);
    });

    resetButtonsGenerated();
}


function handleShortPress(button, itemIndex, cupoIndex, fraseIndex) {
    const linesContainer = document.getElementById(`lines-container-${itemIndex}`);

    if (!button.classList.contains('selected')) {
        const clickUpSoundClone = soundClickUp.cloneNode();
        clickUpSoundClone.play().catch(error => console.log('Error reproduciendo el sonido de subida:', error));

        const placeholder = document.createElement('div');
        placeholder.className = 'placeholder';
        placeholder.style.width = `${button.clientWidth}px`;
        placeholder.style.height = `${button.clientHeight}px`;
        button.parentNode.insertBefore(placeholder, button);

        button.dataset.originalParent = button.parentNode.id;
        button.dataset.originalIndex = Array.from(button.parentNode.children).indexOf(placeholder);

        button.classList.add('selected');
        createSmokeEffect(button);

        let targetLine = linesContainer.querySelector('.line:last-child');
        
        if (!targetLine) {
            targetLine = document.createElement('div');
            targetLine.className = 'line';
            linesContainer.appendChild(targetLine);
        }

        let remainingWidth = targetLine.getBoundingClientRect().width - Array.from(targetLine.children).reduce((acc, child) => acc + child.getBoundingClientRect().width + 0, 0);

        if (remainingWidth < button.getBoundingClientRect().width) {
            targetLine = document.createElement('div');
            targetLine.className = 'line';
            linesContainer.appendChild(targetLine);
        }

        targetLine.appendChild(button);

        // Iniciar el reloj si es la primera palabra seleccionada
        if (document.querySelectorAll(`#lines-container-${itemIndex} .word-button.selected`).length === 1) {
            startClock(itemIndex);
        }
    } else {
        const clickDownSoundClone = soundClickDown.cloneNode();
        clickDownSoundClone.play().catch(error => console.log('Error reproduciendo el sonido de bajada:', error));

        const originalParent = document.getElementById(button.dataset.originalParent);
        const originalIndex = button.dataset.originalIndex;

        button.classList.remove('selected');
        if (originalParent && originalIndex >= 0) {
            const placeholder = originalParent.children[originalIndex];
            originalParent.insertBefore(button, placeholder);
            placeholder.remove();
        } else {
            const wordsContainer = document.getElementById(`words-container-${itemIndex}`);
            let firstLine = wordsContainer.querySelector('.line');

            if (!firstLine) {
                firstLine = document.createElement('div');
                firstLine.className = 'line';
                wordsContainer.appendChild(firstLine);
            }

            firstLine.appendChild(button);
        }

        const lines = Array.from(linesContainer.children);
        lines.forEach((line, index) => {
            if (line.children.length === 0 && index !== 0) {
                line.remove();
            }
        });
    }
    removeExtraButtons();
    resetButtonsGenerated();
}

function mostrarTraduccion(palabra, button) {
    const traduccion = traducciones[palabra];
    if (traduccion) {
        let contenidoTraduccion = `<center><div style="border: 1px solid black;width: 200px"><strong>"${palabra}"</strong></div></center>
<br><u>Francés:</u><p style="color:blue">${traduccion.frances}</p><u>Árabe:</u>  <p style="color:blue">${traduccion.arabe}</p>`;
        if (traduccion.explicacion) {
            contenidoTraduccion += `<br><br><em>${traduccion.explicacion}</em>`;
        }
        Swal.fire({
            title: '<p style="color:purple">Traducción</p>',
            html: contenidoTraduccion,
            confirmButtonText: 'OK',
            position: 'center'
        });
    }
}

const audiosFrases = {
    1: [
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-04/moss-audio/user_audio//1744490519495405426-257792482984089.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-04/moss-audio/user_audio//1744490599448383066-257792781013141.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497022400375169-257819384520836.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497069772439234-257819441528967.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497107005301984-257818802630749.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497135664889523-257818802630757.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497225951190319-257818979934382.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497261490213481-257819441528999.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497295657687019-257819384520877.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497336413466203-257820636024967.mp3"
      
    ],
    2: [
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744495577533052294-257812733898926.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744495716160101207-257813742645398.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744496123780408282-257815401062496.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744496188814937428-257815500099747.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744496233503474171-257815486689453.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744496273985566254-257815401062522.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744496318099762190-257816600862786.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744496355059393331-257816774598785.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744496393363198941-257816354222233.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744496425303942913-257816774598803.mp3"
        
    ],
    3: [
    "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497709012620759-257822022852693.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497739393768237-257821474939070.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497770121439053-257821968240809.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497795627672673-257822022852723.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497821425295693-257822277517470.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497849650285999-257822477926557.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497888889998147-257822950199369.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497917996194275-257822477926574.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497945358036702-257823169089681.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744497975630807149-257823169089691.mp3"
    ],
    4: [
    "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744498271289042245-257823967891623.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744498321650385310-257824856670272.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744498385892816717-257824331874483.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744498432958318662-257824856670292.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744498471050715983-257825309188237.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744498509625417007-257825006919846.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744498547863984417-257824862761130.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744498599422883697-257824862761139.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744498640460039657-257825309188273.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744498678900664568-257825309188283.mp3"
    ], 

    5: [
    "https://cdn.hailuoai.video/moss/prod/2025-04-13-06/moss-audio/user_audio//1744498778636607921-257826158633056.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-07/moss-audio/user_audio//1744498818273368947-257826307051681.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-07/moss-audio/user_audio//1744498857416936071-257826158633076.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-07/moss-audio/user_audio//1744498904033568210-257827189219398.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-07/moss-audio/user_audio//1744498942406387793-257827170517134.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-07/moss-audio/user_audio//1744498978627058407-257827389206668.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-07/moss-audio/user_audio//1744499013509309334-257827546013834.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-07/moss-audio/user_audio//1744499047146528011-257827170517154.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-07/moss-audio/user_audio//1744499087190822712-257827189219436.mp3",
        "https://cdn.hailuoai.video/moss/prod/2025-04-13-07/moss-audio/user_audio//1744499119857184643-257827189219445.mp3"
    ]

};
function checkIfPhraseComplete(itemIndex, cupoIndex, fraseIndex) {
    const checkButton = document.getElementById(`check-button-${itemIndex}`);
    // Si la frase ya está completada o el botón está deshabilitado, no hacer nada
    if (
        completedFrases[`${itemIndex}-${cupoIndex}-${fraseIndex}`] ||
        (checkButton && checkButton.disabled)
    ) {
        return;
    }

    const selectedWords = Array.from(document.querySelectorAll(`#item-${itemIndex} .lines-container .word-button`))
        .map(button => button.textContent.trim());

    const currentPhrase = itemsFrases[itemIndex - 1][cupoIndex][fraseIndex].map(word => word.trim());
    const fraseCompuesta = currentPhrase.join(' ');
    const audioURL = audiosFrases[itemIndex]?.[fraseIndex] || '';
    const frasesItem = itemsFrases[itemIndex - 1][cupoIndex];
    const isLastPhrase = fraseIndex === frasesItem.length - 1;

    if (selectedWords.join(' ') === fraseCompuesta) {
        completedFrases[`${itemIndex}-${cupoIndex}-${fraseIndex}`] = true;
        saveCompletedFrases();
        updateTape(itemIndex, fraseIndex);

        document.querySelectorAll(`#item-${itemIndex} .word-button`).forEach(btn => {
            btn.style.pointerEvents = 'none';
            btn.style.opacity = '0.5';
        });

        soundSuccess.cloneNode().play().catch(() => {});
        startPermanentAnimation(itemIndex);
        stopClock(itemIndex);
        stopClockAndCalculatePoints(itemIndex);

        // Deshabilitar el botón de comprobar para evitar sumar puntos falsos
        if (checkButton) {
            checkButton.disabled = true;
        }

        // Variable para controlar si debemos procesar el resultado
        let shouldProcessResult = true;

        // Variable para saber si se mostró traducción o reglas
        let wasExtraDialog = false;

        const showMainAlert = () => {
            Swal.fire({
            title: '¡Correcto!',
            html: `
                <div style="text-align: center;">
                <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 10px;">
                    <svg width="30" height="30" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM8 15L3 10L4.41 8.59L8 12.17L15.59 4.58L17 6L8 15Z" fill="#4CAF50"/>
                    </svg>
                </div>
                <div style="background: #f0f8ff; padding: 10px; border-radius: 5px; margin: 10px 0; font-weight: bold;">
                    "${fraseCompuesta}"
                </div>
                <audio id="swalAudioPlayer" controls autoplay style="width: 100%; max-width: 300px; margin: 15px auto; display: block;">
                    <source src="${audioURL}" type="audio/mpeg">
                    Tu navegador no soporta audio HTML5.
                </audio>
                ${isLastPhrase ? `
                <div style="margin-top: 20px; display: flex; justify-content: center; gap: 15px;padding: 10px 10px;">
                    <button id="traduccionBtn" class="btn btn-primary" style="padding: 5px 5px; background-color: #40E0D0; border: 2px solid #40E0D0; color: black; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3), 0 6px 12px rgba(0, 0, 0, 0.4); transition: box-shadow 0.3s ease;">
                    <i class="fas fa-language"></i> Traducción
                    </button>
                    <button id="reglasBtn" class="btn btn-info" style="padding: 8px 15px; background-color: lightgray; border: 2px solid lightgray; color: black; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3), 0 6px 12px rgba(0, 0, 0, 0.4); transition: box-shadow 0.3s ease;">
                    <i class="fas fa-info-circle"></i> Reglas
                    </button>
                </div>
                ` : ''}
                </div>
            `,
            width: '600px',
            showConfirmButton: true,
            confirmButtonText: 'Continuar',
            allowOutsideClick: false,
            allowEscapeKey: false,
            didOpen: () => {
                const audio = document.getElementById('swalAudioPlayer');
                if (audio) {
                audio.load();
                audio.play().catch(() => {
                    const container = audio.parentElement;
                    const warning = document.createElement('p');
                    warning.style.color = '#ff9800';
                    warning.style.marginTop = '10px';
                    warning.textContent = 'Haz clic en el botón de reproducción';
                    container.appendChild(warning);
                });
                }

                if (isLastPhrase) {
                document.getElementById('traduccionBtn').addEventListener('click', () => {
                    wasExtraDialog = true;
                    shouldProcessResult = false;
                    Swal.fire({
                    title: '<p style="color:purple">Traducción</p>',
                    html: `<p style="color:blue"><strong>${traduccionesFrases[itemIndex][fraseIndex]}</strong></p>`,
                    confirmButtonText: 'OK',
                    position: 'center',
                    allowOutsideClick: false,
                    allowEscapeKey: false,
                    willClose: () => {
                        // Al cerrar, volver a mostrar la alerta principal
                        showMainAlert();
                    }
                    });
                });

                document.getElementById('reglasBtn').addEventListener('click', () => {
                    const fraseNormalizada = normalizeSentence(fraseCompuesta);
                    let reglas = "No se encontraron reglas específicas para esta frase.";
                    for (const item of reglasItems) {
                    if (normalizeSentence(item[0]) === fraseNormalizada) {
                        reglas = item[1].join('<br><hr>');
                        break;
                    }
                    }
                    wasExtraDialog = true;
                    shouldProcessResult = false;
                    Swal.fire({
                    title: '<p style="color:purple">Reglas</p>',
                    html: `<div style='border:solid 1px; max-height: 400px; overflow-y: auto; padding-right: 5px;'>
                        <p><strong>${reglas}</strong></p>
                    </div>`,
                    confirmButtonText: 'OK',
                    position: 'center',
                    allowOutsideClick: false,
                    allowEscapeKey: false,
                    willClose: () => {
                        // Al cerrar, volver a mostrar la alerta principal
                        showMainAlert();
                    }
                    });
                });
                }
            },
            willClose: () => {
                const audio = document.getElementById('swalAudioPlayer');
                if (audio) audio.pause();
            }
            }).then((result) => {
            // Si se mostró traducción o reglas, no procesar aquí, solo resetear el flag
            if (wasExtraDialog) {
                wasExtraDialog = false;
                shouldProcessResult = true;
                return;
            }
            if (result.isConfirmed && shouldProcessResult) {
                const frasesItem = itemsFrases[itemIndex - 1][cupoIndex];
                const itemCompleto = frasesItem.every((_, idx) =>
                completedFrases[`${itemIndex}-${cupoIndex}-${idx}`]
                );
                generarBotonesAdicionales(itemIndex, true, currentPhrase, fraseIndex);

                if (itemCompleto) {
                const removedItems = JSON.parse(localStorage.getItem('removedItems')) || [];
                if (!removedItems.includes(itemIndex)) {
                    removedItems.push(itemIndex);
                    localStorage.setItem('removedItems', JSON.stringify(removedItems));
                }
                // Calcular cuántos ítems quedan por completar
                const remainingItems = Array.from({ length: 5 }, (_, i) => i + 1).filter(i => !removedItems.includes(i));
                if (remainingItems.length > 0) {
                    Swal.fire({
                    title: `Ítem ${itemIndex} completado`,
                    text: `Ánimo 💪te faltan otros`,
                    icon: 'success',
                    confirmButtonText: 'Continuar',
                    allowOutsideClick: false
                    }).then(() => {
                    const currentItem = document.getElementById(`item-${itemIndex}`);
                    const nextItemIndex = remainingItems[0];
                    const nextItem = document.getElementById(`item-${nextItemIndex}`);
                    currentItem.style.transition = 'opacity 0.5s ease';
                    currentItem.style.opacity = '0';
                    setTimeout(() => {
                        currentItem.style.display = 'none';
                        if (nextItem) nextItem.scrollIntoView({ behavior: 'smooth' });
                    }, 500);
                    });
                } else {
                    mostrarMensajeFinal();
                }
                }
            }
            });
        };

        // Mostrar la alerta principal por primera vez
        showMainAlert();
    } else {
        soundFailure.cloneNode().play().catch(() => {});
        Swal.fire({
            title: '¡Incorrecto!',
            text: 'La frase no coincide.',
            icon: 'error'
        });
    }
}

function checkAllFrasesCompleted(itemIndex) {
    const cupoIndex = 0; // Asumimos solo un cupo
    const frases = itemsFrases[itemIndex - 1][cupoIndex];
    
    for (let fraseIndex = 0; fraseIndex < frases.length; fraseIndex++) {
        if (!completedFrases[`${itemIndex}-${cupoIndex}-${fraseIndex}`]) {
            return false;
        }
    }
    return true;
}

function showAllFrasesCompletedMessage(itemIndex) {
    const currentItem = document.getElementById(`item-${itemIndex}`);
    const isLastItem = itemIndex === 5; // Asumiendo que hay 5 ítems

    if (isLastItem) {
        Swal.fire({
            title: '¡Tarea Completada!',
            html: '¿Qué deseas hacer ahora?',
            icon: 'success',
            showDenyButton: true,
            showCancelButton: false,
            confirmButtonText: '<i class="fas fa-redo"></i> Reiniciar',
            denyButtonText: '<i class="fas fa-arrow-left"></i> Volver',
            allowOutsideClick: false,
            allowEscapeKey: false,
            customClass: {
                confirmButton: 'btn btn-success mr-2',
                denyButton: 'btn btn-primary'
            },
            buttonsStyling: true
        }).then((result) => {
            if (result.isConfirmed) {
                // Reiniciar toda la actividad
                reiniciarTodo();
            } else if (result.isDenied) {
                // Volver atrás después de reiniciar
                reiniciarYVolver();
            }
        });
    } else {
        // Comportamiento normal para ítems intermedios
        const nextItem = document.getElementById(`item-${itemIndex + 1}`);
        Swal.fire({
            title: '¡Ítem completado!',
            text: 'Has terminado todas las frases de este ítem',
            icon: 'success',
            confirmButtonText: 'Continuar al siguiente ítem'
        }).then(() => {
            currentItem.style.opacity = 0;
            setTimeout(() => {
                currentItem.style.display = 'none';
                nextItem.scrollIntoView({ behavior: 'smooth' });
            }, 500);
        });
    }
}



function reiniciarYVolver() {
    reiniciarTodo();
    setTimeout(() => {
        window.location.href = "index.html"; // O la URL de tu página inicial
    }, 300);
}

function reiniciarTodo() {
    const audio = document.getElementById("miAudio");
    if (audio) {
        audio.pause();
        audio.currentTime = 0;
    }
    
    // 1. Limpiar todas las variables de estado
    globalScore = 0;
    
    // Limpiar objetos de puntuaciones y frases completadas
    for (const key in itemScores) delete itemScores[key];
    for (const key in completedFrases) delete completedFrases[key];
    
    // 2. Limpiar completamente el localStorage
    localStorage.clear();
    
    // 3. Mostrar confirmación y recargar
    Swal.fire({
        title: 'Reiniciando...',
        text: 'Todos los datos han sido borrados',
        icon: 'success',
        timer: 1500,
        showConfirmButton: false
    }).then(() => {
        // 4. Recargar la página para un reinicio completo
        location.reload();
        
        // 5. Mostrar el botón de empezar nuevamente
        document.getElementById('empezar-btn').style.display = 'block';
        
        // 6. Ocultar todos los ítems excepto las instrucciones
        document.querySelectorAll('.item-container').forEach(item => {
            item.style.display = 'none';
        });
    });
}

// Nueva función para reiniciar y volver
function reiniciarYVolver() {
    // 1. Limpiar todos los datos
    reiniciarTodo();
    
    // 2. Esperar un breve momento para asegurar que se complete el reinicio
    setTimeout(() => {
        // 3. Redirigir a la página anterior
        window.history.back();
    }, 300);
}

function verificarTareaCompleta() {
    // Verificar todas las frases de todos los ítems
    for (let itemIndex = 1; itemIndex <= 5; itemIndex++) {
        const cupoIndex = 0; // Asumimos solo un cupo
        const frases = itemsFrases[itemIndex - 1][cupoIndex];
        
        for (let fraseIndex = 0; fraseIndex < frases.length; fraseIndex++) {
            if (!completedFrases[`${itemIndex}-${cupoIndex}-${fraseIndex}`]) {
                return false; // Si falta alguna frase, no está completa
            }
        }
    }
    return true; // Todas las frases de todos los ítems están completas
}

function mostrarMensajeFinal() {
    Swal.fire({
        title: '¡Tarea Completada!',
        html: '¡Felicidades! Has completado todas las frases de todos los ítems.<br><br>¿Qué deseas hacer ahora?',
        icon: 'success',
        showDenyButton: true,
        confirmButtonText: '<i class="fas fa-redo"></i> Reiniciar',
        denyButtonText: '<i class="fas fa-home"></i> Volver al inicio',
        allowOutsideClick: false,
        allowEscapeKey: false,
        customClass: {
            confirmButton: 'btn btn-success mr-2',
            denyButton: 'btn btn-primary'
        },
        buttonsStyling: true,
        backdrop: `
            rgba(0,0,123,0.4)
            url("/img/confetti.gif")
            center top
            no-repeat
        `
    }).then((result) => {
        if (result.isConfirmed) {
            reiniciarTodo();
        } else if (result.isDenied) {
            reiniciarYVolver();
        }
    });
}

function startPermanentAnimation(itemIndex) {
    const refreshButton = document.getElementById(`refresh-button-${itemIndex}`);
    const nextButton = document.getElementById(`next-button-${itemIndex}`);

   

    if (nextButton) {
        nextButton.classList.add('pulse-button'); // Inicia la animación de pulso

        let isDark = false; // Alternador de color

        // Alternar el color del botón Next cada 500ms
        const intervalId = setInterval(() => {
            const darkViolet = "#5D3FD3"; // Violeta oscuro
            const lightViolet = "#D8BFD8"; // Violeta claro

            nextButton.style.backgroundColor = isDark ? lightViolet : darkViolet;
            isDark = !isDark;
        }, 500);

        // Función para detener TODA la animación al hacer clic en "Next"
        function stopAllAnimation() {
            clearInterval(intervalId); // Detener cambio de color
            nextButton.classList.remove('pulse-button'); // Detener animación de pulso
            nextButton.style.backgroundColor = ""; // Restaurar color original

            if (refreshButton) {
                refreshButton.classList.remove('rotate-button'); // Detener rotación del Refresh
            }

            nextButton.removeEventListener('click', stopAllAnimation); // Evitar múltiples ejecuciones
        }

        // Agregar el evento para detener todo al hacer clic en "Next"
        nextButton.addEventListener('click', stopAllAnimation);
    }
}

// Función para detener manualmente todas las animaciones
function stopAnimation() {
    const refreshButton = document.querySelector('.rotate-button');
    const nextButton = document.querySelector('.pulse-button');

    if (refreshButton) {
        refreshButton.classList.remove('rotate-button'); // Detiene la rotación del botón Refresh
    }

    if (nextButton) {
        nextButton.classList.remove('pulse-button'); // Detiene el efecto de pulso
        nextButton.style.backgroundColor = ""; // Restaura el color original
    }
}



function arraysEqual(arr1, arr2) {
    if (arr1.length !== arr2.length) return false;
    for (let i = 0; i < arr1.length; i++) {
        if (arr1[i] !== arr2[i]) return false;
    }
    return true;
}

function arraysEquivalent(arr1, arr2) {
    const normalizedArr1 = normalizeSentence(arr1.join(" "));
    const normalizedArr2 = normalizeSentence(arr2.join(" "));
    return normalizedArr1 === normalizedArr2;
}
// Eliminar el flag buttonsGenerated y modificar la función
function generarBotonesAdicionales(itemIndex, esCorrecta, frase, fraseIndex) {
    const linesContainer = document.querySelector(`#item-${itemIndex} .lines-container`);
    let lastLine = linesContainer.lastElementChild;

    // Limpiar botones adicionales previos
    const existingExtraButtons = linesContainer.querySelectorAll('.extra-buttons');
    existingExtraButtons.forEach(btn => btn.remove());

    // Solo agregar botones si la respuesta es correcta
    if (esCorrecta) {
        const extraButtonsContainer = document.createElement('div');
        extraButtonsContainer.className = 'extra-buttons';

        // Botón de Traducción
        const traduceButton = document.createElement('button');
        traduceButton.className = 'extra-button translate-button';
        traduceButton.innerHTML = '<i class="fas fa-language"></i>';
        traduceButton.onclick = () => mostrarTraduccionCompleta(itemIndex, fraseIndex);
        extraButtonsContainer.appendChild(traduceButton);

        // Botón de Reglas
        const reglasButton = document.createElement('button');
        reglasButton.className = 'extra-button info-button';
        reglasButton.innerHTML = '<i class="fas fa-info-circle"></i>';
        reglasButton.onclick = () => mostrarReglas(frase);
        extraButtonsContainer.appendChild(reglasButton);

        // Asegurar que haya espacio en la última línea
        const remainingWidth = lastLine.offsetWidth - Array.from(lastLine.children)
            .reduce((acc, child) => acc + child.offsetWidth, 0);

        if (remainingWidth < 100) {
            const newLine = document.createElement('div');
            newLine.className = 'line';
            linesContainer.appendChild(newLine);
            lastLine = newLine;
        }

        lastLine.appendChild(extraButtonsContainer);
    }
}

function mostrarTraduccionCompleta(itemIndex, fraseIndex) {
    const traduccionCompleta = traduccionesFrases[itemIndex][fraseIndex];

    Swal.fire({
        title: '<p style="color:purple">Traducción</p>',
        html: `<p style="color:blue"><strong>${traduccionCompleta}</strong>`,
        confirmButtonText: 'OK',
        position: 'center'
    });
}

function mostrarReglas(frase) {
    const fraseNormalizada = normalizeSentence(frase.join(" "));
    let reglas;

    for (const item of reglasItems) {
        if (normalizeSentence(item[0]) === fraseNormalizada) {
            reglas = item[1];
            break;
        }
    }

    if (reglas) {
        reglas = reglas.join('<br><hr>');
    } else {
        reglas = "No se encontraron reglas específicas para esta frase.";
    }

    Swal.fire({
        title: '<p style="color:purple">Reglas</p>',
        html: `<div id="reglas-container" style='border:solid 1px; max-height: 400px; overflow-y: auto; padding-right: 5px;'><p><strong>${reglas}</strong></p></div>`,
        confirmButtonText: 'OK',
        position: 'center'
    });
}

function updateTape(itemIndex, currentFraseIndex) {
    const tapeContainer = document.querySelector(`#item-${itemIndex} .tape-container`);
    if (!tapeContainer) return;

    const tapeNumbers = tapeContainer.querySelectorAll('.number-box');
    const cupoIndex = 0;
    let visibleCount = 0;
    

    tapeNumbers.forEach((box, originalIndex) => {
        if (completedFrases[`${itemIndex}-${cupoIndex}-${originalIndex}`]) {
            box.style.display = 'none'; // Ocultar completadas
        } else {
            visibleCount++;
            box.style.display = 'inline-block';
            box.textContent = visibleCount; // Numeración correlativa
            box.dataset.originalIndex = originalIndex;

            // Resaltar la actual (si no está completada)
            if (originalIndex === currentFraseIndex && !completedFrases[`${itemIndex}-${cupoIndex}-${originalIndex}`]) {
                box.style.backgroundColor = '#0056b3';
                box.style.transform = 'scale(1.1)';
            } else {
                box.style.backgroundColor = '';
                box.style.transform = '';
            }
        }
    });
}

function findFirstIncompletePhrase(itemIndex) {
    const frases = itemsFrases[itemIndex - 1][0]; // Suponiendo que solo hay un cupo (cupoIndex = 0)
    for (let fraseIndex = 0; fraseIndex < frases.length; fraseIndex++) {
        const key = `${itemIndex}-0-${fraseIndex}`;
        if (!completedFrases[key]) {
            return fraseIndex; // Retorna el índice de la primera frase no completada
        }
    }
    return -1; // Si todas están completadas, retorna -1
}

function initTape(itemIndex) {
    const tapeNumbers = document.querySelectorAll(`#item-${itemIndex} .tape-container .number-box`);

}


function setupButtons(itemIndex, cupoIndex) {
    const frases = itemsFrases[itemIndex - 1][cupoIndex];
    let fraseIndex = 0;

    const nextButton = document.getElementById(`next-button-${itemIndex}`);
    const prevButton = document.getElementById(`prev-button-${itemIndex}`);
    const refreshButton = document.getElementById(`refresh-button-${itemIndex}`);
    const checkButton = document.getElementById(`check-button-${itemIndex}`);

    const getNextUncompletedIndex = (currentIndex, direction) => {
        const total = frases.length;
        let newIndex = currentIndex;
        
        do {
            newIndex = (newIndex + direction + total) % total;
            if (newIndex === currentIndex) break;
        } while (completedFrases[`${itemIndex}-${cupoIndex}-${newIndex}`]);
        
        return newIndex;
    };

    if (nextButton) {
        nextButton.addEventListener('click', function() {
            fraseIndex = getNextUncompletedIndex(fraseIndex, 1);
            updatePhrase(itemIndex, cupoIndex, fraseIndex);
            updateCheckButtonState();
        });
    }

    if (prevButton) {
        prevButton.addEventListener('click', function() {
            fraseIndex = getNextUncompletedIndex(fraseIndex, -1);
            updatePhrase(itemIndex, cupoIndex, fraseIndex);
            updateCheckButtonState();
        });
    }


    if (refreshButton) {
        refreshButton.addEventListener('click', function () {
            const clickDownSoundClone = soundClickDown.cloneNode();
            clickDownSoundClone.play().catch(error => console.log('Error reproduciendo el sonido de bajada:', error));

            cargarPalabras(itemIndex, cupoIndex, fraseIndex);
            const linesContainer = document.getElementById(`lines-container-${itemIndex}`);
            if (linesContainer) {
                linesContainer.innerHTML = '';

                const defaultLine = document.createElement('div');
                defaultLine.className = 'line';
                linesContainer.appendChild(defaultLine);

                removeExtraButtons();
                resetButtonsGenerated();
            }
            stopClock(itemIndex);
        });
    }

    if (checkButton) {
    checkButton.addEventListener('click', function() {
        checkIfPhraseComplete(itemIndex, cupoIndex, fraseIndex);
        const isCorrect = checkButton.dataset.correct === "true";
        
        if (isCorrect) {
            const successSoundClone = soundSuccess.cloneNode();
            successSoundClone.play().catch(error => console.log('Error reproduciendo el sonido de éxito:', error));
            
            // Obtener la frase compuesta del array
            const fraseCompleta = frasesCompuestas[itemIndex - 1][fraseIndex];
            
            // Obtener el audio correspondiente
            const audioURL = audiosFrases[itemIndex]?.[fraseIndex] || '';
            
            Swal.fire({
                title: '¡Correcto!',
                html: `<div style="text-align: center; margin-bottom: 10px;">
                         <i class="fas fa-check-circle" style="color: #28a745; font-size: 30px;"></i>
                       </div>
                       <div style="text-align: left;">
                         <p></p>
                         <div style="background-color: #f8f9fa; border-left: 4px solid #28a745; padding: 10px; margin: 10px 0;">
                           <strong>"${fraseCompleta}"</strong>
                         </div>
                       </div>
                       ${audioURL ? `
                       <div style="margin-top: 20px; text-align: center;">
                         <audio controls autoplay style="width: 100%; max-width: 300px;">
                           <source src="${audioURL}" type="audio/mpeg">
                           Tu navegador no soporta el elemento de audio.
                         </audio>
                       </div>
                       ` : ''}`,
                showConfirmButton: true,
                confirmButtonText: 'Continuar',
                didOpen: () => {
                    // Intentar reproducir automáticamente si hay audio
                    if (audioURL) {
                        const audio = Swal.getPopup().querySelector('audio');
                        audio.play().catch(e => {
                            console.log("Autoplay bloqueado:", e);
                            // Mostrar instrucción si el autoplay falla
                            const audioContainer = audio.parentElement;
                            const playMessage = document.createElement('p');
                            playMessage.style.color = '#ff9800';
                            playMessage.style.fontSize = '0.8em';
                            playMessage.textContent = 'Haz clic en el botón de reproducción';
                            audioContainer.appendChild(playMessage);
                        });
                    }
                }
            }).then(() => {
                generarBotonesAdicionales(itemIndex, true, frases[fraseIndex], fraseIndex);
                
            });
        }
    });
}
   


function updatePhrase(itemIndex, cupoIndex, fraseIndex) {
    const soundClone = soundNext.cloneNode();
    soundClone.play().catch(error => console.log('Error reproduciendo el sonido:', error));

    const isCompleted = completedFrases[`${itemIndex}-${cupoIndex}-${fraseIndex}`];
    const checkButton = document.getElementById(`check-button-${itemIndex}`);
    
    cargarPalabras(itemIndex, cupoIndex, fraseIndex);
    updateTape(itemIndex, fraseIndex);

    if (checkButton) {
        checkButton.disabled = isCompleted || false;
        checkButton.dataset.correct = "false";
    }

    resetClockDisplay(itemIndex);

    const linesContainer = document.getElementById(`lines-container-${itemIndex}`);
    if (linesContainer) {
        linesContainer.innerHTML = '';
        const defaultLine = document.createElement('div');
        defaultLine.className = 'line';
        linesContainer.appendChild(defaultLine);
        removeExtraButtons();
        resetButtonsGenerated();
    }

    stopClock(itemIndex);

};
};


function setupCupos(itemIndex) {
    const cuposContainer = document.getElementById(`cupos-container-${itemIndex}`);

    const unlockedCupos = {
        0: 1,
        1: 1,
        2: 1,
        3: 1,
        4: 1
    };

    const totalCupos = 1;

    for (let i = 0; i < totalCupos; i++) {
        const button = document.createElement('button');
        button.className = 'cupo-button';
        button.textContent = `C${i + 1}`;

        if (i >= unlockedCupos[itemIndex - 1]) {
            button.classList.add('locked');
            const lockIcon = document.createElement('i');
            lockIcon.className = 'fas fa-lock lock-icon';
            button.appendChild(lockIcon);
        } else {
            button.addEventListener('click', function () {
                cargarPalabras(itemIndex, i, 0);
                setupButtons(itemIndex, i);
                Array.from(document.querySelectorAll(`#lines-container-${itemIndex} .line`)).forEach(line => line.innerHTML = '');
                removeExtraButtons();
                resetButtonsGenerated();
            });
        }

        cuposContainer.appendChild(button);
    }
}

function resetAll(itemIndex) {
    const cupoIndex = 0;
    const fraseIndex = 0;
    cargarPalabras(itemIndex, cupoIndex, fraseIndex);
    setupButtons(itemIndex, cupoIndex);
    updateTape(itemIndex, fraseIndex);

    // Habilitar el botón Comprobar
    const checkButton = document.getElementById(`check-button-${itemIndex}`);
    if (checkButton) {
        checkButton.disabled = false;
        checkButton.dataset.correct = "false";
    }

    const clickDownSoundClone = soundClickDown.cloneNode();
    clickDownSoundClone.play().catch(error => console.log('Error reproduciendo el sonido de bajada:', error));
}

// Inicializa la cinta para cada item
for (let i = 1; i <= 5; i++) {
    initTape(i);
}

// Configura los botones y carga las palabras para cada item
itemsFrases.forEach((frase, index) => {
    const itemIndex = index + 1;
    setupCupos(itemIndex);
    cargarPalabras(itemIndex, 0, 0);
    setupButtons(itemIndex, 0);
});

// Aplica la funcionalidad de refresco para todos los botones "REFRESH"
document.querySelectorAll('.refresh-button').forEach((button, index) => {
    button.addEventListener('click', () => resetAll(index + 1));
});



        });
    </script>
    

    
</body>

</html>
