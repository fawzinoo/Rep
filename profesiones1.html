<!DOCTYPE html>
<html lang="es">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Países del mundo</title>
    <style>
        /* Estilos básicos */
        body, html {
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, #505255, #00020a);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        #flashcard-container-wrapper {
            position: relative;
            width: calc(100% - 20px);
            max-width: 600px;
        }
        #flashcard-container {
            width: 100%;
            height: 500px;
            max-height: 500px;
            perspective: 1000px; /* Para el efecto 3D */
            border-radius: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            position: relative;
            background: linear-gradient(to right, #1f3658, #3558e3);
            border: 3px solid #aab0b4;
            margin: 0;
        }
        .flashcard, .results-card {
            width: 100%;
            height: 100%;
            position: absolute;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.4, 0.2, 0.2, 1);
            border-radius: 15px;
            cursor: pointer;
            display: none;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .flashcard.is-visible { display: flex; }
        
        /* Parte frontal y trasera de la tarjeta */
        .front, .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden; /* Evita que se vea la parte trasera al voltearse */
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 15px;
            overflow: hidden;
        }
    
        .card-back {
            transform: rotateY(180deg); /* Gira la parte trasera */
        }
    
        /* Estilo de la parte frontal */
        .front img, .back img { width: 100%; height: 100%; }
    
        /* Estilo de la parte trasera */
        .back {
    width: 100%;
    background: linear-gradient(to bottom, rgba(73, 115, 189, 0.95), rgba(14, 40, 92, 0.9)); /* Fondo azul oscuro */
    color: #ffffff; /* Color del texto */
    transform: rotateY(180deg); /* Rotación para el efecto */
    padding: 20px; /* Margen interno */
    text-align: center; /* Centrado horizontal */
    font-size: 3rem; /* Tamaño del texto */
    font-family: 'Playfair Display', serif; /* Fuente elegante */
    border-radius: 10px; /* Bordes redondeados */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* Sombra más pronunciada */
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8); /* Sombra del texto más fuerte */
    display: flex; /* Flexbox para el centrado */
    justify-content: center; /* Centrar horizontalmente */
    align-items: center; /* Centrar verticalmente */
    flex-direction: column; /* Asegura que el texto fluya en columnas */
    height: 100%; /* Usa toda la altura disponible */
    max-width: 100%; /* Limita el ancho máximo */
    margin: 0 auto; /* Centra dentro del contenedor */
    line-height: 1.4; /* Espaciado entre líneas */
}


.back::before, .back::after {
    content: '';
    position: absolute;
    width: 150px; /* Ajusta el tamaño de la forma */
    height: 150px; /* Ajusta el tamaño de la forma */
    background: rgba(255, 255, 255, 0.3); /* Círculos más claros y visibles */
    border-radius: 50%; /* Forma circular */
    z-index: 0; /* Coloca detrás del texto */
}

.back::before {
    top: -30px; /* Ajusta la posición */
    left: -30px; /* Ajusta la posición */
}

.back::after {
    bottom: -30px; /* Ajusta la posición */
    right: -30px; /* Ajusta la posición */
}

    
        /* El efecto de voltear */
        .flashcard.flipped {
            transform: rotateY(180deg); /* Al hacer clic, se voltea la tarjeta */
        }
    
/* Contenedor de botones */
.button-container {
    width: 100%;
    max-width: 370px;
    display: flex;
    justify-content: space-evenly; /* Espacio uniforme entre todos los botones */
    align-items: center;
    padding: 10px 0px;
    background-color: #ffffff;
    border-radius: 15px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    margin-top: 10px;
}

/* Contenedor en pantalla completa */
.button-container.fullscreen {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;
    width: 90%; /* Ancho ajustado para fullscreen */
}

/* Botones individuales */
.button {
    padding: 10px 15px;
    font-size: 16px;
    cursor: pointer;
    border: none;
    border-radius: 50px;
    background-color: #3498db;
    color: #fff;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}
     
        .button.yes { background-color: #27ae60; margin-right: 25px;}
        .button.no { background-color: #e74c3c;margin-right: 10px; }
        .button.disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        .button:hover:not(.disabled) { transform: translateY(-3px); }
        .counter {
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            background: #f0f2f5;
            color: #333;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9em;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
        }
        #total-cards-container {
            margin-bottom: 10px;
            font-size: 1.2em;
            padding: 10px 20px;
            background-color: #f39c12;
            color: white;
            border-radius: 25px;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
    
        .results-card {
            background: linear-gradient(to right, #f4e2d8, #ba5370);
            color: #fff;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
    
        .results-card h2 {
            margin-bottom: 50px;
            font-size: 2em;
            color: #12235a;
        }
    
        .results-card p {
            margin: 5px 0;
            font-size: 1.2em;
        }
    
        .results-card .highlight {
            font-weight: bold;
            color: #f1c40f;
        }
    
        .circular-progress {
            position: relative;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(#27ae60 var(--progress), #e0e0e0 0deg);
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px auto;
        }
        .circular-progress::before {
            content: "";
            position: absolute;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: #fff;
        }
        .circular-progress span {
            position: absolute;
            font-size: 1.5em;                                  
            font-weight: bold;
            color: #27ae60;
        }
    

#completion-message {
    display: none; /* Inicialmente ocultos */
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    background: white;
    color: #2c3e50;
    font-size: 2em;
    font-weight: bold;
    justify-content: center;
    align-items: center;
    text-align: center;
    z-index: 10;
    border-radius: 15px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}

#final-review-message {
    display: none; /* Inicialmente oculto */
    position: absolute;
    width: 100%;                                     
    height: 100%;
    top: 0;
    left: 0;
    background: white;
    color: #2c3e50;
    font-size: 2em;
    font-weight: bold;
    justify-content: center;
    align-items: center;
    text-align: center;
    z-index: 10;
    border-radius: 15px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}

        #start-exposure-button {
  border-radius: 50%;  /* Hacer el botón redondo */
  padding: 10px;         /* Ajustar el padding para que el icono se vea bien */
  margin-left: 15px;
  
}

.button.disabled {
    background-color: #bdc3c7;  /* Gris */
    cursor: not-allowed; 
    opacity: 0.5;  /* Opcional: Si deseas dar un toque más opaco */
}


@keyframes blink {
    0% {
        opacity: 1;
        color: black; /* color negro al inicio */
    }
    50% {
        opacity: 0.5;
        color: orange; /* color naranja en la mitad del parpadeo */
    }
    100% {
        opacity: 1;
        color: black; /* color negro al final */
    }
}

.playing {
    animation: blink 1s infinite;
}


.overlay-text {
    position: absolute;
    z-index: 1; /* Colocar por encima del contenido */
    color: white; /* Color del texto */
    font-size: 2rem; /* Tamaño del texto */
    font-weight: bold; /* Texto en negrita */
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); /* Sombra del texto */
    text-align: left; /* Alineación a la izquierda */
    pointer-events: none; /* No interferir con los clics */
    margin: 5%; /* Margen relativo */
    line-height: 1.5; /* Espaciado entre líneas */
    top: 40%; /* Posición específica desde arriba */
    left: 0%; /* Posición específica desde la izquierda */
}

/* Estilos para .overlay-text1 */
.overlay-text1 {
    position: absolute;
    top: 5px;
    z-index: 1;
    color: rgb(185, 232, 203); /* Color específico */
    font-size: 2rem; /* Tamaño del texto */
    font-weight: bold; /* Texto en negrita */
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); /* Sombra del texto */
    text-align: center; /* Centrado */
    pointer-events: none; /* No interferir con clics */
    display: inline-block; /* Comportamiento inline */
    animation: pulse 1.5s infinite; /* Animación pulsante */
}

/* Estilos para .overlay-text2 */
.overlay-text2 {
    position: absolute;
    z-index: 1;
    color: white; /* Color del texto */
    font-size: 2rem; /* Tamaño del texto */
    font-weight: bold; /* Negrita */
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); /* Sombra del texto */
    text-align: left; /* Alineación a la izquierda */
    pointer-events: none; /* No interferir con clics */
    margin: 30px; /* Márgenes específicos */
    top: 40%; /* Posición específica desde arriba */
}

@keyframes pulse {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.1);
    opacity: 0.8;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes moveLeftToRight {
  0% {
    transform: translateX(0); /* Posición inicial */
  }
  50% {
    transform: translateX(10px); /* Mueve hacia la derecha */
  }
  100% {
    transform: translateX(0); /* Vuelve a la posición original */
  }
}
@keyframes smoke {
    0% {
        opacity: 1;
        transform: translate(0, 0) scale(1); /* Inicio */
    }
    50% {
        opacity: 0.7;
        transform: translate(0, -100px) scale(2); /* Mover hacia arriba */
    }
    80% {
        opacity: 0.5;
        transform: translate(0, -200px) scale(3); /* Subir más */
    }
    100% {
        opacity: 0.2;
        transform: translate(0, -250px) scale(4); /* Subir mucho más alto */
    }
}

.smoke {
    position: absolute;
    top: 50%; /* Centrado inicial en el botón */
    left: 50%; /* Centrado inicial en el botón */
    width: 30px; /* Tamaño inicial */
    height: 30px; /* Tamaño inicial */
    border-radius: 50%; /* Forma circular */
    background: rgba(0, 255, 0, 0.6); /* Rojo translúcido */
    display: flex;
    justify-content: center; /* Centrar texto horizontalmente */
    align-items: center; /* Centrar texto verticalmente */
    transform-origin: center;
    animation: smoke 2s ease-out forwards; /* Animación */
    pointer-events: none; /* No interferir con eventos del mouse */
}

.smoke span {
    font-size: 10px; /* Tamaño inicial del texto */
    color: white; /* Color del texto */
    font-weight: bold;
    opacity: 1; /* Comienza completamente visible */
    transition: font-size 2s ease, opacity 2s ease; /* Transición suave */
}





@keyframes smoke1 {
    0% {
        opacity: 1;
        transform: translate(0, 0) scale(1); /* Inicio */
    }
    50% {
        opacity: 0.7;
        transform: translate(0, -100px) scale(2); /* Mover hacia arriba */
    }
    80% {
        opacity: 0.5;
        transform: translate(0, -200px) scale(3); /* Subir más */
    }
    100% {
        opacity: 0.2;
        transform: translate(0, -250px) scale(4); /* Subir mucho más alto */
    }
}

.smoke1 {
    position: absolute;
    top: 50%; /* Centrado inicial en el botón */
    left: 50%; /* Centrado inicial en el botón */
    width: 30px; /* Tamaño inicial */
    height: 30px; /* Tamaño inicial */
    border-radius: 50%; /* Forma circular */
    background: rgba(255, 0, 0, 0.6); /* Rojo translúcido */
    display: flex;
    justify-content: center; /* Centrar texto horizontalmente */
    align-items: center; /* Centrar texto verticalmente */
    transform-origin: center;
    animation: smoke1 2s ease-out forwards; /* Animación */
    pointer-events: none; /* No interferir con eventos del mouse */
}

.smoke1 span {
    font-size: 10px; /* Tamaño inicial del texto */
    color: white; /* Color del texto */
    font-weight: bold;
    opacity: 1; /* Comienza completamente visible */
    transition: font-size 2s ease, opacity 2s ease; /* Transición suave */
}


/* Agregar estos estilos CSS en la sección <style> */
.back-arrow {
    position: fixed;
    top: 20px;
    left: 20px;
    width: 50px;
    height: 50px;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    z-index: 1001;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    font-size: 20px;
    color: #333;
}

.back-arrow:hover {
    background-color: #fff;
    transform: scale(1.1);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
}

.back-arrow i {
    color: #333;
}


    </style>
 
</head>
<body>
      <div class="back-arrow" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
    </div>
    <div id="total-cards-container">Faltan: <span id="total-cards"></span></div>
    <div id="flashcard-container-wrapper">

<!--------------------------------------------------------------------->

<div id="flashcard-container">
    <!-- Tarjetas de imágenes -->
    <div class="flashcard">
        <div class="front">                 
            <img src="https://fawzinoo.github.io/Fotos/medico.webp" alt="Médico">
        </div>
        <div class="back">Médico</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/dentista.webp" alt="Dentista">
        </div>
        <div class="back">Dentista</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/veterinario.webp" alt="Veterinario">
        </div>
        <div class="back">Veterinario</div>
    </div>


    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/enfermo.webp" alt="Enfermero">
        </div>
        <div class="back">Enfermero</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/farmaceutico.webp" alt="Farmacéutico">
        </div>
        <div class="back">Farmacéutico</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/profesor.webp" alt="Profesor">
        </div>
        <div class="back">Profesor</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/Estudiante.webp" alt="Estudiante">
        </div>
        <div class="back">Estudiante</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/bombero.webp" alt="Bombero">
        </div>
        <div class="back">Bombero</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/cocinero.webp" alt="Cocinero">
        </div>
        <div class="back">Cocinero</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/policia.webp" alt="Policía">
        </div>
        <div class="back">Policía</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/policia men.webp" alt="Abogado">
        </div>
        <div class="back">Policía</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/camarero.webp" alt="Camarero">
        </div>
        <div class="back">Camarero</div>
    </div>



    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/dependiente.webp" alt="Dependiente">
        </div>
        <div class="back">Dependiente</div>
    </div>
  
    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/comerciante.webp" alt="Comerciante">
        </div>
        <div class="back">Comerciante</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/mecanico.webp" alt="Mecánico">
        </div>
        <div class="back">Mecánico</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/pintor.webp" alt="Pintor">
        </div>
        <div class="back">Pintor</div>
    </div>



    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/actor.webp" alt="Actor">
        </div>
        <div class="back">Actor</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/cantante.webp" alt="Cantante">
        </div>
        <div class="back">Cantante</div>
    </div>



    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/futbolista.webp" alt="Futbolista">
        </div>
        <div class="back">Futbolista</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/deportista.webp" alt="Deportista">
        </div>
        <div class="back">Deportista</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/fotografo.webp" alt="Fotógrafo">
        </div>
        <div class="back">Fotógrafo</div>
    </div>


    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/peluquero.webp" alt="Peluquero">
        </div>
        <div class="back">Peluquero</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/conductor.webp" alt="Conductor">
        </div>
        <div class="back">Conductor</div>
    </div>


    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/taxista.webp" alt="Taxista">
        </div>
        <div class="back">Taxista</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/piloto.webp" alt="Piloto">
        </div>
        <div class="back">Piloto</div>
    </div>



    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/ingeniero.webp" alt="Ingeniero">
        </div>
        <div class="back">Ingeniero</div>
    </div>

 
    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/fontanero.webp" alt="Fontanero">
        </div>
        <div class="back">Fontanero</div>
    </div>
    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/carpintero.webp" alt="Carpintero">
        </div>
        <div class="back">Carpintero</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/periodista.webp" alt="Periodista">
        </div>
        <div class="back">Periodista</div>
    </div>


    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/sastre.webp" alt="Sastre">
        </div>
        <div class="back">Sastre</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/pescadero.webp" alt="Pescadero">
        </div>
        <div class="back">Pescadero</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/agente de trafico.webp" alt="Agente de tráfico">
        </div>
        <div class="back">Agente de tráfico</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/conserje.webp" alt="Conserje">
        </div>
        <div class="back">Conserje</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/seguridad.webp" alt="Seguridad">
        </div>
        <div class="back">Seguridad</div>
    </div>


    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/recepcionista.webp" alt="Recepcionista">
        </div>
        <div class="back">Recepcionista</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/albacero.webp" alt="Albacero">
        </div>
        <div class="back">Albacero</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/carnicero.webp" alt="Carnicero">
        </div>
        <div class="back">Carnicero</div>
    </div>

 
    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/verdulero.webp" alt="Verdulero">
        </div>
        <div class="back">Verdulero</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/frutero.webp" alt="Frutero">
        </div>
        <div class="back">Frutero</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/comercial.webp" alt="Comercial">
        </div>
        <div class="back">Comercial</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/ama%20de%20casa.webp" alt="Ama de casa">
        </div>
        <div class="back">Ama de casa</div>
    </div>

    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/ama%20de%20llaves.webp" alt="Ama de llaves">
        </div>
        <div class="back">Ama de llaves</div>
    </div>


    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/notario.webp" alt="Abogado">
        </div>
        <div class="back">notario</div>
    </div>


    <div class="flashcard">
        <div class="front">
            <img src="https://fawzinoo.github.io/Fotos/presidente.webp" alt="Presidente">
        </div>
        <div class="back">Presidente</div>
    </div>












            <!-- Tarjeta de resultados -->
            <div class="results-card" id="results-card">
                <h2>Resumen de Tarjetas</h2>
                <div style="border: #12235a solid 1px;padding: 10px; border-radius: 10px;background-color: #6e7f85;">
                <p>Total de tarjetas: <span id="total-cards-info" class="highlight">--</span></p>
                <p>Tarjetas no memorizadas (Botón No): <span id="cards-remembered" class="highlight">--</span></p>
                <p>Tarjetas memorizadas (Botón Sí): <span id="cards-not-remembered" class="highlight">--</span></p>
                </div>
                
                <div class="circular-progress" id="progress-circle">
                    <span id="progress-percentage">0%</span>
                </div>
            </div>
        </div>
    </div>
    <div id="final-review-message" style="display: none; text-align: center; font-size: 2em; font-weight: bold; color: #fff; background-color: #27ae60; padding: 20px; border-radius: 15px;">
        ¡Repaso Finalizado! 🎉
    </div>
    
    <div id="completion-message">¡Selección finalizada! 🎉</div>
    <audio id="soundResetButton" src="https://fawzinoo.github.io/audios/bellding-254774.mp3" preload="auto"></audio>
    <audio id="startExposureSound" src="https://fawzinoo.github.io/audios/start.mp3" preload="auto"></audio>


    <audio id="soundYesButton" src="https://fawzinoo.github.io/audios/click-124467.mp3" preload="auto"></audio>
    <audio id="soundNoButton" src="https://fawzinoo.github.io/audios/bubble-popping-229138.mp3" preload="auto"></audio>


   
    <audio id="finalMessageSound" src="https://fawzinoo.github.io/audios/level-win-6416.mp3" preload="auto"></audio>

    <audio id="buttonSound" src="https://fawzinoo.github.io/audios/goodresult-82807.mp3" preload="auto"></audio>

    <div class="button-container">
        <button class="button yes">Sí<span class="counter" id="yes-counter">0</span></button>
        <button class="button no">No<span class="counter" id="no-counter">0</span></button>
        <button class="button" style="background-color: rgb(161, 117, 4);" id="start-exposure-button">
            <i class="fas fa-play"></i> 
        </button> 
       

        <button class="button" id="enlarge-button" style="background-color: #3498db;">
            <i class="fas fa-expand"></i>
        </button>             
        <button class="button" id="reset-button" onclick="location.reload()">Reiniciar</button>
    </div>
    

    <!-- Agregar la librería de confeti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

    <script>
function goBack() {
    // Puedes personalizar esta función según lo que necesites
    if (document.referrer) {
        window.history.back(); // Regresa a la página anterior
    } else {
        // Si no hay página anterior, puedes redirigir a una página específica
        window.location.href = 'https://fawzinoo.github.io/Rep/Vocabulario.html'; // Cambia por la URL que necesites
    }
}



// Seleccionar todas las tarjetas
const Flashcards = Array.from(document.querySelectorAll('.flashcard'));

// Función para detener todos los audios
function stopAllAudios() {
    Flashcards.forEach(card => {
        const audio = card.audio; // Usar el objeto de audio asociado
        if (audio) {
            audio.pause();
            audio.currentTime = 0;
        }
    });
}


Flashcards.forEach(card => {
    // Obtener el audio correspondiente de la tarjeta
    const audioSrc = card.getAttribute('data-audio');
    if (audioSrc) {
        card.audio = new Audio(audioSrc); // Asociar el objeto de audio a la tarjeta
    }

    let isFlipped = true; // Bandera para verificar si la tarjeta ya fue volteada
    let isTransitioning = false; // Controlar si la tarjeta está en transición
    let waveContainer; // Referencia al contenedor de ondas

 

    card.addEventListener('click', () => {
        if (isTransitioning) {
            console.log('Transición en curso, espere...');
            return;
        }

        isTransitioning = true;

        if (!isFlipped) {
            // Voltear a la cara "back"
            card.classList.add('flipped');
            console.log('Volteando a la cara "back".');

            // Añadir las ondas tipo Wi-Fi
            addWifiWaves(card);

            setTimeout(() => {
                stopAllAudios1();

                if (card.audio) {
                    card.audio.currentTime = 0; // Reiniciar el audio
                    card.audio.play().catch(error => console.log('Error al reproducir el audio:', error));
                }
                console.log('Audio reproducido para la cara "back".');
                isTransitioning = false;
            }, 1000);
        } else {
            // Voltear a la cara "front"
            card.classList.remove('flipped');
            console.log('Volteando a la cara "front".');

            // Detener las ondas si están activas
            if (waveContainer) {
                waveContainer.remove();
                waveContainer = null; // Eliminar referencia
            }

            stopAllAudios1();

            setTimeout(() => {
                console.log('Cara "front" lista.');
                isTransitioning = false;
            }, 1000);
        }

        isFlipped = !isFlipped;
    });
});

// Estilos para las ondas Wi-Fi
const style = document.createElement('style');
style.innerHTML = `
.wifi-waves-container {
    position: absolute;
    top: 70%;
    left: 40%;  
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 2;
}

.wifi-wave {
    position: absolute;
    width: 50px;
    height: 50px;
    border: 2px solid rgba(255, 215, 0, 0.8); /* Color dorado translúcido */
    border-radius: 50%;
    animation: wifiWaveAnimation 1.2s infinite;
    opacity: 0;
}

@keyframes wifiWaveAnimation {
    0% {
        transform: scale(0.5);
        opacity: 1;
    }
    100% {
        transform: scale(4); /* Incremento del tamaño de la onda */
        opacity: 0; /* Desaparece gradualmente */
    }
}
`;
document.head.appendChild(style);



function stopAllAudios1() {
    const allAudios = document.querySelectorAll('[data-audio]');
    allAudios.forEach(audio => {
        const audioElement = audio.audio || new Audio(audio.getAttribute('data-audio'));
        audioElement.pause();
        audioElement.currentTime = 0; // Reiniciar el audio
    });
}




const baseUrl = 'https://fawzinoo.github.io/audios/';
const audios = [
    'medico.mp3',
    'dentista.mp3',
    'veterinario.mp3',
    'enfermero.mp3',
    'farmaceutico.mp3',
    'profesor.mp3',
    'estudiante.mp3',
    'bombero.mp3',
    'cocinero.mp3',
    'policia.mp3',
    'policia men.mp3',
    'camarero.mp3',
    'dependiente.mp3',
    'comerciante.mp3',
    'mecanico.mp3',
    'pintor.mp3',
    'actor.mp3',
    'cantante.mp3',
    'futbolista.mp3',
    'deportista.mp3',
    'fotografo.mp3',
    'peluquero.mp3',
    'conductor.mp3',
    'taxista.mp3',
    'piloto.mp3',
    'ingeniero.mp3',
    'fontanero.mp3',
    'carpintero.mp3',
    'periodista.mp3',
    'sastre.mp3',
    'pescadero.mp3',
    'agente de trafico.mp3',
    'conserje.mp3',
    'seguridad.mp3',
    'recepcionista.mp3',
    'albacero.mp3',
    'carnicero.mp3',
    'verdulero.mp3',
    'frutero.mp3',
    'comercial.mp3',
    'ama de casa.mp3',
    'ama de llaves.mp3',
    'notario.mp3',
    'presidente.mp3'
].map(file => new Audio(baseUrl + file));





    // Seleccionar solo las tarjetas de imágenes
    const flashcards = Array.from(document.querySelectorAll('.flashcard'));
    const yesButton = document.querySelector('.button.yes');
    const noButton = document.querySelector('.button.no');

    flashcards.forEach((card, index) => {
    let isAudioPlaying = false; // Bandera para rastrear si el audio está en reproducción
    let waveContainer1; // Referencia al contenedor de ondas Wi-Fi

    // Función para añadir las ondas Wi-Fi en la cara trasera
    function addWifiWaves1(card) {
        waveContainer1 = document.createElement('div');
        waveContainer1.classList.add('wifi-waves-container1');

        for (let i = 1; i <= 3; i++) {
            const wave = document.createElement('div');
            wave.classList.add('wifi-wave1');
            wave.style.animationDelay = `${i * 0.5}s`; // Retraso entre ondas
            waveContainer1.appendChild(wave);
        }

      // Estilos para las ondas Wi-Fi
const style = document.createElement('style');
style.innerHTML = `
.wifi-waves-container1 {
    position: absolute;
    top: 70%;
    left: 43%;  
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 2;
}

.wifi-wave1 {
    position: absolute;
    width: 50px;
    height: 50px;
    border: 2px solid gold; /* Color dorado translúcido */
    border-radius: 50%;
    animation: wifiWaveAnimation 1.2s infinite;
    opacity: 0;
}

@keyframes wifiWaveAnimation {
    0% {
        transform: scale(0.5);
        opacity: 1;
    }
    100% {
        transform: scale(4); /* Incremento del tamaño de la onda */
        opacity: 0; /* Desaparece gradualmente */
    }
}
`;


        document.head.appendChild(style);

        card.querySelector('.back').appendChild(waveContainer1); // Añadir ondas a la cara trasera

        // Remover las ondas después de 5 segundos
        setTimeout(() => {
            if (waveContainer1) {
                waveContainer1.remove();
                waveContainer1 = null; // Limpiar referencia
            }
        }, 3000);
    }

    card.addEventListener('click', () => {
        card.classList.toggle('flipped'); // Alterna la clase 'flipped' para voltear la tarjeta

        if (card.classList.contains('flipped')) {
            // Reproducir el audio inmediatamente
            if (audios[index]) {
                stopAllAudios(); // Detener otros audios antes de reproducir el nuevo
                audios[index].play();
                isAudioPlaying = true;
            }

            // Agregar las ondas Wi-Fi en la cara trasera
            addWifiWaves1(card);

            console.log('click2: Se hizo clic en el reverso de la tarjeta.');
        } else {
            // Detener el audio si la tarjeta se voltea de nuevo
            if (isAudioPlaying && audios[index]) {
                audios[index].pause();
                audios[index].currentTime = 0; // Reiniciar el audio
                isAudioPlaying = false;
            }

            // Eliminar las ondas si están activas
            if (waveContainer1) {
                waveContainer1.remove();
                waveContainer1 = null; // Limpiar referencia
            }

            console.log('click1: Se hizo clic en el frente de la tarjeta.');
        }
    });
});



    // Detener todos los audios al presionar los botones "Sí" o "No"
    yesButton.addEventListener('click', stopAllAudios);
    noButton.addEventListener('click', stopAllAudios);
    yesButton.addEventListener('click', stopAllAudios1);
    noButton.addEventListener('click', stopAllAudios1);

    const enlargeButton = document.getElementById('enlarge-button');
    const buttonContainer = document.querySelector('.button-container');
const flashcardContainer = document.getElementById('flashcard-container');
let isEnlarged = false; // Estado inicial

const updateOverlayStyles = (isFullscreen) => {
    // Seleccionar todos los elementos con las clases correspondientes
    const overlayTexts = document.querySelectorAll('.overlay-text');
    const overlayTexts1 = document.querySelectorAll('.overlay-text1');
    const overlayTexts2 = document.querySelectorAll('.overlay-text2');

    // Detectar si es una pantalla grande
    const isLargeScreen = window.innerWidth > 1024; // Define el límite para pantallas grandes

    // Iterar sobre cada grupo de elementos y aplicar los estilos
    overlayTexts.forEach((overlayText) => {
        if (isFullscreen && isLargeScreen) {
            // Estilos para pantalla completa en pantallas grandes
            overlayText.style.fontSize = '2.5rem';
            overlayText.style.textAlign = 'center'; // Centrado horizontal dentro del contenedor
            overlayText.style.top = '40%'; // Centrado vertical aproximado
            overlayText.style.left = '50%'; // Coloca el texto en el centro horizontal
            overlayText.style.transform = 'translate(-50%, -30%)'; // Ajusta para centrar el texto completamente
        } else {
            // Restaurar estilos originales o mantener diseño para móviles
            overlayText.style.fontSize = '2rem';
            overlayText.style.top = '40%';
            overlayText.style.left = '0%';
            overlayText.style.transform = 'translate(0, 0)';
            overlayText.style.textAlign = 'left';
           
        }
    });

    overlayTexts1.forEach((overlayText1) => {
        if (isFullscreen && isLargeScreen) {
            overlayText1.style.fontSize = '2.5rem';
            overlayText1.style.top = '20px';
            overlayText1.style.textAlign = 'center'; // Centrado solo para pantallas grandes
        } else {
            overlayText1.style.fontSize = '2.5rem';
            overlayText1.style.top = '5px'
            overlayText1.style.textAlign = 'center'; // Alineación izquierda para móviles
        }
    });

    overlayTexts2.forEach((overlayText2) => {
        if (isFullscreen && isLargeScreen) {
            overlayText2.style.fontSize = '2.5rem';
            overlayText2.style.margin = '50px';
            overlayText2.style.top = '35%';
            overlayText2.style.textAlign = 'center'; // Centrado solo para pantallas grandes
        } else {
            overlayText2.style.fontSize = '2rem';
            overlayText2.style.margin = '30px';
            overlayText2.style.textAlign = 'left'; // Alineación izquierda para móviles
        }
    });
};




// Manejar clic en el botón para agrandar/contraer
enlargeButton.addEventListener('click', () => {
    if (isEnlarged) {
        // Volver al tamaño original
        flashcardContainer.style.position = '';
        flashcardContainer.style.top = '';
        flashcardContainer.style.left = '';
        flashcardContainer.style.width = '100%';
        flashcardContainer.style.height = '500px';
        flashcardContainer.style.maxWidth = '600px';
        flashcardContainer.style.maxHeight = '500px';
        enlargeButton.innerHTML = '<i class="fas fa-expand"></i>';
        buttonContainer.classList.remove('fullscreen');
        isEnlarged = false;

        // Restaurar estilos de las superposiciones
        updateOverlayStyles(false);
    } else {
        // Agrandar al tamaño completo
        flashcardContainer.style.position = 'fixed';
        flashcardContainer.style.top = '0';
        flashcardContainer.style.left = '0';
        flashcardContainer.style.width = '100vw';
        flashcardContainer.style.height = '100vh';
        flashcardContainer.style.maxWidth = 'none';
        flashcardContainer.style.maxHeight = 'none';
        enlargeButton.innerHTML = '<i class="fas fa-compress"></i>';
        buttonContainer.classList.add('fullscreen'); // Aplicar clase de pantalla completa
        isEnlarged = true;

        // Ajustar estilos de las superposiciones para pantalla completa
        updateOverlayStyles(true);
    }
});


let exposureInterval;
let isExposing = false;
let isPaused = false;
let currentExposureIndex = 0;
let timeouts = []; // Array para guardar los IDs de los setTimeout

// Función para iniciar/pausar la exposición de las tarjetas
document.getElementById('start-exposure-button').addEventListener('click', () => {
    const icon = document.querySelector('#start-exposure-button i');
    const startButton = document.getElementById('start-exposure-button');

    if (!isExposing) {
        // Guardar el estado de pantalla completa antes de recargar
        if (isEnlarged) {
            sessionStorage.setItem('fullscreenMode', 'true'); // Indicar que estaba en pantalla completa
        } else {
            sessionStorage.removeItem('fullscreenMode'); // Quitar indicador si no está en pantalla completa
        }

        // Guardar indicador de iniciar exposición después de recargar
        sessionStorage.setItem('startExposureAfterReload', 'true');

        // Reproducir el sonido de inicio de exposición antes de recargar
        const startExposureSound = document.getElementById('startExposureSound');
        startExposureSound.play().catch(error => {
            console.log('Error al reproducir el sonido de inicio:', error);
        });

        // Evitar que el sonido de reinicio se reproduzca
        sessionStorage.setItem('skipResetSound', 'true');

        setTimeout(() => {
            location.reload(); // Recargar la página después de reproducir el sonido
        }, 500); // Ajuste breve para permitir que el sonido se reproduzca
        return; // Salir para esperar la recarga
    }

    if (isPaused) {
        isPaused = false;
        icon.classList.remove('fa-sync-alt');
        icon.classList.add('fa-play'); // Mostrar ícono de play
        icon.classList.add('playing'); // Añadir efecto de parpadeo
        console.log("Reanudando exposición...");
        resumeExposure();
    } else {
        isPaused = true;
        icon.classList.add('fa-sync-alt');
        icon.classList.remove('fa-play'); // Cambiar ícono a pausa
        icon.classList.remove('playing'); // Quitar efecto de parpadeo
        console.log("Pausando exposición...");
        stopExposure();
    }
});


window.addEventListener('load', () => {
    // Forzar el estado inicial a no pantalla completa
    flashcardContainer.style.position = '';
    flashcardContainer.style.top = '';
    flashcardContainer.style.left = '';
    flashcardContainer.style.width = '100%';
    flashcardContainer.style.height = '500px';
    flashcardContainer.style.maxWidth = '600px';
    flashcardContainer.style.maxHeight = '500px';
    enlargeButton.innerHTML = '<i class="fas fa-expand"></i>';
    buttonContainer.classList.remove('fullscreen');
    isEnlarged = false;

    // Evitar el sonido de reinicio si está indicado
    const skipResetSound = sessionStorage.getItem('skipResetSound');
    if (skipResetSound === 'true') {
        sessionStorage.removeItem('skipResetSound'); // Limpiar indicador
    } else {
        const soundResetButton = document.getElementById('soundResetButton');
        soundResetButton.play().catch(error => {
            console.log('Error al reproducir el sonido tras la recarga:', error);
        });
    }

    // Iniciar exposición automáticamente si el indicador está activo
    if (sessionStorage.getItem('startExposureAfterReload') === 'true') {
        sessionStorage.removeItem('startExposureAfterReload');
        console.log("Iniciando exposición automáticamente después de recargar.");
        const startButton = document.getElementById('start-exposure-button');
        const icon = document.querySelector('#start-exposure-button i');
        isExposing = true;
        isPaused = false;
        icon.classList.remove('fa-sync-alt');
        icon.classList.add('fa-play');
        icon.classList.add('playing');
        startButton.style.backgroundColor = "gold";
        startButton.disabled = true;
        startExposure(); // Iniciar exposición
    }
});


// Función para iniciar la exposición
function startExposure() {
    console.log("Iniciando exposición...");
    const startButton = document.getElementById('start-exposure-button');
    const icon = document.querySelector('#start-exposure-button i');

    isExposing = true;
    isPaused = false;
    icon.classList.remove('fa-sync-alt');
    icon.classList.add('fa-play');
    icon.classList.add('playing');
    startButton.style.backgroundColor = "gold";
    startButton.disabled = true;

    showCard(currentExposureIndex);
    flipCard(currentExposureIndex, false);

    yesButton.disabled = true;
    noButton.disabled = true;
    yesButton.classList.add('disabled');
    noButton.classList.add('disabled');

    const flipDelay = currentExposureIndex === 0 ? 3000 : 4000; // 3 segundos para la primera tarjeta, 4 segundos para las siguientes
    const preAudioDelay = 0; // 0 segundos antes del audio
    const postAudioDelay = 10000; // 10 segundos después del audio

    // Reproducir audio de la cara frontal antes de voltear la tarjeta
    const currentCard = flashcards[currentExposureIndex];
    const frontAudioSrc = currentCard.getAttribute('data-audio');
    if (frontAudioSrc) {
        const frontAudio = new Audio(frontAudioSrc);
        frontAudio.play().catch((err) => console.log('Error al reproducir audio de la cara frontal:', err));
        frontAudio.onended = () => {
            console.log('Audio de la cara frontal terminado.');
            proceedToBackAudio(); // Continuar con el audio de la parte trasera
        };
    } else {
        console.log('No hay audio para la cara frontal. Procediendo directamente.');
        proceedToBackAudio();
    }

    function proceedToBackAudio() {
        let timeoutId = setTimeout(() => {
            flipCard(currentExposureIndex, true); // Voltear la tarjeta

            let repetitions = 0;
            const audioDuration = audios[currentExposureIndex].duration * 20; // Duración del audio en milisegundos

            const playAudioWithDelays = () => {
                setTimeout(() => {
                    // Repetir el audio varias veces
                    const audioRepetitionInterval = setInterval(() => {
                        audios[currentExposureIndex].play();
                        repetitions++;

                        if (repetitions >= 2) { // Número de repeticiones del audio
                            clearInterval(audioRepetitionInterval);

                            console.log("Audio terminado, esperando antes de la siguiente tarjeta...");
                            setTimeout(() => {
                                moveToNextCard(); // Pasar a la siguiente tarjeta después del postAudioDelay
                            }, postAudioDelay);
                        }
                    }, audioDuration); // Intervalo para reproducir el audio
                }, preAudioDelay); // PreAudioDelay antes de reproducir el audio
            };

            const moveToNextCard = () => {
                currentExposureIndex++;

                if (currentExposureIndex >= audios.length) {
                    currentExposureIndex = 0;
                    yesButton.disabled = false;
                    noButton.disabled = false;
                    yesButton.classList.remove('disabled');
                    noButton.classList.remove('disabled');
                    isExposing = false;

                    showFinalReviewMessage();

                    setTimeout(() => {
                        location.reload();
                    }, 3000);

                    startButton.style.backgroundColor = "";
                    startButton.disabled = false;
                    icon.classList.remove('playing');
                } else {
                    startExposure(); // Continuar con la siguiente tarjeta
                }
                updateTotalCardsCounter();
            };

            playAudioWithDelays();
        }, flipDelay); // Retraso inicial para voltear la tarjeta

        timeouts.push(timeoutId); // Guardar el ID del timeout
    }
}


// Función para pausar la exposición
function stopExposure() {
    clearInterval(exposureInterval);
    timeouts.forEach(timeoutId => clearTimeout(timeoutId));
    timeouts = [];
}

// Función para reanudar la exposición
function resumeExposure() {
    startExposure();
}

// Función para restablecer valores sin recargar
function resetExposureValues() {
    console.log("Restableciendo valores para la exposición.");
    isExposing = false;
    isPaused = false;
    currentExposureIndex = 0;
    timeouts.forEach(timeoutId => clearTimeout(timeoutId));
    timeouts = [];
    showCard(currentExposureIndex);
    flipCard(currentExposureIndex, false);
    
}


// Función para mostrar la tarjeta en la posición indicada
function showCard(index) {
    flashcards.forEach((card, i) => {
        card.classList.remove('is-visible');
        if (i === index && !completedCards.has(i)) {
            card.classList.add('is-visible');
            card.classList.remove('flipped'); // AGREGAR ESTA LÍNEA
        }
    });
    resultsCard.style.display = 'none';
    completionMessage.style.display = 'none';
}

// Función para voltear la tarjeta
function flipCard(index, flipped) {
    const card = flashcards[index];
    if (flipped) {
        card.classList.add('flipped'); // Voltea la tarjeta
    } else {
        card.classList.remove('flipped'); // Muestra la cara frontal
    }
}

// Función para reproducir el audio correspondiente a la tarjeta
function playAudio(index) {
    if (audios[index]) {
        stopAllAudios(); // Detener cualquier audio previamente reproducido
        audios[index].play();
    }
}

// Función para detener todos los audios
function stopAllAudios() {
    audios.forEach(audio => {
        audio.pause();
        audio.currentTime = 0; // Reiniciar al inicio
    });
}

// Función para reproducir audio final
function playFinalMessageAudio() {
    const finalMessageSound = document.getElementById('finalMessageSound');
    finalMessageSound.play();
}

        const resetButton = document.getElementById('reset-button');
        const soundResetButton = document.getElementById('soundResetButton');
        const resultsCard = document.getElementById('results-card');
        const completionMessage = document.getElementById('completion-message');
        const yesCounterSpan = document.getElementById('yes-counter');
        const noCounterSpan = document.getElementById('no-counter');
        const totalCardsSpan = document.getElementById('total-cards');
        const cardsRemembered = document.getElementById('cards-remembered');
        const cardsNotRemembered = document.getElementById('cards-not-remembered');
        const totalCardsInfo = document.getElementById('total-cards-info');
        const progressCircle = document.getElementById('progress-circle');
        const progressPercentage = document.getElementById('progress-percentage');
    
        let currentCardIndex = 0;
        let yesCounter = 0;
        let noCounter = 0;
        let postponedCards = new Set();
        let completedCards = new Set();
        let lastPostponedCard = null;
    
        function updateTotalCardsCounter() {
            totalCardsSpan.textContent = flashcards.length - completedCards.size; // Actualizar el contador excluyendo tarjetas completadas
        }
    
        function showCard(index) {
            flashcards.forEach((card, i) => {
                card.classList.remove('is-visible');
                if (i === index && !completedCards.has(i)) {
                    card.classList.add('is-visible');
                }
            });
            resultsCard.style.display = 'none'; // Asegurar que no se muestre al principio
            completionMessage.style.display = 'none'; // Ocultar el mensaje de finalización al mostrar tarjetas
        }
    
       function moveToNextCard() {
    do {
        currentCardIndex++;
        if (currentCardIndex >= flashcards.length) {
            currentCardIndex = 0;
        }
    } while (completedCards.has(currentCardIndex) && completedCards.size < flashcards.length);

    if (completedCards.size === flashcards.length) {
        showCompletionMessage();
        setTimeout(showResultsCard, 3000);
        disableButtons();
    } else {
        // AGREGAR ESTAS DOS LÍNEAS:
        const currentCard = flashcards[currentCardIndex];
        currentCard.classList.remove('flipped'); // Forzar que se muestre la cara frontal
        
        showCard(currentCardIndex);
    }
}
    
        noButton.addEventListener('click', () => {
    const soundNoButton = document.getElementById('soundNoButton');
    
    // Detener y reiniciar el audio para evitar fallos o tardanzas
    soundNoButton.pause();
    soundNoButton.currentTime = 0;
    soundNoButton.play().catch(error => {
        console.log('Error al reproducir el sonido del botón No:', error);
    });
    
    // Resto de la lógica del botón "No"
    if (postponedCards.has(currentCardIndex)) {
        
        // Si es la última tarjeta pospuesta y se presiona "No" nuevamente
        if (lastPostponedCard === currentCardIndex) {
            showCompletionMessage();
            setTimeout(showResultsCard, 3000); // Mostrar el resumen después del mensaje de finalización
            disableButtons();
        } else {
            moveToNextCard(); // Mover al siguiente si ya estaba pospuesta
        }
    } else {
        noCounter++;
        noCounterSpan.textContent = noCounter;
        postponedCards.add(currentCardIndex);
        lastPostponedCard = currentCardIndex; // Registrar como la última tarjeta pospuesta
        moveToNextCard();
        
         // Crear el efecto de espumas
         createSmokeEffect1(noButton);
    }
});



yesButton.addEventListener('click', () => {  
    const soundYesButton = document.getElementById('soundYesButton');
    
    // Detener y reiniciar el audio para evitar fallos o tardanzas
    soundYesButton.pause();
    soundYesButton.currentTime = 0;
    soundYesButton.play().catch(error => {
        console.log('Error al reproducir el sonido del botón Sí:', error);
    });
    
    // Resto de la lógica del botón "Sí"
    yesCounter++;
    yesCounterSpan.textContent = yesCounter;
    
    if (postponedCards.has(currentCardIndex)) {
        postponedCards.delete(currentCardIndex);
        noCounter--;
        noCounterSpan.textContent = noCounter;
    
    }

    completedCards.add(currentCardIndex); // Marcar la tarjeta como completada
    moveToNextCard();
    updateTotalCardsCounter(); // Actualizar el total de tarjetas     
    createSmokeEffect(yesButton);
});


function createSmokeEffect(button) {
    const bubbleCount = 3; // Número de burbujas a crear

    for (let i = 0; i < bubbleCount; i++) {
        const smoke = document.createElement('div');
        smoke.className = 'smoke'; // Clase para las burbujas

        // Generar posición aleatoria alrededor del botón
        const offsetX = (Math.random() - 0.5) * 50; // Desplazamiento horizontal aleatorio (-25px a 25px)
        const offsetY = Math.random() * -30; // Desplazamiento vertical inicial (0px a -30px)

        // Estilo de la burbuja
        smoke.style.transform = `translate(${offsetX}px, ${offsetY}px) scale(1)`;
        smoke.style.zIndex = '10';

        // Crear el texto "Sí" dentro de la burbuja
        const text = document.createElement('span');
        text.textContent = 'Sí';
        smoke.appendChild(text);

        // Agregar la burbuja al botón
        button.appendChild(smoke);

        // Eliminar la burbuja después de 2 segundos
        setTimeout(() => smoke.remove(), 2000);
    }
}

function createSmokeEffect1(button) {
    const bubbleCount = 3; // Número de burbujas a crear

    for (let i = 0; i < bubbleCount; i++) {
        const smoke1 = document.createElement('div');
        smoke1.className = 'smoke1'; // Clase para las burbujas

        // Generar posición aleatoria alrededor del botón
        const offsetX = (Math.random() - 0.5) * 50; // Desplazamiento horizontal aleatorio (-25px a 25px)
        const offsetY = Math.random() * -50; // Desplazamiento vertical inicial (0px a -50px)

        // Estilo inicial de la burbuja
        smoke1.style.transform = `translate(${offsetX}px, ${offsetY}px) scale(1)`;
        smoke1.style.zIndex = '10';

        // Crear el texto "No" dentro de la burbuja
        const text = document.createElement('span');
        text.textContent = 'No';
        smoke1.appendChild(text);

        // Agregar la burbuja al botón
        button.appendChild(smoke1);

        // Eliminar la burbuja después de 2 segundos
        setTimeout(() => smoke1.remove(), 2000);
    }
}


    
resetButton.addEventListener('click', () => {
    // Detener y reiniciar el audio para evitar fallos o tardanzas
    const soundResetButton = document.getElementById('soundResetButton');
    
    soundResetButton.pause(); // Detener cualquier reproducción anterior
    soundResetButton.currentTime = 0; // Reiniciar el tiempo al principio
    soundResetButton.play().catch(error => {
        console.log('Error al reproducir el sonido del botón Reiniciar:', error);
    });

    // Recargar la página y asegurarnos que el sonido se reproduzca después de la recarga
    location.reload(); // Recarga la página inmediatamente
});

// Después de la recarga, reproducir el sonido de inmediato
window.addEventListener('load', () => {
    const soundResetButton = document.getElementById('soundResetButton');
    soundResetButton.play().catch(error => {
        console.log('Error al reproducir el sonido tras la recarga:', error);
    });
});

        function enableButtons() {
            yesButton.classList.remove('disabled');
            noButton.classList.remove('disabled');
            yesButton.disabled = false;
            noButton.disabled = false;
        }
    
        function disableButtons() {
            yesButton.classList.add('disabled');
            noButton.classList.add('disabled');
            yesButton.disabled = true;
            noButton.disabled = true;
        }
    
        function showResultsCard() {
    resultsCard.style.display = 'flex'; // Mostrar el resumen al final
    totalCardsInfo.textContent = flashcards.length;
    cardsRemembered.textContent = noCounter;
    cardsNotRemembered.textContent = yesCounter;

    // Calcular porcentaje y actualizar el progreso circular
    const percentage = (yesCounter / flashcards.length) * 100;
    progressPercentage.textContent = `${Math.round(percentage)}%`;
    progressCircle.style.setProperty('--progress', `${percentage}deg`);

    // Desactivar el botón después de mostrar el resumen
    const startButton = document.getElementById('start-exposure-button');
    startButton.disabled = true;  // Desactivar el botón
    startButton.classList.add('disabled');  // Añadir la clase 'disabled' para cambiar el estilo
}
   
        function showCompletionMessage() {
            const buttonSound = document.getElementById('buttonSound');
            buttonSound.play().catch(error => {
                console.log('Audio playback failed:', error);
            });
            completionMessage.style.display = 'flex';
            // Efecto de confeti utilizando Canvas Confetti
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 }
            });
            setTimeout(() => {
                completionMessage.style.display = 'none';
            }, 3000);
        }
    
// Función para mostrar el mensaje de "Repaso Finalizado"
function showFinalReviewMessage() {
    console.log('Mensaje de repaso finalizado a punto de mostrarse');
    const finalReviewMessage = document.getElementById('final-review-message');
    finalReviewMessage.style.display = 'flex';

    // Efecto de confeti
    confetti({
        particleCount: 150,
        spread: 70,
        origin: { y: 0.6 }
    });

    // Reproducir el audio de "Repaso Finalizado"
    playFinalMessageAudio();

    // Desactivar el botón después de mostrar el mensaje de repaso finalizado
    const startButton = document.getElementById('start-exposure-button');
    startButton.disabled = true;
    startButton.classList.add('disabled');  // Añadir clase 'disabled'

    setTimeout(() => {
        console.log('Ocultando el mensaje de repaso finalizado');
        finalReviewMessage.style.display = 'none';
    }, 3000);
}

function playAudio(index) {
    console.log('Reproduciendo audio de la tarjeta', index);
    if (audios[index]) {
        stopAllAudios();
        audios[index].play();

        audios[index].onended = function() {
            if (index === flashcards.length - 1) {
                console.log('Última tarjeta terminada, mostrando mensaje');
                showFinalReviewMessage();
                resetFlashcards();
            }
        };
    }
}

// Función para reproducir el audio correspondiente a la tarjeta
function playAudio(index) {
    if (audios[index]) {
        stopAllAudios(); // Detener cualquier audio previamente reproducido
        audios[index].play();

        // Si es el último audio, mostrar el mensaje de repaso finalizado
        audios[index].onended = function() {
            if (index === flashcards.length - 1) { // Si es la última tarjeta
                showFinalReviewMessage(); // Muestra el mensaje de repaso finalizado
                resetFlashcards(); // Regresar a la primera tarjeta
            }
        };
    }
}

// Función para reiniciar las tarjetas (volver a la primera tarjeta)
function resetFlashcards() {
    currentExposureIndex = 0;
    showCard(currentExposureIndex); // Mostrar la primera tarjeta
    flipCard(currentExposureIndex, false); // Voltear la tarjeta
    updateTotalCardsCounter(); // Actualizar el contador
}

        updateTotalCardsCounter();
        showCard(currentCardIndex);
    </script>
    
    
</body>
</html>
